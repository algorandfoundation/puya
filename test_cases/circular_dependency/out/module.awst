contract Factory
{
  method_resolution_order: (
    algopy.arc4.ARC4Contract,
    algopy._base_contract.BaseContract,
  )
  
  subroutine algopy.arc4.ARC4Contract.approval_program(): bool
  {
    return arc4_router()
  }
  
  subroutine algopy.arc4.ARC4Contract.clear_state_program(): bool
  {
    return true
  }
  
  abimethod test_cases.circular_dependency.factory.Factory.deploy_a(): application
  {
    txn: inner_transaction_appl = submit_txn(abi_call(signature=None, args=(), fields={TxnField.ApprovalProgramPages=(SINGLE_EVAL(id=1, source=SINGLE_EVAL(id=0, source=compiled_contract(test_cases.circular_dependency.a.A,,, prefix=None, variables={})).approval_program)[0], SINGLE_EVAL(id=1)[1]), TxnField.ClearStateProgramPages=(SINGLE_EVAL(id=2, source=SINGLE_EVAL(id=0).clear_state_program)[0], SINGLE_EVAL(id=2)[1]), TxnField.ExtraProgramPages=SINGLE_EVAL(id=0).extra_program_pages, TxnField.GlobalNumByteSlice=SINGLE_EVAL(id=0).global_bytes, TxnField.GlobalNumUint=SINGLE_EVAL(id=0).global_uints, TxnField.LocalNumByteSlice=SINGLE_EVAL(id=0).local_bytes, TxnField.LocalNumUint=SINGLE_EVAL(id=0).local_uints}))
    return txn.CreatedApplicationID
  }
  
  abimethod test_cases.circular_dependency.factory.Factory.deploy_b(): application
  {
    txn: inner_transaction_appl = submit_txn(abi_call(signature=None, args=(), fields={TxnField.ApprovalProgramPages=(SINGLE_EVAL(id=4, source=SINGLE_EVAL(id=3, source=compiled_contract(test_cases.circular_dependency.b.B,,, prefix=None, variables={})).approval_program)[0], SINGLE_EVAL(id=4)[1]), TxnField.ClearStateProgramPages=(SINGLE_EVAL(id=5, source=SINGLE_EVAL(id=3).clear_state_program)[0], SINGLE_EVAL(id=5)[1]), TxnField.ExtraProgramPages=SINGLE_EVAL(id=3).extra_program_pages, TxnField.GlobalNumByteSlice=SINGLE_EVAL(id=3).global_bytes, TxnField.GlobalNumUint=SINGLE_EVAL(id=3).global_uints, TxnField.LocalNumByteSlice=SINGLE_EVAL(id=3).local_bytes, TxnField.LocalNumUint=SINGLE_EVAL(id=3).local_uints}))
    return txn.CreatedApplicationID
  }
  
  baremethod test_cases.circular_dependency.factory.Factory.__algopy_default_create(): void
  {
  }
  
  subroutine algopy._base_contract.BaseContract.__init__(): void
  {
  }
}

contract B
{
  method_resolution_order: (
    test_cases.circular_dependency.b.PingPongBase,
    algopy.arc4.ARC4Contract,
    algopy._base_contract.BaseContract,
  )
  
  subroutine algopy.arc4.ARC4Contract.approval_program(): bool
  {
    return arc4_router()
  }
  
  subroutine algopy.arc4.ARC4Contract.clear_state_program(): bool
  {
    return true
  }
  
  abimethod test_cases.circular_dependency.b.B.name(): string
  {
    return 'B'
  }
  
  abimethod test_cases.circular_dependency.b.B.ping(): string
  {
    return 'ping'
  }
  
  abimethod test_cases.circular_dependency.b.B.pong(a: application): string
  {
    (result, _txn): tuple<string,inner_transaction_appl> = ((assert(extract<0, 4>(SINGLE_EVAL(id=7, source=SINGLE_EVAL(id=6, source=submit_txn(abi_call(signature={name="pong",args=(),result=string}, args=(), fields={TxnField.ApplicationID=a}))).LastLog)) == hex<"151F7C75">, comment="application log value is not the result of an ABI return"), arc4_validate(extract<4, 0>(SINGLE_EVAL(id=7)), string))[-1], SINGLE_EVAL(id=6))
    return result
  }
  
  abimethod test_cases.circular_dependency.b.B.create_a(factory_id: application): application
  {
    (result, _txn): tuple<application,inner_transaction_appl> = ((assert(extract<0, 4>(SINGLE_EVAL(id=9, source=SINGLE_EVAL(id=8, source=submit_txn(abi_call(signature={name="deploy_a",args=(),result=application}, args=(), fields={TxnField.ApplicationID=factory_id}))).LastLog)) == hex<"151F7C75">, comment="application log value is not the result of an ABI return"), arc4_validate(extract<4, 0>(SINGLE_EVAL(id=9)), application))[-1], SINGLE_EVAL(id=8))
    return result
  }
  
  baremethod test_cases.circular_dependency.b.B.__algopy_default_create(): void
  {
  }
  
  subroutine algopy._base_contract.BaseContract.__init__(): void
  {
  }
}

subroutine check_inner(s: test_cases.circular_dependency.a.MyInnerStruct): void
{
  assert(reinterpret_cast<biguint>(s.value) == reinterpret_cast<biguint>(42_arc4u64))
}

contract A
{
  method_resolution_order: (
    test_cases.circular_dependency.b.PingPongBase,
    algopy.arc4.ARC4Contract,
    algopy._base_contract.BaseContract,
  )
  
  subroutine algopy.arc4.ARC4Contract.approval_program(): bool
  {
    return arc4_router()
  }
  
  subroutine algopy.arc4.ARC4Contract.clear_state_program(): bool
  {
    return true
  }
  
  abimethod test_cases.circular_dependency.a.A.name(): string
  {
    return 'A'
  }
  
  abimethod test_cases.circular_dependency.a.A.ping(b: application): string
  {
    (result, _txn): tuple<string,inner_transaction_appl> = ((assert(extract<0, 4>(SINGLE_EVAL(id=11, source=SINGLE_EVAL(id=10, source=submit_txn(abi_call(signature={name="ping",args=(),result=string}, args=(), fields={TxnField.ApplicationID=b}))).LastLog)) == hex<"151F7C75">, comment="application log value is not the result of an ABI return"), arc4_validate(extract<4, 0>(SINGLE_EVAL(id=11)), string))[-1], SINGLE_EVAL(id=10))
    return result
  }
  
  abimethod test_cases.circular_dependency.a.A.pong(): string
  {
    return 'pong'
  }
  
  abimethod test_cases.circular_dependency.a.A.create_b(factory_id: application): application
  {
    (result, _txn): tuple<application,inner_transaction_appl> = ((assert(extract<0, 4>(SINGLE_EVAL(id=13, source=SINGLE_EVAL(id=12, source=submit_txn(abi_call(signature={name="deploy_b",args=(),result=application}, args=(), fields={TxnField.ApplicationID=factory_id}))).LastLog)) == hex<"151F7C75">, comment="application log value is not the result of an ABI return"), arc4_validate(extract<4, 0>(SINGLE_EVAL(id=13)), application))[-1], SINGLE_EVAL(id=12))
    return result
  }
  
  baremethod test_cases.circular_dependency.a.A.__algopy_default_create(): void
  {
  }
  
  subroutine algopy._base_contract.BaseContract.__init__(): void
  {
  }
}