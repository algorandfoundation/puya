#pragma version 10

test_cases.arc4_types.string.Arc4StringTypesContract.approval_program:
    int 12
    itob
    extract 6 2
    byte "Hello World!"
    concat
    dupn 2
    extract 2 0
    swap
    byte "Hello World!"
    dig 1
    !=
    assert // Original bytes should not match encoded bytes
    len
    dup
    int 2
    >
    bz main_ternary_false@2
    int 2
    b main_ternary_merge@3

main_ternary_false@2:
    dup

main_ternary_merge@3:
    dig 3
    swap
    dig 2
    substring3
    byte "Hello World!"
    ==
    assert // Original bytes should match encoded if we strip the length header
    byte "Hello World!"
    dig 2
    ==
    assert
    int 6
    itob
    extract 6 0
    byte "Hello "
    concat
    extract 2 0
    byte "World!"
    concat
    dup
    len
    itob
    extract 6 0
    swap
    concat
    byte "\x00\x0cHello World!"
    ==
    assert
    int 4
    itob
    extract 6 0
    byte "hihi"
    concat
    byte "\x00\x04hihi"
    ==
    assert
    int 2
    itob
    extract 6 0
    byte "ab"
    concat
    extract 2 0
    byte "c"
    concat
    dup
    len
    itob
    extract 6 0
    swap
    concat
    extract 2 0
    byte "d"
    concat
    dup
    len
    itob
    extract 6 0
    swap
    concat
    extract 2 0
    byte "e"
    concat
    dup
    len
    itob
    extract 6 0
    swap
    concat
    extract 2 0
    byte "f"
    concat
    dup
    len
    itob
    extract 6 0
    swap
    concat
    extract 2 0
    byte "g"
    concat
    dup
    len
    itob
    extract 6 0
    swap
    concat
    byte "\x00\x07abcdefg"
    ==
    assert
    int 1
    return
