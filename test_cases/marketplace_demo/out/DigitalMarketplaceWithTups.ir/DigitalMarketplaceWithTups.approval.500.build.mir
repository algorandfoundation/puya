// Op                                                                                                                        Stack (out)
// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__algopy_entrypoint_with_init() -> uint64:
subroutine main:
    main_block@0:
        txn ApplicationID                                                                                                    tmp%0#0
        v-store tmp%0#0
        v-load tmp%0#0                                                                                                       tmp%0#0
        bz main_call___init__@1 ; b main_after_if_else@2

    main_call___init__@1:
        // marketplace_demo/marketplace_with_tups.py:40
        // log("init")
        byte "init"                                                                                                          "init"
        log
        b main_after_if_else@2

    main_after_if_else@2:
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txn NumAppArgs                                                                                                       tmp%0#2
        v-store tmp%0#2
        v-load tmp%0#2                                                                                                       tmp%0#2
        bz main_bare_routing@14 ; b main_abi_routing@4

    main_abi_routing@4:
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txna ApplicationArgs 0                                                                                               tmp%2#0
        v-store tmp%2#0
        method getListingsMbr()uint64                                                                                        Method(getListingsMbr()uint64)
        method allowAsset(pay,asset)void                                                                                     Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void)
        method firstDeposit(pay,axfer,uint64,uint64)void                                                                     Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void)
        method deposit(axfer,uint64)void                                                                                     Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void)
        method setPrice(asset,uint64,uint64)void                                                                             Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void),Method(setPrice(asset,uint64,uint64)void)
        method buy(account,asset,uint64,pay,uint64)void                                                                      Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void),Method(setPrice(asset,uint64,uint64)void),Method(buy(account,asset,uint64,pay,uint64)void)
        method withdraw(asset,uint64)void                                                                                    Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void),Method(setPrice(asset,uint64,uint64)void),Method(buy(account,asset,uint64,pay,uint64)void),Method(withdraw(asset,uint64)void)
        method bid(account,asset,uint64,pay,uint64,uint64)void                                                               Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void),Method(setPrice(asset,uint64,uint64)void),Method(buy(account,asset,uint64,pay,uint64)void),Method(withdraw(asset,uint64)void),Method(bid(account,asset,uint64,pay,uint64,uint64)void)
        method acceptBid(asset,uint64)void                                                                                   Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void),Method(setPrice(asset,uint64,uint64)void),Method(buy(account,asset,uint64,pay,uint64)void),Method(withdraw(asset,uint64)void),Method(bid(account,asset,uint64,pay,uint64,uint64)void),Method(acceptBid(asset,uint64)void)
        v-load tmp%2#0                                                                                                       Method(getListingsMbr()uint64),Method(allowAsset(pay,asset)void),Method(firstDeposit(pay,axfer,uint64,uint64)void),Method(deposit(axfer,uint64)void),Method(setPrice(asset,uint64,uint64)void),Method(buy(account,asset,uint64,pay,uint64)void),Method(withdraw(asset,uint64)void),Method(bid(account,asset,uint64,pay,uint64,uint64)void),Method(acceptBid(asset,uint64)void),tmp%2#0
        match main_getListingsMbr_route@5 main_allowAsset_route@6 main_firstDeposit_route@7 main_deposit_route@8 main_setPrice_route@9 main_buy_route@10 main_withdraw_route@11 main_bid_route@12 main_acceptBid_route@13 ; b main_after_if_else@16 

    main_getListingsMbr_route@5:
        // marketplace_demo/marketplace_with_tups.py:79
        // @arc4.abimethod(readonly=True, name="getListingsMbr")
        txn OnCompletion                                                                                                     tmp%3#0
        v-store tmp%3#0
        v-load tmp%3#0                                                                                                       tmp%3#0
        !                                                                                                                    tmp%4#0
        v-store tmp%4#0
        v-load tmp%4#0                                                                                                       tmp%4#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%5#0
        v-store tmp%5#0
        v-load tmp%5#0                                                                                                       tmp%5#0
        assert // can only call when not creating
        byte 0x151f7c75000000000000c544                                                                                      0x151f7c75000000000000c544
        log
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_allowAsset_route@6:
        // marketplace_demo/marketplace_with_tups.py:83
        // @arc4.abimethod(name="allowAsset")
        txn OnCompletion                                                                                                     tmp%10#0
        v-store tmp%10#0
        v-load tmp%10#0                                                                                                      tmp%10#0
        !                                                                                                                    tmp%11#0
        v-store tmp%11#0
        v-load tmp%11#0                                                                                                      tmp%11#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%12#0
        v-store tmp%12#0
        v-load tmp%12#0                                                                                                      tmp%12#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txn GroupIndex                                                                                                       tmp%14#0
        v-store tmp%14#0
        v-load tmp%14#0                                                                                                      tmp%14#0
        int 1                                                                                                                tmp%14#0,1
        -                                                                                                                    gtxn_idx%0#0
        v-store gtxn_idx%0#0
        v-load gtxn_idx%0#0                                                                                                  gtxn_idx%0#0
        gtxns TypeEnum                                                                                                       gtxn_type%0#0
        v-store gtxn_type%0#0
        v-load gtxn_type%0#0                                                                                                 gtxn_type%0#0
        int pay                                                                                                              gtxn_type%0#0,pay
        ==                                                                                                                   gtxn_type_matches%0#0
        v-store gtxn_type_matches%0#0
        v-load gtxn_type_matches%0#0                                                                                         gtxn_type_matches%0#0
        assert // transaction type is pay
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint8)%0#0
        v-store reinterpret_Encoded(uint8)%0#0
        v-load reinterpret_Encoded(uint8)%0#0                                                                                reinterpret_Encoded(uint8)%0#0
        btoi                                                                                                                 tmp%15#0
        v-store tmp%15#0
        v-load tmp%15#0                                                                                                      tmp%15#0
        txnas Assets                                                                                                         tmp%16#0
        v-store tmp%16#0
        // marketplace_demo/marketplace_with_tups.py:83
        // @arc4.abimethod(name="allowAsset")
        v-load gtxn_idx%0#0                                                                                                  gtxn_idx%0#0
        v-load tmp%16#0                                                                                                      gtxn_idx%0#0,tmp%16#0
        callsub allow_asset
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_firstDeposit_route@7:
        // marketplace_demo/marketplace_with_tups.py:94
        // @arc4.abimethod(name="firstDeposit")
        txn OnCompletion                                                                                                     tmp%17#0
        v-store tmp%17#0
        v-load tmp%17#0                                                                                                      tmp%17#0
        !                                                                                                                    tmp%18#0
        v-store tmp%18#0
        v-load tmp%18#0                                                                                                      tmp%18#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%19#0
        v-store tmp%19#0
        v-load tmp%19#0                                                                                                      tmp%19#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txn GroupIndex                                                                                                       tmp%21#0
        v-store tmp%21#0
        v-load tmp%21#0                                                                                                      tmp%21#0
        int 2                                                                                                                tmp%21#0,2
        -                                                                                                                    gtxn_idx%1#0
        v-store gtxn_idx%1#0
        v-load gtxn_idx%1#0                                                                                                  gtxn_idx%1#0
        gtxns TypeEnum                                                                                                       gtxn_type%1#0
        v-store gtxn_type%1#0
        v-load gtxn_type%1#0                                                                                                 gtxn_type%1#0
        int pay                                                                                                              gtxn_type%1#0,pay
        ==                                                                                                                   gtxn_type_matches%1#0
        v-store gtxn_type_matches%1#0
        v-load gtxn_type_matches%1#0                                                                                         gtxn_type_matches%1#0
        assert // transaction type is pay
        txn GroupIndex                                                                                                       tmp%22#0
        v-store tmp%22#0
        v-load tmp%22#0                                                                                                      tmp%22#0
        int 1                                                                                                                tmp%22#0,1
        -                                                                                                                    gtxn_idx%2#0
        v-store gtxn_idx%2#0
        v-load gtxn_idx%2#0                                                                                                  gtxn_idx%2#0
        gtxns TypeEnum                                                                                                       gtxn_type%2#0
        v-store gtxn_type%2#0
        v-load gtxn_type%2#0                                                                                                 gtxn_type%2#0
        int axfer                                                                                                            gtxn_type%2#0,axfer
        ==                                                                                                                   gtxn_type_matches%2#0
        v-store gtxn_type_matches%2#0
        v-load gtxn_type_matches%2#0                                                                                         gtxn_type_matches%2#0
        assert // transaction type is axfer
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint64)%0#0
        v-store reinterpret_Encoded(uint64)%0#0
        v-load reinterpret_Encoded(uint64)%0#0                                                                               reinterpret_Encoded(uint64)%0#0
        btoi                                                                                                                 tmp%23#0
        v-store tmp%23#0
        txna ApplicationArgs 2                                                                                               reinterpret_Encoded(uint64)%1#0
        v-store reinterpret_Encoded(uint64)%1#0
        v-load reinterpret_Encoded(uint64)%1#0                                                                               reinterpret_Encoded(uint64)%1#0
        btoi                                                                                                                 tmp%24#0
        v-store tmp%24#0
        // marketplace_demo/marketplace_with_tups.py:94
        // @arc4.abimethod(name="firstDeposit")
        v-load gtxn_idx%1#0                                                                                                  gtxn_idx%1#0
        v-load gtxn_idx%2#0                                                                                                  gtxn_idx%1#0,gtxn_idx%2#0
        v-load tmp%23#0                                                                                                      gtxn_idx%1#0,gtxn_idx%2#0,tmp%23#0
        v-load tmp%24#0                                                                                                      gtxn_idx%1#0,gtxn_idx%2#0,tmp%23#0,tmp%24#0
        callsub first_deposit
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_deposit_route@8:
        // marketplace_demo/marketplace_with_tups.py:121
        // @arc4.abimethod
        txn OnCompletion                                                                                                     tmp%25#0
        v-store tmp%25#0
        v-load tmp%25#0                                                                                                      tmp%25#0
        !                                                                                                                    tmp%26#0
        v-store tmp%26#0
        v-load tmp%26#0                                                                                                      tmp%26#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%27#0
        v-store tmp%27#0
        v-load tmp%27#0                                                                                                      tmp%27#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txn GroupIndex                                                                                                       tmp%29#0
        v-store tmp%29#0
        v-load tmp%29#0                                                                                                      tmp%29#0
        int 1                                                                                                                tmp%29#0,1
        -                                                                                                                    gtxn_idx%3#0
        v-store gtxn_idx%3#0
        v-load gtxn_idx%3#0                                                                                                  gtxn_idx%3#0
        gtxns TypeEnum                                                                                                       gtxn_type%3#0
        v-store gtxn_type%3#0
        v-load gtxn_type%3#0                                                                                                 gtxn_type%3#0
        int axfer                                                                                                            gtxn_type%3#0,axfer
        ==                                                                                                                   gtxn_type_matches%3#0
        v-store gtxn_type_matches%3#0
        v-load gtxn_type_matches%3#0                                                                                         gtxn_type_matches%3#0
        assert // transaction type is axfer
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint64)%2#0
        v-store reinterpret_Encoded(uint64)%2#0
        v-load reinterpret_Encoded(uint64)%2#0                                                                               reinterpret_Encoded(uint64)%2#0
        btoi                                                                                                                 tmp%30#0
        v-store tmp%30#0
        // marketplace_demo/marketplace_with_tups.py:121
        // @arc4.abimethod
        v-load gtxn_idx%3#0                                                                                                  gtxn_idx%3#0
        v-load tmp%30#0                                                                                                      gtxn_idx%3#0,tmp%30#0
        callsub deposit
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_setPrice_route@9:
        // marketplace_demo/marketplace_with_tups.py:138
        // @arc4.abimethod(name="setPrice")
        txn OnCompletion                                                                                                     tmp%31#0
        v-store tmp%31#0
        v-load tmp%31#0                                                                                                      tmp%31#0
        !                                                                                                                    tmp%32#0
        v-store tmp%32#0
        v-load tmp%32#0                                                                                                      tmp%32#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%33#0
        v-store tmp%33#0
        v-load tmp%33#0                                                                                                      tmp%33#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint8)%1#0
        v-store reinterpret_Encoded(uint8)%1#0
        v-load reinterpret_Encoded(uint8)%1#0                                                                                reinterpret_Encoded(uint8)%1#0
        btoi                                                                                                                 tmp%35#0
        v-store tmp%35#0
        v-load tmp%35#0                                                                                                      tmp%35#0
        txnas Assets                                                                                                         tmp%36#0
        v-store tmp%36#0
        txna ApplicationArgs 2                                                                                               reinterpret_Encoded(uint64)%3#0
        v-store reinterpret_Encoded(uint64)%3#0
        v-load reinterpret_Encoded(uint64)%3#0                                                                               reinterpret_Encoded(uint64)%3#0
        btoi                                                                                                                 tmp%37#0
        v-store tmp%37#0
        txna ApplicationArgs 3                                                                                               reinterpret_Encoded(uint64)%4#0
        v-store reinterpret_Encoded(uint64)%4#0
        v-load reinterpret_Encoded(uint64)%4#0                                                                               reinterpret_Encoded(uint64)%4#0
        btoi                                                                                                                 tmp%38#0
        v-store tmp%38#0
        // marketplace_demo/marketplace_with_tups.py:138
        // @arc4.abimethod(name="setPrice")
        v-load tmp%36#0                                                                                                      tmp%36#0
        v-load tmp%37#0                                                                                                      tmp%36#0,tmp%37#0
        v-load tmp%38#0                                                                                                      tmp%36#0,tmp%37#0,tmp%38#0
        callsub set_price
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_buy_route@10:
        // marketplace_demo/marketplace_with_tups.py:151
        // @arc4.abimethod
        txn OnCompletion                                                                                                     tmp%39#0
        v-store tmp%39#0
        v-load tmp%39#0                                                                                                      tmp%39#0
        !                                                                                                                    tmp%40#0
        v-store tmp%40#0
        v-load tmp%40#0                                                                                                      tmp%40#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%41#0
        v-store tmp%41#0
        v-load tmp%41#0                                                                                                      tmp%41#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint8)%2#0
        v-store reinterpret_Encoded(uint8)%2#0
        v-load reinterpret_Encoded(uint8)%2#0                                                                                reinterpret_Encoded(uint8)%2#0
        btoi                                                                                                                 tmp%43#0
        v-store tmp%43#0
        v-load tmp%43#0                                                                                                      tmp%43#0
        txnas Accounts                                                                                                       tmp%44#0
        v-store tmp%44#0
        txna ApplicationArgs 2                                                                                               reinterpret_Encoded(uint8)%3#0
        v-store reinterpret_Encoded(uint8)%3#0
        v-load reinterpret_Encoded(uint8)%3#0                                                                                reinterpret_Encoded(uint8)%3#0
        btoi                                                                                                                 tmp%45#0
        v-store tmp%45#0
        v-load tmp%45#0                                                                                                      tmp%45#0
        txnas Assets                                                                                                         tmp%46#0
        v-store tmp%46#0
        txna ApplicationArgs 3                                                                                               reinterpret_Encoded(uint64)%5#0
        v-store reinterpret_Encoded(uint64)%5#0
        v-load reinterpret_Encoded(uint64)%5#0                                                                               reinterpret_Encoded(uint64)%5#0
        btoi                                                                                                                 tmp%47#0
        v-store tmp%47#0
        txn GroupIndex                                                                                                       tmp%48#0
        v-store tmp%48#0
        v-load tmp%48#0                                                                                                      tmp%48#0
        int 1                                                                                                                tmp%48#0,1
        -                                                                                                                    gtxn_idx%4#0
        v-store gtxn_idx%4#0
        v-load gtxn_idx%4#0                                                                                                  gtxn_idx%4#0
        gtxns TypeEnum                                                                                                       gtxn_type%4#0
        v-store gtxn_type%4#0
        v-load gtxn_type%4#0                                                                                                 gtxn_type%4#0
        int pay                                                                                                              gtxn_type%4#0,pay
        ==                                                                                                                   gtxn_type_matches%4#0
        v-store gtxn_type_matches%4#0
        v-load gtxn_type_matches%4#0                                                                                         gtxn_type_matches%4#0
        assert // transaction type is pay
        txna ApplicationArgs 4                                                                                               reinterpret_Encoded(uint64)%6#0
        v-store reinterpret_Encoded(uint64)%6#0
        v-load reinterpret_Encoded(uint64)%6#0                                                                               reinterpret_Encoded(uint64)%6#0
        btoi                                                                                                                 tmp%49#0
        v-store tmp%49#0
        // marketplace_demo/marketplace_with_tups.py:151
        // @arc4.abimethod
        v-load tmp%44#0                                                                                                      tmp%44#0
        v-load tmp%46#0                                                                                                      tmp%44#0,tmp%46#0
        v-load tmp%47#0                                                                                                      tmp%44#0,tmp%46#0,tmp%47#0
        v-load gtxn_idx%4#0                                                                                                  tmp%44#0,tmp%46#0,tmp%47#0,gtxn_idx%4#0
        v-load tmp%49#0                                                                                                      tmp%44#0,tmp%46#0,tmp%47#0,gtxn_idx%4#0,tmp%49#0
        callsub buy
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_withdraw_route@11:
        // marketplace_demo/marketplace_with_tups.py:182
        // @arc4.abimethod
        txn OnCompletion                                                                                                     tmp%50#0
        v-store tmp%50#0
        v-load tmp%50#0                                                                                                      tmp%50#0
        !                                                                                                                    tmp%51#0
        v-store tmp%51#0
        v-load tmp%51#0                                                                                                      tmp%51#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%52#0
        v-store tmp%52#0
        v-load tmp%52#0                                                                                                      tmp%52#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint8)%4#0
        v-store reinterpret_Encoded(uint8)%4#0
        v-load reinterpret_Encoded(uint8)%4#0                                                                                reinterpret_Encoded(uint8)%4#0
        btoi                                                                                                                 tmp%54#0
        v-store tmp%54#0
        v-load tmp%54#0                                                                                                      tmp%54#0
        txnas Assets                                                                                                         tmp%55#0
        v-store tmp%55#0
        txna ApplicationArgs 2                                                                                               reinterpret_Encoded(uint64)%7#0
        v-store reinterpret_Encoded(uint64)%7#0
        v-load reinterpret_Encoded(uint64)%7#0                                                                               reinterpret_Encoded(uint64)%7#0
        btoi                                                                                                                 tmp%56#0
        v-store tmp%56#0
        // marketplace_demo/marketplace_with_tups.py:182
        // @arc4.abimethod
        v-load tmp%55#0                                                                                                      tmp%55#0
        v-load tmp%56#0                                                                                                      tmp%55#0,tmp%56#0
        callsub withdraw
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_bid_route@12:
        // marketplace_demo/marketplace_with_tups.py:201
        // @arc4.abimethod
        txn OnCompletion                                                                                                     tmp%57#0
        v-store tmp%57#0
        v-load tmp%57#0                                                                                                      tmp%57#0
        !                                                                                                                    tmp%58#0
        v-store tmp%58#0
        v-load tmp%58#0                                                                                                      tmp%58#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%59#0
        v-store tmp%59#0
        v-load tmp%59#0                                                                                                      tmp%59#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint8)%5#0
        v-store reinterpret_Encoded(uint8)%5#0
        v-load reinterpret_Encoded(uint8)%5#0                                                                                reinterpret_Encoded(uint8)%5#0
        btoi                                                                                                                 tmp%61#0
        v-store tmp%61#0
        v-load tmp%61#0                                                                                                      tmp%61#0
        txnas Accounts                                                                                                       tmp%62#0
        v-store tmp%62#0
        txna ApplicationArgs 2                                                                                               reinterpret_Encoded(uint8)%6#0
        v-store reinterpret_Encoded(uint8)%6#0
        v-load reinterpret_Encoded(uint8)%6#0                                                                                reinterpret_Encoded(uint8)%6#0
        btoi                                                                                                                 tmp%63#0
        v-store tmp%63#0
        v-load tmp%63#0                                                                                                      tmp%63#0
        txnas Assets                                                                                                         tmp%64#0
        v-store tmp%64#0
        txna ApplicationArgs 3                                                                                               reinterpret_Encoded(uint64)%8#0
        v-store reinterpret_Encoded(uint64)%8#0
        v-load reinterpret_Encoded(uint64)%8#0                                                                               reinterpret_Encoded(uint64)%8#0
        btoi                                                                                                                 tmp%65#0
        v-store tmp%65#0
        txn GroupIndex                                                                                                       tmp%66#0
        v-store tmp%66#0
        v-load tmp%66#0                                                                                                      tmp%66#0
        int 1                                                                                                                tmp%66#0,1
        -                                                                                                                    gtxn_idx%5#0
        v-store gtxn_idx%5#0
        v-load gtxn_idx%5#0                                                                                                  gtxn_idx%5#0
        gtxns TypeEnum                                                                                                       gtxn_type%5#0
        v-store gtxn_type%5#0
        v-load gtxn_type%5#0                                                                                                 gtxn_type%5#0
        int pay                                                                                                              gtxn_type%5#0,pay
        ==                                                                                                                   gtxn_type_matches%5#0
        v-store gtxn_type_matches%5#0
        v-load gtxn_type_matches%5#0                                                                                         gtxn_type_matches%5#0
        assert // transaction type is pay
        txna ApplicationArgs 4                                                                                               reinterpret_Encoded(uint64)%9#0
        v-store reinterpret_Encoded(uint64)%9#0
        v-load reinterpret_Encoded(uint64)%9#0                                                                               reinterpret_Encoded(uint64)%9#0
        btoi                                                                                                                 tmp%67#0
        v-store tmp%67#0
        txna ApplicationArgs 5                                                                                               reinterpret_Encoded(uint64)%10#0
        v-store reinterpret_Encoded(uint64)%10#0
        v-load reinterpret_Encoded(uint64)%10#0                                                                              reinterpret_Encoded(uint64)%10#0
        btoi                                                                                                                 tmp%68#0
        v-store tmp%68#0
        // marketplace_demo/marketplace_with_tups.py:201
        // @arc4.abimethod
        v-load tmp%62#0                                                                                                      tmp%62#0
        v-load tmp%64#0                                                                                                      tmp%62#0,tmp%64#0
        v-load tmp%65#0                                                                                                      tmp%62#0,tmp%64#0,tmp%65#0
        v-load gtxn_idx%5#0                                                                                                  tmp%62#0,tmp%64#0,tmp%65#0,gtxn_idx%5#0
        v-load tmp%67#0                                                                                                      tmp%62#0,tmp%64#0,tmp%65#0,gtxn_idx%5#0,tmp%67#0
        v-load tmp%68#0                                                                                                      tmp%62#0,tmp%64#0,tmp%65#0,gtxn_idx%5#0,tmp%67#0,tmp%68#0
        callsub bid
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_acceptBid_route@13:
        // marketplace_demo/marketplace_with_tups.py:237
        // @arc4.abimethod(name="acceptBid")
        txn OnCompletion                                                                                                     tmp%69#0
        v-store tmp%69#0
        v-load tmp%69#0                                                                                                      tmp%69#0
        !                                                                                                                    tmp%70#0
        v-store tmp%70#0
        v-load tmp%70#0                                                                                                      tmp%70#0
        assert // OnCompletion is not NoOp
        txn ApplicationID                                                                                                    tmp%71#0
        v-store tmp%71#0
        v-load tmp%71#0                                                                                                      tmp%71#0
        assert // can only call when not creating
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txna ApplicationArgs 1                                                                                               reinterpret_Encoded(uint8)%7#0
        v-store reinterpret_Encoded(uint8)%7#0
        v-load reinterpret_Encoded(uint8)%7#0                                                                                reinterpret_Encoded(uint8)%7#0
        btoi                                                                                                                 tmp%73#0
        v-store tmp%73#0
        v-load tmp%73#0                                                                                                      tmp%73#0
        txnas Assets                                                                                                         tmp%74#0
        v-store tmp%74#0
        txna ApplicationArgs 2                                                                                               reinterpret_Encoded(uint64)%11#0
        v-store reinterpret_Encoded(uint64)%11#0
        v-load reinterpret_Encoded(uint64)%11#0                                                                              reinterpret_Encoded(uint64)%11#0
        btoi                                                                                                                 tmp%75#0
        v-store tmp%75#0
        // marketplace_demo/marketplace_with_tups.py:237
        // @arc4.abimethod(name="acceptBid")
        v-load tmp%74#0                                                                                                      tmp%74#0
        v-load tmp%75#0                                                                                                      tmp%74#0,tmp%75#0
        callsub accept_bid
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_bare_routing@14:
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        txn OnCompletion                                                                                                     tmp%76#0
        v-store tmp%76#0
        v-load tmp%76#0                                                                                                      tmp%76#0
        bz main___algopy_default_create@15 ; b main_after_if_else@16

    main___algopy_default_create@15:
        txn ApplicationID                                                                                                    tmp%77#0
        v-store tmp%77#0
        v-load tmp%77#0                                                                                                      tmp%77#0
        !                                                                                                                    tmp%78#0
        v-store tmp%78#0
        v-load tmp%78#0                                                                                                      tmp%78#0
        assert // can only call when creating
        int 1                                                                                                                1
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_after_if_else@16:
        // marketplace_demo/marketplace_with_tups.py:38
        // class DigitalMarketplaceWithTups(arc4.ARC4Contract):
        int 0                                                                                                                0
        v-store test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 
        v-load test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0 test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__%0#0
        v-store tmp%0#0
        b main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17 

    main_after_inlined_test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.__puya_arc4_router__@17:
        v-load tmp%0#0                                                                                                       tmp%0#0
        return


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.allow_asset(mbr_pay: uint64, asset: uint64) -> void:
subroutine allow_asset:
    allow_asset_block@0:                                                                                                     () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:85
        // assert not Global.current_application_address.is_opted_in(asset)
        global CurrentApplicationAddress                                                                                     () mbr_pay#0,asset#0 | tmp%0#0
        v-store tmp%0#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%0#0                                                                                                       () mbr_pay#0,asset#0 | tmp%0#0
        p-load asset#0                                                                                                       () mbr_pay#0,asset#0 | tmp%0#0,asset#0 (copy)
        asset_holding_get AssetBalance                                                                                       () mbr_pay#0,asset#0 | tmp%1#0,tmp%2#0
        v-store tmp%2#0                                                                                                      () mbr_pay#0,asset#0 | tmp%1#0
        v-store tmp%1#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%2#0                                                                                                       () mbr_pay#0,asset#0 | tmp%2#0
        !                                                                                                                    () mbr_pay#0,asset#0 | tmp%3#0
        v-store tmp%3#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%3#0                                                                                                       () mbr_pay#0,asset#0 | tmp%3#0
        assert                                                                                                               () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:87
        // assert mbr_pay.receiver == Global.current_application_address
        p-load mbr_pay#0                                                                                                     () mbr_pay#0,asset#0 | mbr_pay#0 (copy)
        gtxns Receiver                                                                                                       () mbr_pay#0,asset#0 | tmp%4#0
        v-store tmp%4#0                                                                                                      () mbr_pay#0,asset#0 |
        global CurrentApplicationAddress                                                                                     () mbr_pay#0,asset#0 | tmp%5#0
        v-store tmp%5#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%4#0                                                                                                       () mbr_pay#0,asset#0 | tmp%4#0
        v-load tmp%5#0                                                                                                       () mbr_pay#0,asset#0 | tmp%4#0,tmp%5#0
        ==                                                                                                                   () mbr_pay#0,asset#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%6#0                                                                                                       () mbr_pay#0,asset#0 | tmp%6#0
        assert                                                                                                               () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:88
        // assert mbr_pay.amount == Global.asset_opt_in_min_balance
        p-load mbr_pay#0                                                                                                     () mbr_pay#0,asset#0 | mbr_pay#0 (copy)
        gtxns Amount                                                                                                         () mbr_pay#0,asset#0 | tmp%7#0
        v-store tmp%7#0                                                                                                      () mbr_pay#0,asset#0 |
        global AssetOptInMinBalance                                                                                          () mbr_pay#0,asset#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%7#0                                                                                                       () mbr_pay#0,asset#0 | tmp%7#0
        v-load tmp%8#0                                                                                                       () mbr_pay#0,asset#0 | tmp%7#0,tmp%8#0
        ==                                                                                                                   () mbr_pay#0,asset#0 | tmp%9#0
        v-store tmp%9#0                                                                                                      () mbr_pay#0,asset#0 |
        v-load tmp%9#0                                                                                                       () mbr_pay#0,asset#0 | tmp%9#0
        assert                                                                                                               () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:90-92
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=Global.current_application_address, asset_amount=0
        // ).submit()
        itxn_begin                                                                                                           () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:91
        // xfer_asset=asset, asset_receiver=Global.current_application_address, asset_amount=0
        global CurrentApplicationAddress                                                                                     () mbr_pay#0,asset#0 | inner_txn_params%0%%param_AssetReceiver_idx_0#0
        v-store inner_txn_params%0%%param_AssetReceiver_idx_0#0                                                              () mbr_pay#0,asset#0 |
        int 0                                                                                                                () mbr_pay#0,asset#0 | 0
        itxn_field AssetAmount                                                                                               () mbr_pay#0,asset#0 |
        v-load inner_txn_params%0%%param_AssetReceiver_idx_0#0                                                               () mbr_pay#0,asset#0 | inner_txn_params%0%%param_AssetReceiver_idx_0#0
        itxn_field AssetReceiver                                                                                             () mbr_pay#0,asset#0 |
        p-load asset#0                                                                                                       () mbr_pay#0,asset#0 | asset#0 (copy)
        itxn_field XferAsset                                                                                                 () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:90
        // itxn.AssetTransfer(
        int axfer                                                                                                            () mbr_pay#0,asset#0 | axfer
        itxn_field TypeEnum                                                                                                  () mbr_pay#0,asset#0 |
        int 0                                                                                                                () mbr_pay#0,asset#0 | 0
        itxn_field Fee                                                                                                       () mbr_pay#0,asset#0 |
        // marketplace_demo/marketplace_with_tups.py:90-92
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=Global.current_application_address, asset_amount=0
        // ).submit()
        itxn_submit                                                                                                          () mbr_pay#0,asset#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.first_deposit(mbr_pay: uint64, xfer: uint64, unitary_price: uint64, nonce: uint64) -> void:
subroutine first_deposit:
    first_deposit_block@0:                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:102
        // assert mbr_pay.sender == Txn.sender
        p-load mbr_pay#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | mbr_pay#0 (copy)
        gtxns Sender                                                                                                         () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%0#0
        v-store tmp%0#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        txn Sender                                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%1#0
        v-store tmp%1#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%0#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%0#0
        v-load tmp%1#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%0#0,tmp%1#0
        ==                                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%2#0
        v-store tmp%2#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%2#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%2#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:103
        // assert mbr_pay.receiver == Global.current_application_address
        p-load mbr_pay#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | mbr_pay#0 (copy)
        gtxns Receiver                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%3#0
        v-store tmp%3#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        global CurrentApplicationAddress                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%4#0
        v-store tmp%4#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%3#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%3#0
        v-load tmp%4#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%3#0,tmp%4#0
        ==                                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%5#0
        v-store tmp%5#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%5#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%5#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:104
        // assert mbr_pay.amount == self.listings_box_mbr()
        p-load mbr_pay#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | mbr_pay#0 (copy)
        gtxns Amount                                                                                                         () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%6#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%6#0
        // marketplace_demo/marketplace_with_tups.py:45-66
        // return UInt64(
        //     2_500
        //     +
        //     # fmt: off
        //     # Key length
        //     (
        //         8
        //         + 32
        //         + 8
        //         + 8
        //         +
        //         # Value length
        //         8
        //         + 8
        //         + 32
        //         + 8
        //         + 8
        //     )
        //     *
        //     # fmt: on
        //     400
        // )
        int 50500                                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%6#0,50500
        // marketplace_demo/marketplace_with_tups.py:104
        // assert mbr_pay.amount == self.listings_box_mbr()
        ==                                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%8#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%8#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:106
        // key = ListingKey(owner=Txn.sender, asset=xfer.xfer_asset.id, nonce=nonce)
        txn Sender                                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | key.owner#0
        v-store key.owner#0                                                                                                  () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        p-load xfer#0                                                                                                        () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | xfer#0 (copy)
        gtxns XferAsset                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | key.asset#0
        v-store key.asset#0                                                                                                  () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:107
        // assert key not in self.listings
        v-load key.asset#0                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | key.asset#0
        itob                                                                                                                 () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load key.owner#0                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | key.owner#0
        v-load aggregate%val_as_bytes%0#0                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | key.owner#0,aggregate%val_as_bytes%0#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        p-load nonce#0                                                                                                       () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | nonce#0 (copy)
        itob                                                                                                                 () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load aggregate%head%1#0                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        byte 0x6c697374696e6773                                                                                              () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load box_prefixed_key%0#0                                                                                          () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | box_prefixed_key%0#0
        box_len                                                                                                              () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | _%0#0,maybe_exists%0#0
        v-store maybe_exists%0#0                                                                                             () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | _%0#0
        v-store _%0#0                                                                                                        () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load maybe_exists%0#0                                                                                              () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | maybe_exists%0#0
        !                                                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%11#0
        v-store tmp%11#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%11#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%11#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:109
        // assert xfer.sender == Txn.sender
        p-load xfer#0                                                                                                        () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | xfer#0 (copy)
        gtxns Sender                                                                                                         () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%12#0
        v-store tmp%12#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        txn Sender                                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%13#0
        v-store tmp%13#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%12#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%12#0
        v-load tmp%13#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%12#0,tmp%13#0
        ==                                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%14#0
        v-store tmp%14#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%14#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%14#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:110
        // assert xfer.asset_receiver == Global.current_application_address
        p-load xfer#0                                                                                                        () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | xfer#0 (copy)
        gtxns AssetReceiver                                                                                                  () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%15#0
        v-store tmp%15#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        global CurrentApplicationAddress                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%16#0
        v-store tmp%16#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%15#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%15#0
        v-load tmp%16#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%15#0,tmp%16#0
        ==                                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%17#0
        v-store tmp%17#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%17#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%17#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:111
        // assert xfer.asset_amount > 0
        p-load xfer#0                                                                                                        () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | xfer#0 (copy)
        gtxns AssetAmount                                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%18#0
        v-store tmp%18#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load tmp%18#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%18#0
        assert                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:116
        // bidder=Account(),
        global ZeroAddress                                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%21#0
        v-store tmp%21#0                                                                                                     () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:113
        // self.listings[key] = ListingValue(
        v-load tmp%18#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | tmp%18#0
        itob                                                                                                                 () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%2#0
        v-store aggregate%val_as_bytes%2#0                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        p-load unitary_price#0                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | unitary_price#0 (copy)
        itob                                                                                                                 () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%3#0
        v-store aggregate%val_as_bytes%3#0                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load aggregate%val_as_bytes%2#0                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%2#0
        v-load aggregate%val_as_bytes%3#0                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%2#0,aggregate%val_as_bytes%3#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%4#0
        v-store aggregate%head%4#0                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load aggregate%head%4#0                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%4#0
        v-load tmp%21#0                                                                                                      () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%4#0,tmp%21#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%5#0
        v-store aggregate%head%5#0                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:117
        // bid=UInt64(),
        int 0                                                                                                                () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | 0
        // marketplace_demo/marketplace_with_tups.py:113
        // self.listings[key] = ListingValue(
        itob                                                                                                                 () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%val_as_bytes%4#0
        v-store aggregate%val_as_bytes%4#0                                                                                   () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load aggregate%head%5#0                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%5#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%5#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%6#0
        v-store aggregate%head%6#0                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        v-load aggregate%head%6#0                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%6#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%6#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | aggregate%head%7#0
        v-store aggregate%head%7#0                                                                                           () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:113-119
        // self.listings[key] = ListingValue(
        //     deposited=xfer.asset_amount,
        //     unitaryPrice=unitary_price,
        //     bidder=Account(),
        //     bid=UInt64(),
        //     bidUnitaryPrice=UInt64(),
        // )
        v-load box_prefixed_key%0#0                                                                                          () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | box_prefixed_key%0#0
        v-load aggregate%head%7#0                                                                                            () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 | box_prefixed_key%0#0,aggregate%head%7#0
        box_put                                                                                                              () mbr_pay#0,xfer#0,unitary_price#0,nonce#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.deposit(xfer: uint64, nonce: uint64) -> void:
subroutine deposit:
    deposit_block@0:                                                                                                         () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:123
        // key = ListingKey(owner=Txn.sender, asset=xfer.xfer_asset.id, nonce=nonce)
        txn Sender                                                                                                           () xfer#0,nonce#0 | key.owner#0
        v-store key.owner#0                                                                                                  () xfer#0,nonce#0 |
        p-load xfer#0                                                                                                        () xfer#0,nonce#0 | xfer#0 (copy)
        gtxns XferAsset                                                                                                      () xfer#0,nonce#0 | key.asset#0
        v-store key.asset#0                                                                                                  () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:125
        // assert xfer.sender == Txn.sender
        p-load xfer#0                                                                                                        () xfer#0,nonce#0 | xfer#0 (copy)
        gtxns Sender                                                                                                         () xfer#0,nonce#0 | tmp%2#0
        v-store tmp%2#0                                                                                                      () xfer#0,nonce#0 |
        txn Sender                                                                                                           () xfer#0,nonce#0 | tmp%3#0
        v-store tmp%3#0                                                                                                      () xfer#0,nonce#0 |
        v-load tmp%2#0                                                                                                       () xfer#0,nonce#0 | tmp%2#0
        v-load tmp%3#0                                                                                                       () xfer#0,nonce#0 | tmp%2#0,tmp%3#0
        ==                                                                                                                   () xfer#0,nonce#0 | tmp%4#0
        v-store tmp%4#0                                                                                                      () xfer#0,nonce#0 |
        v-load tmp%4#0                                                                                                       () xfer#0,nonce#0 | tmp%4#0
        assert                                                                                                               () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:126
        // assert xfer.asset_receiver == Global.current_application_address
        p-load xfer#0                                                                                                        () xfer#0,nonce#0 | xfer#0 (copy)
        gtxns AssetReceiver                                                                                                  () xfer#0,nonce#0 | tmp%5#0
        v-store tmp%5#0                                                                                                      () xfer#0,nonce#0 |
        global CurrentApplicationAddress                                                                                     () xfer#0,nonce#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () xfer#0,nonce#0 |
        v-load tmp%5#0                                                                                                       () xfer#0,nonce#0 | tmp%5#0
        v-load tmp%6#0                                                                                                       () xfer#0,nonce#0 | tmp%5#0,tmp%6#0
        ==                                                                                                                   () xfer#0,nonce#0 | tmp%7#0
        v-store tmp%7#0                                                                                                      () xfer#0,nonce#0 |
        v-load tmp%7#0                                                                                                       () xfer#0,nonce#0 | tmp%7#0
        assert                                                                                                               () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:127
        // assert xfer.asset_amount > 0
        p-load xfer#0                                                                                                        () xfer#0,nonce#0 | xfer#0 (copy)
        gtxns AssetAmount                                                                                                    () xfer#0,nonce#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () xfer#0,nonce#0 |
        v-load tmp%8#0                                                                                                       () xfer#0,nonce#0 | tmp%8#0
        assert                                                                                                               () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:129
        // existing = self.listings[key]
        v-load key.asset#0                                                                                                   () xfer#0,nonce#0 | key.asset#0
        itob                                                                                                                 () xfer#0,nonce#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () xfer#0,nonce#0 |
        v-load key.owner#0                                                                                                   () xfer#0,nonce#0 | key.owner#0
        v-load aggregate%val_as_bytes%0#0                                                                                    () xfer#0,nonce#0 | key.owner#0,aggregate%val_as_bytes%0#0
        concat                                                                                                               () xfer#0,nonce#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () xfer#0,nonce#0 |
        p-load nonce#0                                                                                                       () xfer#0,nonce#0 | nonce#0 (copy)
        itob                                                                                                                 () xfer#0,nonce#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () xfer#0,nonce#0 |
        v-load aggregate%head%1#0                                                                                            () xfer#0,nonce#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () xfer#0,nonce#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () xfer#0,nonce#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () xfer#0,nonce#0 |
        byte 0x6c697374696e6773                                                                                              () xfer#0,nonce#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () xfer#0,nonce#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () xfer#0,nonce#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () xfer#0,nonce#0 |
        v-load box_prefixed_key%0#0                                                                                          () xfer#0,nonce#0 | box_prefixed_key%0#0
        box_get                                                                                                              () xfer#0,nonce#0 | aggregate%box_get%0#0,aggregate%box_get%1#0
        v-store aggregate%box_get%1#0                                                                                        () xfer#0,nonce#0 | aggregate%box_get%0#0
        v-store aggregate%box_get%0#0                                                                                        () xfer#0,nonce#0 |
        v-load aggregate%box_get%1#0                                                                                         () xfer#0,nonce#0 | aggregate%box_get%1#0
        assert // check self.listings entry exists                                                                           () xfer#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () xfer#0,nonce#0 | aggregate%box_get%0#0
        int 0                                                                                                                () xfer#0,nonce#0 | aggregate%box_get%0#0,0
        extract_uint64                                                                                                       () xfer#0,nonce#0 | existing.deposited#0
        v-store existing.deposited#0                                                                                         () xfer#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () xfer#0,nonce#0 | aggregate%box_get%0#0
        int 8                                                                                                                () xfer#0,nonce#0 | aggregate%box_get%0#0,8
        extract_uint64                                                                                                       () xfer#0,nonce#0 | existing.unitaryPrice#0
        v-store existing.unitaryPrice#0                                                                                      () xfer#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () xfer#0,nonce#0 | aggregate%box_get%0#0
        extract 16 32                                                                                                        () xfer#0,nonce#0 | existing.bidder#0
        v-store existing.bidder#0                                                                                            () xfer#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () xfer#0,nonce#0 | aggregate%box_get%0#0
        int 48                                                                                                               () xfer#0,nonce#0 | aggregate%box_get%0#0,48
        extract_uint64                                                                                                       () xfer#0,nonce#0 | existing.bid#0
        v-store existing.bid#0                                                                                               () xfer#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () xfer#0,nonce#0 | aggregate%box_get%0#0
        int 56                                                                                                               () xfer#0,nonce#0 | aggregate%box_get%0#0,56
        extract_uint64                                                                                                       () xfer#0,nonce#0 | existing.bidUnitaryPrice#0
        v-store existing.bidUnitaryPrice#0                                                                                   () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:135
        // deposited=existing.deposited + xfer.asset_amount,
        v-load existing.deposited#0                                                                                          () xfer#0,nonce#0 | existing.deposited#0
        v-load tmp%8#0                                                                                                       () xfer#0,nonce#0 | existing.deposited#0,tmp%8#0
        +                                                                                                                    () xfer#0,nonce#0 | tmp%16#0
        v-store tmp%16#0                                                                                                     () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:130
        // self.listings[key] = ListingValue(
        v-load tmp%16#0                                                                                                      () xfer#0,nonce#0 | tmp%16#0
        itob                                                                                                                 () xfer#0,nonce#0 | aggregate%val_as_bytes%2#0
        v-store aggregate%val_as_bytes%2#0                                                                                   () xfer#0,nonce#0 |
        v-load existing.unitaryPrice#0                                                                                       () xfer#0,nonce#0 | existing.unitaryPrice#0
        itob                                                                                                                 () xfer#0,nonce#0 | aggregate%val_as_bytes%3#0
        v-store aggregate%val_as_bytes%3#0                                                                                   () xfer#0,nonce#0 |
        v-load aggregate%val_as_bytes%2#0                                                                                    () xfer#0,nonce#0 | aggregate%val_as_bytes%2#0
        v-load aggregate%val_as_bytes%3#0                                                                                    () xfer#0,nonce#0 | aggregate%val_as_bytes%2#0,aggregate%val_as_bytes%3#0
        concat                                                                                                               () xfer#0,nonce#0 | aggregate%head%4#0
        v-store aggregate%head%4#0                                                                                           () xfer#0,nonce#0 |
        v-load aggregate%head%4#0                                                                                            () xfer#0,nonce#0 | aggregate%head%4#0
        v-load existing.bidder#0                                                                                             () xfer#0,nonce#0 | aggregate%head%4#0,existing.bidder#0
        concat                                                                                                               () xfer#0,nonce#0 | aggregate%head%5#0
        v-store aggregate%head%5#0                                                                                           () xfer#0,nonce#0 |
        v-load existing.bid#0                                                                                                () xfer#0,nonce#0 | existing.bid#0
        itob                                                                                                                 () xfer#0,nonce#0 | aggregate%val_as_bytes%4#0
        v-store aggregate%val_as_bytes%4#0                                                                                   () xfer#0,nonce#0 |
        v-load aggregate%head%5#0                                                                                            () xfer#0,nonce#0 | aggregate%head%5#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () xfer#0,nonce#0 | aggregate%head%5#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () xfer#0,nonce#0 | aggregate%head%6#0
        v-store aggregate%head%6#0                                                                                           () xfer#0,nonce#0 |
        v-load existing.bidUnitaryPrice#0                                                                                    () xfer#0,nonce#0 | existing.bidUnitaryPrice#0
        itob                                                                                                                 () xfer#0,nonce#0 | aggregate%val_as_bytes%5#0
        v-store aggregate%val_as_bytes%5#0                                                                                   () xfer#0,nonce#0 |
        v-load aggregate%head%6#0                                                                                            () xfer#0,nonce#0 | aggregate%head%6#0
        v-load aggregate%val_as_bytes%5#0                                                                                    () xfer#0,nonce#0 | aggregate%head%6#0,aggregate%val_as_bytes%5#0
        concat                                                                                                               () xfer#0,nonce#0 | aggregate%head%7#0
        v-store aggregate%head%7#0                                                                                           () xfer#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:130-136
        // self.listings[key] = ListingValue(
        //     bid=existing.bid,
        //     bidUnitaryPrice=existing.bidUnitaryPrice,
        //     bidder=existing.bidder,
        //     unitaryPrice=existing.unitaryPrice,
        //     deposited=existing.deposited + xfer.asset_amount,
        // )
        v-load box_prefixed_key%0#0                                                                                          () xfer#0,nonce#0 | box_prefixed_key%0#0
        v-load aggregate%head%7#0                                                                                            () xfer#0,nonce#0 | box_prefixed_key%0#0,aggregate%head%7#0
        box_put                                                                                                              () xfer#0,nonce#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.set_price(asset: uint64, nonce: uint64, unitary_price: uint64) -> void:
subroutine set_price:
    set_price_block@0:                                                                                                       () asset#0,nonce#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:140
        // key = ListingKey(owner=Txn.sender, asset=asset.id, nonce=nonce)
        txn Sender                                                                                                           () asset#0,nonce#0,unitary_price#0 | key.owner#0
        v-store key.owner#0                                                                                                  () asset#0,nonce#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:142
        // existing = self.listings[key]
        p-load asset#0                                                                                                       () asset#0,nonce#0,unitary_price#0 | asset#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        v-load key.owner#0                                                                                                   () asset#0,nonce#0,unitary_price#0 | key.owner#0
        v-load aggregate%val_as_bytes%0#0                                                                                    () asset#0,nonce#0,unitary_price#0 | key.owner#0,aggregate%val_as_bytes%0#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () asset#0,nonce#0,unitary_price#0 |
        p-load nonce#0                                                                                                       () asset#0,nonce#0,unitary_price#0 | nonce#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%head%1#0                                                                                            () asset#0,nonce#0,unitary_price#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () asset#0,nonce#0,unitary_price#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () asset#0,nonce#0,unitary_price#0 |
        byte 0x6c697374696e6773                                                                                              () asset#0,nonce#0,unitary_price#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () asset#0,nonce#0,unitary_price#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () asset#0,nonce#0,unitary_price#0 |
        v-load box_prefixed_key%0#0                                                                                          () asset#0,nonce#0,unitary_price#0 | box_prefixed_key%0#0
        box_get                                                                                                              () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0,aggregate%box_get%1#0
        v-store aggregate%box_get%1#0                                                                                        () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0
        v-store aggregate%box_get%0#0                                                                                        () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%box_get%1#0                                                                                         () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%1#0
        assert // check self.listings entry exists                                                                           () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0
        int 0                                                                                                                () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0,0
        extract_uint64                                                                                                       () asset#0,nonce#0,unitary_price#0 | existing.deposited#0
        v-store existing.deposited#0                                                                                         () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0
        extract 16 32                                                                                                        () asset#0,nonce#0,unitary_price#0 | existing.bidder#0
        v-store existing.bidder#0                                                                                            () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0
        int 48                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0,48
        extract_uint64                                                                                                       () asset#0,nonce#0,unitary_price#0 | existing.bid#0
        v-store existing.bid#0                                                                                               () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0
        int 56                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%box_get%0#0,56
        extract_uint64                                                                                                       () asset#0,nonce#0,unitary_price#0 | existing.bidUnitaryPrice#0
        v-store existing.bidUnitaryPrice#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:143
        // self.listings[key] = ListingValue(
        v-load existing.deposited#0                                                                                          () asset#0,nonce#0,unitary_price#0 | existing.deposited#0
        itob                                                                                                                 () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%2#0
        v-store aggregate%val_as_bytes%2#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        p-load unitary_price#0                                                                                               () asset#0,nonce#0,unitary_price#0 | unitary_price#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%3#0
        v-store aggregate%val_as_bytes%3#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%val_as_bytes%2#0                                                                                    () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%2#0
        v-load aggregate%val_as_bytes%3#0                                                                                    () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%2#0,aggregate%val_as_bytes%3#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%head%4#0
        v-store aggregate%head%4#0                                                                                           () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%head%4#0                                                                                            () asset#0,nonce#0,unitary_price#0 | aggregate%head%4#0
        v-load existing.bidder#0                                                                                             () asset#0,nonce#0,unitary_price#0 | aggregate%head%4#0,existing.bidder#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%head%5#0
        v-store aggregate%head%5#0                                                                                           () asset#0,nonce#0,unitary_price#0 |
        v-load existing.bid#0                                                                                                () asset#0,nonce#0,unitary_price#0 | existing.bid#0
        itob                                                                                                                 () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%4#0
        v-store aggregate%val_as_bytes%4#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%head%5#0                                                                                            () asset#0,nonce#0,unitary_price#0 | aggregate%head%5#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () asset#0,nonce#0,unitary_price#0 | aggregate%head%5#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%head%6#0
        v-store aggregate%head%6#0                                                                                           () asset#0,nonce#0,unitary_price#0 |
        v-load existing.bidUnitaryPrice#0                                                                                    () asset#0,nonce#0,unitary_price#0 | existing.bidUnitaryPrice#0
        itob                                                                                                                 () asset#0,nonce#0,unitary_price#0 | aggregate%val_as_bytes%5#0
        v-store aggregate%val_as_bytes%5#0                                                                                   () asset#0,nonce#0,unitary_price#0 |
        v-load aggregate%head%6#0                                                                                            () asset#0,nonce#0,unitary_price#0 | aggregate%head%6#0
        v-load aggregate%val_as_bytes%5#0                                                                                    () asset#0,nonce#0,unitary_price#0 | aggregate%head%6#0,aggregate%val_as_bytes%5#0
        concat                                                                                                               () asset#0,nonce#0,unitary_price#0 | aggregate%head%7#0
        v-store aggregate%head%7#0                                                                                           () asset#0,nonce#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:143-149
        // self.listings[key] = ListingValue(
        //     bid=existing.bid,
        //     bidUnitaryPrice=existing.bidUnitaryPrice,
        //     bidder=existing.bidder,
        //     deposited=existing.deposited,
        //     unitaryPrice=unitary_price,
        // )
        v-load box_prefixed_key%0#0                                                                                          () asset#0,nonce#0,unitary_price#0 | box_prefixed_key%0#0
        v-load aggregate%head%7#0                                                                                            () asset#0,nonce#0,unitary_price#0 | box_prefixed_key%0#0,aggregate%head%7#0
        box_put                                                                                                              () asset#0,nonce#0,unitary_price#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.buy(owner: bytes, asset: uint64, nonce: uint64, buy_pay: uint64, quantity: uint64) -> void:
subroutine buy:
    buy_block@0:                                                                                                             () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:162
        // listing = self.listings[key]
        p-load asset#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | asset#0 (copy)
        itob                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        p-load owner#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | owner#0 (copy)
        v-load aggregate%val_as_bytes%0#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | owner#0 (copy),aggregate%val_as_bytes%0#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        p-load nonce#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | nonce#0 (copy)
        itob                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%head%1#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        byte 0x6c697374696e6773                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load box_prefixed_key%0#0                                                                                          () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | box_prefixed_key%0#0
        box_get                                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0,aggregate%box_get%1#0
        v-store aggregate%box_get%1#0                                                                                        () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0
        v-store aggregate%box_get%0#0                                                                                        () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%box_get%1#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%1#0
        assert // check self.listings entry exists                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0
        int 0                                                                                                                () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0,0
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.deposited#0
        v-store listing.deposited#0                                                                                          () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0
        int 8                                                                                                                () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0,8
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.unitaryPrice#0
        v-store listing.unitaryPrice#0                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0
        extract 16 32                                                                                                        () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.bidder#0
        v-store listing.bidder#0                                                                                             () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0
        int 48                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0,48
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.bid#0
        v-store listing.bid#0                                                                                                () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0
        int 56                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%box_get%0#0,56
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.bidUnitaryPrice#0
        v-store listing.bidUnitaryPrice#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:164
        // amount_to_be_paid = self.quantity_price(quantity, listing.unitaryPrice, asset.decimals)
        p-load asset#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | asset#0 (copy)
        asset_params_get AssetDecimals                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | asset_decimals#0,check%0#0
        v-store check%0#0                                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | asset_decimals#0
        v-store asset_decimals#0                                                                                             () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load check%0#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | check%0#0
        assert // asset exists                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:70
        // amount_not_scaled_high, amount_not_scaled_low = op.mulw(price, quantity)
        v-load listing.unitaryPrice#0                                                                                        () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.unitaryPrice#0
        p-load quantity#0                                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.unitaryPrice#0,quantity#0 (copy)
        mulw                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-store amount_not_scaled_low#0                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | amount_not_scaled_high#0
        v-store amount_not_scaled_high#0                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:71
        // scaling_factor_high, scaling_factor_low = op.expw(10, asset_decimals)
        int 10                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | 10
        v-load asset_decimals#0                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | 10,asset_decimals#0
        expw                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | scaling_factor_high#0,scaling_factor_low#0
        v-store scaling_factor_low#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | scaling_factor_high#0
        v-store scaling_factor_high#0                                                                                        () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:72-74
        // _quotient_high, amount_to_be_paid, _remainder_high, _remainder_low = op.divmodw(
        //     amount_not_scaled_high, amount_not_scaled_low, scaling_factor_high, scaling_factor_low
        // )
        v-load amount_not_scaled_high#0                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | amount_not_scaled_high#0
        v-load amount_not_scaled_low#0                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-load scaling_factor_high#0                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0
        v-load scaling_factor_low#0                                                                                          () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0,scaling_factor_low#0
        divmodw                                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | _quotient_high#0,amount_to_be_paid#1,_remainder_high#0,_remainder_low#0
        v-store _remainder_low#0                                                                                             () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | _quotient_high#0,amount_to_be_paid#1,_remainder_high#0
        v-store _remainder_high#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | _quotient_high#0,amount_to_be_paid#1
        v-store amount_to_be_paid#1                                                                                          () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | _quotient_high#0
        v-store _quotient_high#0                                                                                             () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:75
        // assert _quotient_high == 0
        v-load _quotient_high#0                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | _quotient_high#0
        !                                                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%8#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%8#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:166
        // assert buy_pay.sender == Txn.sender
        p-load buy_pay#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | buy_pay#0 (copy)
        gtxns Sender                                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        txn Sender                                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%7#0
        v-store tmp%7#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%6#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%6#0
        v-load tmp%7#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%6#0,tmp%7#0
        ==                                                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%8#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%8#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:167
        // assert buy_pay.receiver == owner
        p-load buy_pay#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | buy_pay#0 (copy)
        gtxns Receiver                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%9#0
        v-store tmp%9#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%9#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%9#0
        p-load owner#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%9#0,owner#0 (copy)
        ==                                                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%10#0
        v-store tmp%10#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%10#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%10#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:168
        // assert buy_pay.amount == amount_to_be_paid
        p-load buy_pay#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | buy_pay#0 (copy)
        gtxns Amount                                                                                                         () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%11#0
        v-store tmp%11#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%11#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%11#0
        v-load amount_to_be_paid#1                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%11#0,amount_to_be_paid#1
        ==                                                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%12#0
        v-store tmp%12#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load tmp%12#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%12#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:175
        // deposited=listing.deposited - quantity,
        v-load listing.deposited#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.deposited#0
        p-load quantity#0                                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.deposited#0,quantity#0 (copy)
        -                                                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%13#0
        v-store tmp%13#0                                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:170
        // self.listings[key] = ListingValue(
        v-load tmp%13#0                                                                                                      () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | tmp%13#0
        itob                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%2#0
        v-store aggregate%val_as_bytes%2#0                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load listing.unitaryPrice#0                                                                                        () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.unitaryPrice#0
        itob                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%3#0
        v-store aggregate%val_as_bytes%3#0                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%val_as_bytes%2#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%2#0
        v-load aggregate%val_as_bytes%3#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%2#0,aggregate%val_as_bytes%3#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%4#0
        v-store aggregate%head%4#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%head%4#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%4#0
        v-load listing.bidder#0                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%4#0,listing.bidder#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%5#0
        v-store aggregate%head%5#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load listing.bid#0                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.bid#0
        itob                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%4#0
        v-store aggregate%val_as_bytes%4#0                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%head%5#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%5#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%5#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%6#0
        v-store aggregate%head%6#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load listing.bidUnitaryPrice#0                                                                                     () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | listing.bidUnitaryPrice#0
        itob                                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%val_as_bytes%5#0
        v-store aggregate%val_as_bytes%5#0                                                                                   () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load aggregate%head%6#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%6#0
        v-load aggregate%val_as_bytes%5#0                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%6#0,aggregate%val_as_bytes%5#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | aggregate%head%7#0
        v-store aggregate%head%7#0                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:170-176
        // self.listings[key] = ListingValue(
        //     bid=listing.bid,
        //     bidUnitaryPrice=listing.bidUnitaryPrice,
        //     bidder=listing.bidder,
        //     unitaryPrice=listing.unitaryPrice,
        //     deposited=listing.deposited - quantity,
        // )
        v-load box_prefixed_key%0#0                                                                                          () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | box_prefixed_key%0#0
        v-load aggregate%head%7#0                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | box_prefixed_key%0#0,aggregate%head%7#0
        box_put                                                                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:178-180
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=Txn.sender, asset_amount=quantity
        // ).submit()
        itxn_begin                                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:179
        // xfer_asset=asset, asset_receiver=Txn.sender, asset_amount=quantity
        txn Sender                                                                                                           () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | inner_txn_params%0%%param_AssetReceiver_idx_0#0
        v-store inner_txn_params%0%%param_AssetReceiver_idx_0#0                                                              () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        p-load quantity#0                                                                                                    () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | quantity#0 (copy)
        itxn_field AssetAmount                                                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        v-load inner_txn_params%0%%param_AssetReceiver_idx_0#0                                                               () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | inner_txn_params%0%%param_AssetReceiver_idx_0#0
        itxn_field AssetReceiver                                                                                             () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        p-load asset#0                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | asset#0 (copy)
        itxn_field XferAsset                                                                                                 () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:178
        // itxn.AssetTransfer(
        int axfer                                                                                                            () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | axfer
        itxn_field TypeEnum                                                                                                  () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        int 0                                                                                                                () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 | 0
        itxn_field Fee                                                                                                       () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        // marketplace_demo/marketplace_with_tups.py:178-180
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=Txn.sender, asset_amount=quantity
        // ).submit()
        itxn_submit                                                                                                          () owner#0,asset#0,nonce#0,buy_pay#0,quantity#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.withdraw(asset: uint64, nonce: uint64) -> void:
subroutine withdraw:
    withdraw_block@0:                                                                                                        () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:184
        // key = ListingKey(owner=Txn.sender, asset=asset.id, nonce=nonce)
        txn Sender                                                                                                           () asset#0,nonce#0 | key.owner#0
        v-store key.owner#0                                                                                                  () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:186
        // listing = self.listings[key]
        p-load asset#0                                                                                                       () asset#0,nonce#0 | asset#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () asset#0,nonce#0 |
        v-load key.owner#0                                                                                                   () asset#0,nonce#0 | key.owner#0
        v-load aggregate%val_as_bytes%0#0                                                                                    () asset#0,nonce#0 | key.owner#0,aggregate%val_as_bytes%0#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () asset#0,nonce#0 |
        p-load nonce#0                                                                                                       () asset#0,nonce#0 | nonce#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () asset#0,nonce#0 |
        v-load aggregate%head%1#0                                                                                            () asset#0,nonce#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () asset#0,nonce#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () asset#0,nonce#0 |
        byte 0x6c697374696e6773                                                                                              () asset#0,nonce#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () asset#0,nonce#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () asset#0,nonce#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () asset#0,nonce#0 |
        v-load box_prefixed_key%0#0                                                                                          () asset#0,nonce#0 | box_prefixed_key%0#0
        box_get                                                                                                              () asset#0,nonce#0 | aggregate%box_get%0#0,aggregate%box_get%1#0
        v-store aggregate%box_get%1#0                                                                                        () asset#0,nonce#0 | aggregate%box_get%0#0
        v-store aggregate%box_get%0#0                                                                                        () asset#0,nonce#0 |
        v-load aggregate%box_get%1#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%1#0
        assert // check self.listings entry exists                                                                           () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 0                                                                                                                () asset#0,nonce#0 | aggregate%box_get%0#0,0
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.deposited#0
        v-store listing.deposited#0                                                                                          () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        extract 16 32                                                                                                        () asset#0,nonce#0 | listing.bidder#0
        v-store listing.bidder#0                                                                                             () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 48                                                                                                               () asset#0,nonce#0 | aggregate%box_get%0#0,48
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.bid#0
        v-store listing.bid#0                                                                                                () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 56                                                                                                               () asset#0,nonce#0 | aggregate%box_get%0#0,56
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.bidUnitaryPrice#0
        v-store listing.bidUnitaryPrice#0                                                                                    () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:187
        // if listing.bidder != Account():
        global ZeroAddress                                                                                                   () asset#0,nonce#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () asset#0,nonce#0 |
        v-load listing.bidder#0                                                                                              () asset#0,nonce#0 | listing.bidder#0
        v-load tmp%6#0                                                                                                       () asset#0,nonce#0 | listing.bidder#0,tmp%6#0
        !=                                                                                                                   () asset#0,nonce#0 | tmp%7#0
        v-store tmp%7#0                                                                                                      () asset#0,nonce#0 |
        v-load tmp%7#0                                                                                                       () asset#0,nonce#0 | tmp%7#0
        bz withdraw_after_if_else@3 ; b withdraw_if_body@1                                                                   () asset#0,nonce#0 |

    withdraw_if_body@1:                                                                                                      () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:189
        // listing.bid, listing.bidUnitaryPrice, asset.decimals
        p-load asset#0                                                                                                       () asset#0,nonce#0 | asset#0 (copy)
        asset_params_get AssetDecimals                                                                                       () asset#0,nonce#0 | asset_decimals#0,check%0#0
        v-store check%0#0                                                                                                    () asset#0,nonce#0 | asset_decimals#0
        v-store asset_decimals#0                                                                                             () asset#0,nonce#0 |
        v-load check%0#0                                                                                                     () asset#0,nonce#0 | check%0#0
        assert // asset exists                                                                                               () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:70
        // amount_not_scaled_high, amount_not_scaled_low = op.mulw(price, quantity)
        v-load listing.bidUnitaryPrice#0                                                                                     () asset#0,nonce#0 | listing.bidUnitaryPrice#0
        v-load listing.bid#0                                                                                                 () asset#0,nonce#0 | listing.bidUnitaryPrice#0,listing.bid#0
        mulw                                                                                                                 () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-store amount_not_scaled_low#0                                                                                      () asset#0,nonce#0 | amount_not_scaled_high#0
        v-store amount_not_scaled_high#0                                                                                     () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:71
        // scaling_factor_high, scaling_factor_low = op.expw(10, asset_decimals)
        int 10                                                                                                               () asset#0,nonce#0 | 10
        v-load asset_decimals#0                                                                                              () asset#0,nonce#0 | 10,asset_decimals#0
        expw                                                                                                                 () asset#0,nonce#0 | scaling_factor_high#0,scaling_factor_low#0
        v-store scaling_factor_low#0                                                                                         () asset#0,nonce#0 | scaling_factor_high#0
        v-store scaling_factor_high#0                                                                                        () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:72-74
        // _quotient_high, amount_to_be_paid, _remainder_high, _remainder_low = op.divmodw(
        //     amount_not_scaled_high, amount_not_scaled_low, scaling_factor_high, scaling_factor_low
        // )
        v-load amount_not_scaled_high#0                                                                                      () asset#0,nonce#0 | amount_not_scaled_high#0
        v-load amount_not_scaled_low#0                                                                                       () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-load scaling_factor_high#0                                                                                         () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0
        v-load scaling_factor_low#0                                                                                          () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0,scaling_factor_low#0
        divmodw                                                                                                              () asset#0,nonce#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0,_remainder_low#0
        v-store _remainder_low#0                                                                                             () asset#0,nonce#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0
        v-store _remainder_high#0                                                                                            () asset#0,nonce#0 | _quotient_high#0,amount_to_be_paid#0
        v-store amount_to_be_paid#0                                                                                          () asset#0,nonce#0 | _quotient_high#0
        v-store _quotient_high#0                                                                                             () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:75
        // assert _quotient_high == 0
        v-load _quotient_high#0                                                                                              () asset#0,nonce#0 | _quotient_high#0
        !                                                                                                                    () asset#0,nonce#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () asset#0,nonce#0 |
        v-load tmp%8#0                                                                                                       () asset#0,nonce#0 | tmp%8#0
        assert                                                                                                               () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:191
        // itxn.Payment(receiver=listing.bidder, amount=current_bid_deposit).submit()
        itxn_begin                                                                                                           () asset#0,nonce#0 |
        v-load amount_to_be_paid#0                                                                                           () asset#0,nonce#0 | amount_to_be_paid#0
        itxn_field Amount                                                                                                    () asset#0,nonce#0 |
        v-load listing.bidder#0                                                                                              () asset#0,nonce#0 | listing.bidder#0
        itxn_field Receiver                                                                                                  () asset#0,nonce#0 |
        int pay                                                                                                              () asset#0,nonce#0 | pay
        itxn_field TypeEnum                                                                                                  () asset#0,nonce#0 |
        int 0                                                                                                                () asset#0,nonce#0 | 0
        itxn_field Fee                                                                                                       () asset#0,nonce#0 |
        itxn_submit                                                                                                          () asset#0,nonce#0 |
        b withdraw_after_if_else@3                                                                                           () asset#0,nonce#0 |

    withdraw_after_if_else@3:                                                                                                () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:193
        // del self.listings[key]
        v-load box_prefixed_key%0#0                                                                                          () asset#0,nonce#0 | box_prefixed_key%0#0
        box_del                                                                                                              () asset#0,nonce#0 | {box_del}
        pop 1                                                                                                                () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:195
        // itxn.Payment(receiver=Txn.sender, amount=self.listings_box_mbr()).submit()
        itxn_begin                                                                                                           () asset#0,nonce#0 |
        txn Sender                                                                                                           () asset#0,nonce#0 | inner_txn_params%1%%param_Receiver_idx_0#0
        v-store inner_txn_params%1%%param_Receiver_idx_0#0                                                                   () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:45-66
        // return UInt64(
        //     2_500
        //     +
        //     # fmt: off
        //     # Key length
        //     (
        //         8
        //         + 32
        //         + 8
        //         + 8
        //         +
        //         # Value length
        //         8
        //         + 8
        //         + 32
        //         + 8
        //         + 8
        //     )
        //     *
        //     # fmt: on
        //     400
        // )
        int 50500                                                                                                            () asset#0,nonce#0 | 50500
        itxn_field Amount                                                                                                    () asset#0,nonce#0 |
        v-load inner_txn_params%1%%param_Receiver_idx_0#0                                                                    () asset#0,nonce#0 | inner_txn_params%1%%param_Receiver_idx_0#0
        itxn_field Receiver                                                                                                  () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:195
        // itxn.Payment(receiver=Txn.sender, amount=self.listings_box_mbr()).submit()
        int pay                                                                                                              () asset#0,nonce#0 | pay
        itxn_field TypeEnum                                                                                                  () asset#0,nonce#0 |
        int 0                                                                                                                () asset#0,nonce#0 | 0
        itxn_field Fee                                                                                                       () asset#0,nonce#0 |
        itxn_submit                                                                                                          () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:197-199
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=Txn.sender, asset_amount=listing.deposited
        // ).submit()
        itxn_begin                                                                                                           () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:198
        // xfer_asset=asset, asset_receiver=Txn.sender, asset_amount=listing.deposited
        txn Sender                                                                                                           () asset#0,nonce#0 | inner_txn_params%2%%param_AssetReceiver_idx_0#0
        v-store inner_txn_params%2%%param_AssetReceiver_idx_0#0                                                              () asset#0,nonce#0 |
        v-load listing.deposited#0                                                                                           () asset#0,nonce#0 | listing.deposited#0
        itxn_field AssetAmount                                                                                               () asset#0,nonce#0 |
        v-load inner_txn_params%2%%param_AssetReceiver_idx_0#0                                                               () asset#0,nonce#0 | inner_txn_params%2%%param_AssetReceiver_idx_0#0
        itxn_field AssetReceiver                                                                                             () asset#0,nonce#0 |
        p-load asset#0                                                                                                       () asset#0,nonce#0 | asset#0 (copy)
        itxn_field XferAsset                                                                                                 () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:197
        // itxn.AssetTransfer(
        int axfer                                                                                                            () asset#0,nonce#0 | axfer
        itxn_field TypeEnum                                                                                                  () asset#0,nonce#0 |
        int 0                                                                                                                () asset#0,nonce#0 | 0
        itxn_field Fee                                                                                                       () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:197-199
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=Txn.sender, asset_amount=listing.deposited
        // ).submit()
        itxn_submit                                                                                                          () asset#0,nonce#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.bid(owner: bytes, asset: uint64, nonce: uint64, bid_pay: uint64, quantity: uint64, unitary_price: uint64) -> void:
subroutine bid:
    bid_block@0:                                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:213
        // listing = self.listings[key]
        p-load asset#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset#0 (copy)
        itob                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        p-load owner#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | owner#0 (copy)
        v-load aggregate%val_as_bytes%0#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | owner#0 (copy),aggregate%val_as_bytes%0#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        p-load nonce#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | nonce#0 (copy)
        itob                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%head%1#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        byte 0x6c697374696e6773                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load box_prefixed_key%0#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | box_prefixed_key%0#0
        box_get                                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0,aggregate%box_get%1#0
        v-store aggregate%box_get%1#0                                                                                        () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0
        v-store aggregate%box_get%0#0                                                                                        () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%box_get%1#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%1#0
        assert // check self.listings entry exists                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0
        int 0                                                                                                                () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0,0
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.deposited#0
        v-store listing.deposited#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0
        int 8                                                                                                                () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0,8
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.unitaryPrice#0
        v-store listing.unitaryPrice#0                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0
        extract 16 32                                                                                                        () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidder#0
        v-store listing.bidder#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0
        int 48                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0,48
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bid#0
        v-store listing.bid#0                                                                                                () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%box_get%0#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0
        int 56                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%box_get%0#0,56
        extract_uint64                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidUnitaryPrice#0
        v-store listing.bidUnitaryPrice#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:214
        // if listing.bidder != Account():
        global ZeroAddress                                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%5#0
        v-store tmp%5#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load listing.bidder#0                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidder#0
        v-load tmp%5#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidder#0,tmp%5#0
        !=                                                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%6#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%6#0
        bz bid_after_if_else@3 ; b bid_if_body@1                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |

    bid_if_body@1:                                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:215
        // assert unitary_price > listing.bidUnitaryPrice
        p-load unitary_price#0                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | unitary_price#0 (copy)
        v-load listing.bidUnitaryPrice#0                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | unitary_price#0 (copy),listing.bidUnitaryPrice#0
        >                                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%7#0
        v-store tmp%7#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%7#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%7#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:218
        // listing.bid, listing.bidUnitaryPrice, asset.decimals
        p-load asset#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset#0 (copy)
        asset_params_get AssetDecimals                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset_decimals#0,check%0#0
        v-store check%0#0                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset_decimals#0
        v-store asset_decimals#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load check%0#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | check%0#0
        assert // asset exists                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:70
        // amount_not_scaled_high, amount_not_scaled_low = op.mulw(price, quantity)
        v-load listing.bidUnitaryPrice#0                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidUnitaryPrice#0
        v-load listing.bid#0                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidUnitaryPrice#0,listing.bid#0
        mulw                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-store amount_not_scaled_low#0                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0
        v-store amount_not_scaled_high#0                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:71
        // scaling_factor_high, scaling_factor_low = op.expw(10, asset_decimals)
        int 10                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 10
        v-load asset_decimals#0                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 10,asset_decimals#0
        expw                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | scaling_factor_high#0,scaling_factor_low#0
        v-store scaling_factor_low#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | scaling_factor_high#0
        v-store scaling_factor_high#0                                                                                        () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:72-74
        // _quotient_high, amount_to_be_paid, _remainder_high, _remainder_low = op.divmodw(
        //     amount_not_scaled_high, amount_not_scaled_low, scaling_factor_high, scaling_factor_low
        // )
        v-load amount_not_scaled_high#0                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0
        v-load amount_not_scaled_low#0                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-load scaling_factor_high#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0
        v-load scaling_factor_low#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0,scaling_factor_low#0
        divmodw                                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0,_remainder_low#0
        v-store _remainder_low#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0
        v-store _remainder_high#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0,amount_to_be_paid#0
        v-store amount_to_be_paid#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0
        v-store _quotient_high#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:75
        // assert _quotient_high == 0
        v-load _quotient_high#0                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0
        !                                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%8#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%8#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:221
        // itxn.Payment(receiver=listing.bidder, amount=current_bid_amount).submit()
        itxn_begin                                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load amount_to_be_paid#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_to_be_paid#0
        itxn_field Amount                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load listing.bidder#0                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.bidder#0
        itxn_field Receiver                                                                                                  () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        int pay                                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | pay
        itxn_field TypeEnum                                                                                                  () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        int 0                                                                                                                () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 0
        itxn_field Fee                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        itxn_submit                                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        b bid_after_if_else@3                                                                                                () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |

    bid_after_if_else@3:                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:223
        // amount_to_be_bid = self.quantity_price(quantity, unitary_price, asset.decimals)
        p-load asset#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset#0 (copy)
        asset_params_get AssetDecimals                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset_decimals#0,check%1#0
        v-store check%1#0                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | asset_decimals#0
        v-store asset_decimals#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load check%1#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | check%1#0
        assert // asset exists                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:70
        // amount_not_scaled_high, amount_not_scaled_low = op.mulw(price, quantity)
        p-load unitary_price#0                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | unitary_price#0 (copy)
        p-load quantity#0                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | unitary_price#0 (copy),quantity#0 (copy)
        mulw                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-store amount_not_scaled_low#0                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0
        v-store amount_not_scaled_high#0                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:71
        // scaling_factor_high, scaling_factor_low = op.expw(10, asset_decimals)
        int 10                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 10
        v-load asset_decimals#0                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | 10,asset_decimals#0
        expw                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | scaling_factor_high#0,scaling_factor_low#0
        v-store scaling_factor_low#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | scaling_factor_high#0
        v-store scaling_factor_high#0                                                                                        () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:72-74
        // _quotient_high, amount_to_be_paid, _remainder_high, _remainder_low = op.divmodw(
        //     amount_not_scaled_high, amount_not_scaled_low, scaling_factor_high, scaling_factor_low
        // )
        v-load amount_not_scaled_high#0                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0
        v-load amount_not_scaled_low#0                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-load scaling_factor_high#0                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0
        v-load scaling_factor_low#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0,scaling_factor_low#0
        divmodw                                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0,_remainder_low#0
        v-store _remainder_low#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0
        v-store _remainder_high#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0,amount_to_be_paid#0
        v-store amount_to_be_paid#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0
        v-store _quotient_high#0                                                                                             () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:75
        // assert _quotient_high == 0
        v-load _quotient_high#0                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | _quotient_high#0
        !                                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%8#0                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%8#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:225
        // assert bid_pay.sender == Txn.sender
        p-load bid_pay#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | bid_pay#0 (copy)
        gtxns Sender                                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%10#0
        v-store tmp%10#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        txn Sender                                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%11#0
        v-store tmp%11#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%10#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%10#0
        v-load tmp%11#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%10#0,tmp%11#0
        ==                                                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%12#0
        v-store tmp%12#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%12#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%12#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:226
        // assert bid_pay.receiver == Global.current_application_address
        p-load bid_pay#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | bid_pay#0 (copy)
        gtxns Receiver                                                                                                       () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%13#0
        v-store tmp%13#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        global CurrentApplicationAddress                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%14#0
        v-store tmp%14#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%13#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%13#0
        v-load tmp%14#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%13#0,tmp%14#0
        ==                                                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%15#0
        v-store tmp%15#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%15#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%15#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:227
        // assert bid_pay.amount == amount_to_be_bid
        p-load bid_pay#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | bid_pay#0 (copy)
        gtxns Amount                                                                                                         () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%16#0
        v-store tmp%16#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%16#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%16#0
        v-load amount_to_be_paid#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%16#0,amount_to_be_paid#0
        ==                                                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%17#0
        v-store tmp%17#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load tmp%17#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%17#0
        assert                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:232
        // bidder=Txn.sender,
        txn Sender                                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | tmp%18#0
        v-store tmp%18#0                                                                                                     () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:229
        // self.listings[key] = ListingValue(
        v-load listing.deposited#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.deposited#0
        itob                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%2#0
        v-store aggregate%val_as_bytes%2#0                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load listing.unitaryPrice#0                                                                                        () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | listing.unitaryPrice#0
        itob                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%3#0
        v-store aggregate%val_as_bytes%3#0                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%val_as_bytes%2#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%2#0
        v-load aggregate%val_as_bytes%3#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%2#0,aggregate%val_as_bytes%3#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%4#0
        v-store aggregate%head%4#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%head%4#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%4#0
        v-load tmp%18#0                                                                                                      () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%4#0,tmp%18#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%5#0
        v-store aggregate%head%5#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        p-load quantity#0                                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | quantity#0 (copy)
        itob                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%4#0
        v-store aggregate%val_as_bytes%4#0                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%head%5#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%5#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%5#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%6#0
        v-store aggregate%head%6#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        p-load unitary_price#0                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | unitary_price#0 (copy)
        itob                                                                                                                 () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%val_as_bytes%5#0
        v-store aggregate%val_as_bytes%5#0                                                                                   () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        v-load aggregate%head%6#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%6#0
        v-load aggregate%val_as_bytes%5#0                                                                                    () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%6#0,aggregate%val_as_bytes%5#0
        concat                                                                                                               () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | aggregate%head%7#0
        v-store aggregate%head%7#0                                                                                           () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        // marketplace_demo/marketplace_with_tups.py:229-235
        // self.listings[key] = ListingValue(
        //     deposited=listing.deposited,
        //     unitaryPrice=listing.unitaryPrice,
        //     bidder=Txn.sender,
        //     bid=quantity,
        //     bidUnitaryPrice=unitary_price,
        // )
        v-load box_prefixed_key%0#0                                                                                          () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | box_prefixed_key%0#0
        v-load aggregate%head%7#0                                                                                            () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 | box_prefixed_key%0#0,aggregate%head%7#0
        box_put                                                                                                              () owner#0,asset#0,nonce#0,bid_pay#0,quantity#0,unitary_price#0 |
        retsub


// test_cases.marketplace_demo.marketplace_with_tups.DigitalMarketplaceWithTups.accept_bid(asset: uint64, nonce: uint64) -> void:
subroutine accept_bid:
    accept_bid_block@0:                                                                                                      () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:239
        // key = ListingKey(owner=Txn.sender, asset=asset.id, nonce=nonce)
        txn Sender                                                                                                           () asset#0,nonce#0 | key.owner#0
        v-store key.owner#0                                                                                                  () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:241
        // listing = self.listings[key]
        p-load asset#0                                                                                                       () asset#0,nonce#0 | asset#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%0#0
        v-store aggregate%val_as_bytes%0#0                                                                                   () asset#0,nonce#0 |
        v-load key.owner#0                                                                                                   () asset#0,nonce#0 | key.owner#0
        v-load aggregate%val_as_bytes%0#0                                                                                    () asset#0,nonce#0 | key.owner#0,aggregate%val_as_bytes%0#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%1#0
        v-store aggregate%head%1#0                                                                                           () asset#0,nonce#0 |
        p-load nonce#0                                                                                                       () asset#0,nonce#0 | nonce#0 (copy)
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%1#0
        v-store aggregate%val_as_bytes%1#0                                                                                   () asset#0,nonce#0 |
        v-load aggregate%head%1#0                                                                                            () asset#0,nonce#0 | aggregate%head%1#0
        v-load aggregate%val_as_bytes%1#0                                                                                    () asset#0,nonce#0 | aggregate%head%1#0,aggregate%val_as_bytes%1#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%2#0
        v-store aggregate%head%2#0                                                                                           () asset#0,nonce#0 |
        byte 0x6c697374696e6773                                                                                              () asset#0,nonce#0 | 0x6c697374696e6773
        v-load aggregate%head%2#0                                                                                            () asset#0,nonce#0 | 0x6c697374696e6773,aggregate%head%2#0
        concat                                                                                                               () asset#0,nonce#0 | box_prefixed_key%0#0
        v-store box_prefixed_key%0#0                                                                                         () asset#0,nonce#0 |
        v-load box_prefixed_key%0#0                                                                                          () asset#0,nonce#0 | box_prefixed_key%0#0
        box_get                                                                                                              () asset#0,nonce#0 | aggregate%box_get%0#0,aggregate%box_get%1#0
        v-store aggregate%box_get%1#0                                                                                        () asset#0,nonce#0 | aggregate%box_get%0#0
        v-store aggregate%box_get%0#0                                                                                        () asset#0,nonce#0 |
        v-load aggregate%box_get%1#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%1#0
        assert // check self.listings entry exists                                                                           () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 0                                                                                                                () asset#0,nonce#0 | aggregate%box_get%0#0,0
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.deposited#0
        v-store listing.deposited#0                                                                                          () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 8                                                                                                                () asset#0,nonce#0 | aggregate%box_get%0#0,8
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.unitaryPrice#0
        v-store listing.unitaryPrice#0                                                                                       () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        extract 16 32                                                                                                        () asset#0,nonce#0 | listing.bidder#0
        v-store listing.bidder#0                                                                                             () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 48                                                                                                               () asset#0,nonce#0 | aggregate%box_get%0#0,48
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.bid#0
        v-store listing.bid#0                                                                                                () asset#0,nonce#0 |
        v-load aggregate%box_get%0#0                                                                                         () asset#0,nonce#0 | aggregate%box_get%0#0
        int 56                                                                                                               () asset#0,nonce#0 | aggregate%box_get%0#0,56
        extract_uint64                                                                                                       () asset#0,nonce#0 | listing.bidUnitaryPrice#0
        v-store listing.bidUnitaryPrice#0                                                                                    () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:242
        // assert listing.bidder != Account()
        global ZeroAddress                                                                                                   () asset#0,nonce#0 | tmp%6#0
        v-store tmp%6#0                                                                                                      () asset#0,nonce#0 |
        v-load listing.bidder#0                                                                                              () asset#0,nonce#0 | listing.bidder#0
        v-load tmp%6#0                                                                                                       () asset#0,nonce#0 | listing.bidder#0,tmp%6#0
        !=                                                                                                                   () asset#0,nonce#0 | tmp%7#0
        v-store tmp%7#0                                                                                                      () asset#0,nonce#0 |
        v-load tmp%7#0                                                                                                       () asset#0,nonce#0 | tmp%7#0
        assert                                                                                                               () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:244
        // min_quantity = listing.deposited if listing.deposited < listing.bid else listing.bid
        v-load listing.deposited#0                                                                                           () asset#0,nonce#0 | listing.deposited#0
        v-load listing.bid#0                                                                                                 () asset#0,nonce#0 | listing.deposited#0,listing.bid#0
        <                                                                                                                    () asset#0,nonce#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () asset#0,nonce#0 |
        v-load tmp%8#0                                                                                                       () asset#0,nonce#0 | tmp%8#0
        bz accept_bid_ternary_false@2 ; b accept_bid_ternary_true@1                                                          () asset#0,nonce#0 |

    accept_bid_ternary_true@1:                                                                                               () asset#0,nonce#0 |
        v-load listing.deposited#0                                                                                           () asset#0,nonce#0 | listing.deposited#0
        v-store min_quantity#0                                                                                               () asset#0,nonce#0 |
        b accept_bid_ternary_merge@3                                                                                         () asset#0,nonce#0 |

    accept_bid_ternary_false@2:                                                                                              () asset#0,nonce#0 |
        v-load listing.bid#0                                                                                                 () asset#0,nonce#0 | listing.bid#0
        v-store min_quantity#0                                                                                               () asset#0,nonce#0 |
        b accept_bid_ternary_merge@3                                                                                         () asset#0,nonce#0 |

    accept_bid_ternary_merge@3:                                                                                              () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:247
        // min_quantity, listing.bidUnitaryPrice, asset.decimals
        p-load asset#0                                                                                                       () asset#0,nonce#0 | asset#0 (copy)
        asset_params_get AssetDecimals                                                                                       () asset#0,nonce#0 | asset_decimals#0,check%0#0
        v-store check%0#0                                                                                                    () asset#0,nonce#0 | asset_decimals#0
        v-store asset_decimals#0                                                                                             () asset#0,nonce#0 |
        v-load check%0#0                                                                                                     () asset#0,nonce#0 | check%0#0
        assert // asset exists                                                                                               () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:70
        // amount_not_scaled_high, amount_not_scaled_low = op.mulw(price, quantity)
        v-load listing.bidUnitaryPrice#0                                                                                     () asset#0,nonce#0 | listing.bidUnitaryPrice#0
        v-load min_quantity#0                                                                                                () asset#0,nonce#0 | listing.bidUnitaryPrice#0,min_quantity#0
        mulw                                                                                                                 () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-store amount_not_scaled_low#0                                                                                      () asset#0,nonce#0 | amount_not_scaled_high#0
        v-store amount_not_scaled_high#0                                                                                     () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:71
        // scaling_factor_high, scaling_factor_low = op.expw(10, asset_decimals)
        int 10                                                                                                               () asset#0,nonce#0 | 10
        v-load asset_decimals#0                                                                                              () asset#0,nonce#0 | 10,asset_decimals#0
        expw                                                                                                                 () asset#0,nonce#0 | scaling_factor_high#0,scaling_factor_low#0
        v-store scaling_factor_low#0                                                                                         () asset#0,nonce#0 | scaling_factor_high#0
        v-store scaling_factor_high#0                                                                                        () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:72-74
        // _quotient_high, amount_to_be_paid, _remainder_high, _remainder_low = op.divmodw(
        //     amount_not_scaled_high, amount_not_scaled_low, scaling_factor_high, scaling_factor_low
        // )
        v-load amount_not_scaled_high#0                                                                                      () asset#0,nonce#0 | amount_not_scaled_high#0
        v-load amount_not_scaled_low#0                                                                                       () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0
        v-load scaling_factor_high#0                                                                                         () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0
        v-load scaling_factor_low#0                                                                                          () asset#0,nonce#0 | amount_not_scaled_high#0,amount_not_scaled_low#0,scaling_factor_high#0,scaling_factor_low#0
        divmodw                                                                                                              () asset#0,nonce#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0,_remainder_low#0
        v-store _remainder_low#0                                                                                             () asset#0,nonce#0 | _quotient_high#0,amount_to_be_paid#0,_remainder_high#0
        v-store _remainder_high#0                                                                                            () asset#0,nonce#0 | _quotient_high#0,amount_to_be_paid#0
        v-store amount_to_be_paid#0                                                                                          () asset#0,nonce#0 | _quotient_high#0
        v-store _quotient_high#0                                                                                             () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:75
        // assert _quotient_high == 0
        v-load _quotient_high#0                                                                                              () asset#0,nonce#0 | _quotient_high#0
        !                                                                                                                    () asset#0,nonce#0 | tmp%8#0
        v-store tmp%8#0                                                                                                      () asset#0,nonce#0 |
        v-load tmp%8#0                                                                                                       () asset#0,nonce#0 | tmp%8#0
        assert                                                                                                               () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:250
        // itxn.Payment(receiver=Txn.sender, amount=best_bid_amount).submit()
        itxn_begin                                                                                                           () asset#0,nonce#0 |
        txn Sender                                                                                                           () asset#0,nonce#0 | inner_txn_params%0%%param_Receiver_idx_0#0
        v-store inner_txn_params%0%%param_Receiver_idx_0#0                                                                   () asset#0,nonce#0 |
        v-load amount_to_be_paid#0                                                                                           () asset#0,nonce#0 | amount_to_be_paid#0
        itxn_field Amount                                                                                                    () asset#0,nonce#0 |
        v-load inner_txn_params%0%%param_Receiver_idx_0#0                                                                    () asset#0,nonce#0 | inner_txn_params%0%%param_Receiver_idx_0#0
        itxn_field Receiver                                                                                                  () asset#0,nonce#0 |
        int pay                                                                                                              () asset#0,nonce#0 | pay
        itxn_field TypeEnum                                                                                                  () asset#0,nonce#0 |
        int 0                                                                                                                () asset#0,nonce#0 | 0
        itxn_field Fee                                                                                                       () asset#0,nonce#0 |
        itxn_submit                                                                                                          () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:252-254
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=listing.bidder, asset_amount=min_quantity
        // ).submit()
        itxn_begin                                                                                                           () asset#0,nonce#0 |
        v-load min_quantity#0                                                                                                () asset#0,nonce#0 | min_quantity#0
        itxn_field AssetAmount                                                                                               () asset#0,nonce#0 |
        v-load listing.bidder#0                                                                                              () asset#0,nonce#0 | listing.bidder#0
        itxn_field AssetReceiver                                                                                             () asset#0,nonce#0 |
        p-load asset#0                                                                                                       () asset#0,nonce#0 | asset#0 (copy)
        itxn_field XferAsset                                                                                                 () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:252
        // itxn.AssetTransfer(
        int axfer                                                                                                            () asset#0,nonce#0 | axfer
        itxn_field TypeEnum                                                                                                  () asset#0,nonce#0 |
        int 0                                                                                                                () asset#0,nonce#0 | 0
        itxn_field Fee                                                                                                       () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:252-254
        // itxn.AssetTransfer(
        //     xfer_asset=asset, asset_receiver=listing.bidder, asset_amount=min_quantity
        // ).submit()
        itxn_submit                                                                                                          () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:260
        // deposited=listing.deposited - min_quantity,
        v-load listing.deposited#0                                                                                           () asset#0,nonce#0 | listing.deposited#0
        v-load min_quantity#0                                                                                                () asset#0,nonce#0 | listing.deposited#0,min_quantity#0
        -                                                                                                                    () asset#0,nonce#0 | tmp%10#0
        v-store tmp%10#0                                                                                                     () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:261
        // bid=listing.bid - min_quantity,
        v-load listing.bid#0                                                                                                 () asset#0,nonce#0 | listing.bid#0
        v-load min_quantity#0                                                                                                () asset#0,nonce#0 | listing.bid#0,min_quantity#0
        -                                                                                                                    () asset#0,nonce#0 | tmp%11#0
        v-store tmp%11#0                                                                                                     () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:256
        // self.listings[key] = ListingValue(
        v-load tmp%10#0                                                                                                      () asset#0,nonce#0 | tmp%10#0
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%2#0
        v-store aggregate%val_as_bytes%2#0                                                                                   () asset#0,nonce#0 |
        v-load listing.unitaryPrice#0                                                                                        () asset#0,nonce#0 | listing.unitaryPrice#0
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%3#0
        v-store aggregate%val_as_bytes%3#0                                                                                   () asset#0,nonce#0 |
        v-load aggregate%val_as_bytes%2#0                                                                                    () asset#0,nonce#0 | aggregate%val_as_bytes%2#0
        v-load aggregate%val_as_bytes%3#0                                                                                    () asset#0,nonce#0 | aggregate%val_as_bytes%2#0,aggregate%val_as_bytes%3#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%4#0
        v-store aggregate%head%4#0                                                                                           () asset#0,nonce#0 |
        v-load aggregate%head%4#0                                                                                            () asset#0,nonce#0 | aggregate%head%4#0
        v-load listing.bidder#0                                                                                              () asset#0,nonce#0 | aggregate%head%4#0,listing.bidder#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%5#0
        v-store aggregate%head%5#0                                                                                           () asset#0,nonce#0 |
        v-load tmp%11#0                                                                                                      () asset#0,nonce#0 | tmp%11#0
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%4#0
        v-store aggregate%val_as_bytes%4#0                                                                                   () asset#0,nonce#0 |
        v-load aggregate%head%5#0                                                                                            () asset#0,nonce#0 | aggregate%head%5#0
        v-load aggregate%val_as_bytes%4#0                                                                                    () asset#0,nonce#0 | aggregate%head%5#0,aggregate%val_as_bytes%4#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%6#0
        v-store aggregate%head%6#0                                                                                           () asset#0,nonce#0 |
        v-load listing.bidUnitaryPrice#0                                                                                     () asset#0,nonce#0 | listing.bidUnitaryPrice#0
        itob                                                                                                                 () asset#0,nonce#0 | aggregate%val_as_bytes%5#0
        v-store aggregate%val_as_bytes%5#0                                                                                   () asset#0,nonce#0 |
        v-load aggregate%head%6#0                                                                                            () asset#0,nonce#0 | aggregate%head%6#0
        v-load aggregate%val_as_bytes%5#0                                                                                    () asset#0,nonce#0 | aggregate%head%6#0,aggregate%val_as_bytes%5#0
        concat                                                                                                               () asset#0,nonce#0 | aggregate%head%7#0
        v-store aggregate%head%7#0                                                                                           () asset#0,nonce#0 |
        // marketplace_demo/marketplace_with_tups.py:256-262
        // self.listings[key] = ListingValue(
        //     bidder=listing.bidder,
        //     bidUnitaryPrice=listing.bidUnitaryPrice,
        //     unitaryPrice=listing.unitaryPrice,
        //     deposited=listing.deposited - min_quantity,
        //     bid=listing.bid - min_quantity,
        // )
        v-load box_prefixed_key%0#0                                                                                          () asset#0,nonce#0 | box_prefixed_key%0#0
        v-load aggregate%head%7#0                                                                                            () asset#0,nonce#0 | box_prefixed_key%0#0,aggregate%head%7#0
        box_put                                                                                                              () asset#0,nonce#0 |
        retsub


