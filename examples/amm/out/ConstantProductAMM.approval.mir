// Op                                                                                                            //                                                                                        Op Description                                                                                                                                              Stack (out)                                                                                                                                                                                                                   Live (out)           X stack                                                                                              Source code                                                                                          Source line

#pragma version 10

// examples.amm.contract.ConstantProductAMM.approval_program() -> uint64:
main_block@0:
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}
    //                                                                                                           virtual: store app_id%0#0 to l-stack (no copy)                                            app_id%0#0
    //                                                                                                           virtual: load app_id%0#0 from l-stack (no copy)                                           app_id%0#0
    bnz main_entrypoint@2                                                                                        //
    // Implicit fall through to main_on_create@1                                                                 //

main_on_create@1:
    callsub __init__                                                                                             //
    // Implicit fall through to main_entrypoint@2                                                                //

main_entrypoint@2:
    txn NumAppArgs                                                                                               //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    bz main_bare_routing@11                                                                                      //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    // Implicit fall through to main_abi_routing@3                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27

main_abi_routing@3:
    txna ApplicationArgs 0                                                                                       //                                                                                                                                                                                                                                                    {txna}                                                                                                                                                                                                                                                                                                                                                  class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               tmp%1#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    method "set_governor(account)void"                                                                           //                                                                                                                                                                                                                                                    tmp%1#0,method<"set_governor(account)void">                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    method "bootstrap(pay,asset,asset)uint64"                                                                    //                                                                                                                                                                                                                                                    tmp%1#0,method<"set_governor(account)void">,method<"bootstrap(pay,asset,asset)uint64">                                                                                                                                                                                                                                                                  class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    method "mint(axfer,axfer,asset,asset,asset)void"                                                             //                                                                                                                                                                                                                                                    tmp%1#0,method<"set_governor(account)void">,method<"bootstrap(pay,asset,asset)uint64">,method<"mint(axfer,axfer,asset,asset,asset)void">                                                                                                                                                                                                                class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    method "burn(axfer,asset,asset,asset)void"                                                                   //                                                                                                                                                                                                                                                    tmp%1#0,method<"set_governor(account)void">,method<"bootstrap(pay,asset,asset)uint64">,method<"mint(axfer,axfer,asset,asset,asset)void">,method<"burn(axfer,asset,asset,asset)void">                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    method "swap(axfer,asset,asset)void"                                                                         //                                                                                                                                                                                                                                                    tmp%1#0,method<"set_governor(account)void">,method<"bootstrap(pay,asset,asset)uint64">,method<"mint(axfer,axfer,asset,asset,asset)void">,method<"burn(axfer,asset,asset,asset)void">,method<"swap(axfer,asset,asset)void">                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    uncover 5                                                                                                    //                                                                                        load tmp%1#0 from l-stack (no copy)                                                                                                                         method<"set_governor(account)void">,method<"bootstrap(pay,asset,asset)uint64">,method<"mint(axfer,axfer,asset,asset,asset)void">,method<"burn(axfer,asset,asset,asset)void">,method<"swap(axfer,asset,asset)void">,tmp%1#0                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    match main_set_governor_route@4 main_bootstrap_route@5 main_mint_route@6 main_burn_route@7 main_swap_route@8 //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    err // reject transaction                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27

main_set_governor_route@4:
    txn OnCompletion                                                                                             //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod()                                                                                     amm/contract.py:43
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               tmp%2#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              tmp%2#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     arc4.abimethod()                                                                                     amm/contract.py:43
    //                                                                                                           virtual: store tmp%3#0 to l-stack (no copy)                                               tmp%3#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    //                                                                                                           virtual: load tmp%3#0 from l-stack (no copy)                                              tmp%3#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    assert // OnCompletion is NoOp                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:43
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod()                                                                                     amm/contract.py:43
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               tmp%4#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              tmp%4#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    assert // is not creating                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:43
    txna ApplicationArgs 1                                                                                       //                                                                                                                                                                                                                                                    {txna}                                                                                                                                                                                                                                                                                                                                                  class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%5#0 to l-stack (no copy)                                               tmp%5#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%5#0 from l-stack (no copy)                                              tmp%5#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    {btoi}                                                                                                                                                                                                                                                                                                                                                  class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%6#0 to l-stack (no copy)                                               tmp%6#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%6#0 from l-stack (no copy)                                              tmp%6#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Accounts                                                                                               //                                                                                                                                                                                                                                                    {txnas}                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%7#0 to l-stack (no copy)                                               tmp%7#0                                                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%7#0 from l-stack (no copy)                                              tmp%7#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:43
    callsub set_governor                                                                                         //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:43
    int 1                                                                                                        //                                                                                                                                                                                                                                                    1                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:43
    return                                                                                                       //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:43

main_bootstrap_route@5:
    txn OnCompletion                                                                                             //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: store tmp%8#0 to l-stack (no copy)                                               tmp%8#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: load tmp%8#0 from l-stack (no copy)                                              tmp%8#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:49
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: store tmp%9#0 to l-stack (no copy)                                               tmp%9#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: load tmp%9#0 from l-stack (no copy)                                              tmp%9#0                                                                                                                                                                                                                                                                                                                                                                                                        arc4.abimethod()                                                                                     amm/contract.py:49
    assert // OnCompletion is NoOp                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:49
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: store tmp%10#0 to l-stack (no copy)                                              tmp%10#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: load tmp%10#0 from l-stack (no copy)                                             tmp%10#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:49
    assert // is not creating                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:49
    txn GroupIndex                                                                                               //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%11#0 to l-stack (no copy)                                              tmp%11#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%11#0 from l-stack (no copy)                                             tmp%11#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int 1                                                                                                        //                                                                                                                                                                                                                                                    tmp%11#0,1                                                                                                                                                                                                                                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    -                                                                                                            //                                                                                                                                                                                                                                                    {-}                                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store awst_tmp%0#0 to l-stack (no copy)                                          awst_tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    dup                                                                                                          //                                                                                        load awst_tmp%0#0 from l-stack (copy)                                                                                                                       awst_tmp%0#0,awst_tmp%0#0                                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    gtxns TypeEnum                                                                                               //                                                                                                                                                                                                                                                    awst_tmp%0#0,{gtxns}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%12#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%12#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%12#0 from l-stack (no copy)                                             awst_tmp%0#0,tmp%12#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int pay                                                                                                      //                                                                                                                                                                                                                                                    awst_tmp%0#0,tmp%12#0,pay                                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    ==                                                                                                           //                                                                                                                                                                                                                                                    awst_tmp%0#0,{==}                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%13#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%13#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%13#0 from l-stack (no copy)                                             awst_tmp%0#0,tmp%13#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // transaction type is pay                                                                            //                                                                                                                                                                                                                                                    awst_tmp%0#0                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 1                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%0#0,{txna}                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%14#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%14#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%14#0 from l-stack (no copy)                                             awst_tmp%0#0,tmp%14#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%0#0,{btoi}                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%15#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%15#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%15#0 from l-stack (no copy)                                             awst_tmp%0#0,tmp%15#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%0#0,{txnas}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%16#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%16#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 2                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%0#0,tmp%16#0,{txna}                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%17#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%16#0,tmp%17#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%17#0 from l-stack (no copy)                                             awst_tmp%0#0,tmp%16#0,tmp%17#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%0#0,tmp%16#0,{btoi}                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%18#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%16#0,tmp%18#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%18#0 from l-stack (no copy)                                             awst_tmp%0#0,tmp%16#0,tmp%18#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%0#0,tmp%16#0,{txnas}                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%19#0 to l-stack (no copy)                                              awst_tmp%0#0,tmp%16#0,tmp%19#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    uncover 2                                                                                                    //                                                                                        load awst_tmp%0#0 from l-stack (no copy)                                                                                                                    tmp%16#0,tmp%19#0,awst_tmp%0#0                                                                                                                                                                                                                                                                                                                          arc4.abimethod()                                                                                     amm/contract.py:49
    uncover 2                                                                                                    //                                                                                        load tmp%16#0 from l-stack (no copy)                                                                                                                        tmp%19#0,awst_tmp%0#0,tmp%16#0                                                                                                                                                                                                                                                                                                                          arc4.abimethod()                                                                                     amm/contract.py:49
    uncover 2                                                                                                    //                                                                                        load tmp%19#0 from l-stack (no copy)                                                                                                                        awst_tmp%0#0,tmp%16#0,tmp%19#0                                                                                                                                                                                                                                                                                                                          arc4.abimethod()                                                                                     amm/contract.py:49
    callsub bootstrap                                                                                            //                                                                                                                                                                                                                                                    {bootstrap}                                                                                                                                                                                                                                                                                                                                             arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: store tmp%20#0 to l-stack (no copy)                                              tmp%20#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:49
    byte 0x151f7c75                                                                                              //                                                                                                                                                                                                                                                    tmp%20#0,0x151f7c75                                                                                                                                                                                                                                                                                                                                     arc4.abimethod()                                                                                     amm/contract.py:49
    swap                                                                                                         //                                                                                        load tmp%20#0 from l-stack (no copy)                                                                                                                        0x151f7c75,tmp%20#0                                                                                                                                                                                                                                                                                                                                     arc4.abimethod()                                                                                     amm/contract.py:49
    concat                                                                                                       //                                                                                                                                                                                                                                                    {concat}                                                                                                                                                                                                                                                                                                                                                arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: store tmp%21#0 to l-stack (no copy)                                              tmp%21#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:49
    //                                                                                                           virtual: load tmp%21#0 from l-stack (no copy)                                             tmp%21#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:49
    log                                                                                                          //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:49
    int 1                                                                                                        //                                                                                                                                                                                                                                                    1                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod()                                                                                     amm/contract.py:49
    return                                                                                                       //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod()                                                                                     amm/contract.py:49

main_mint_route@6:
    txn OnCompletion                                                                                             //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    //                                                                                                           virtual: store tmp%22#0 to l-stack (no copy)                                              tmp%22#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    //                                                                                                           virtual: load tmp%22#0 from l-stack (no copy)                                             tmp%22#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    //                                                                                                           virtual: store tmp%23#0 to l-stack (no copy)                                              tmp%23#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    //                                                                                                           virtual: load tmp%23#0 from l-stack (no copy)                                             tmp%23#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    assert // OnCompletion is NoOp                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    //                                                                                                           virtual: store tmp%24#0 to l-stack (no copy)                                              tmp%24#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    //                                                                                                           virtual: load tmp%24#0 from l-stack (no copy)                                             tmp%24#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    assert // is not creating                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    txn GroupIndex                                                                                               //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%25#0 to l-stack (no copy)                                              tmp%25#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%25#0 from l-stack (no copy)                                             tmp%25#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int 2                                                                                                        //                                                                                                                                                                                                                                                    tmp%25#0,2                                                                                                                                                                                                                                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    -                                                                                                            //                                                                                                                                                                                                                                                    {-}                                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store awst_tmp%1#0 to l-stack (no copy)                                          awst_tmp%1#0                                                                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    dup                                                                                                          //                                                                                        load awst_tmp%1#0 from l-stack (copy)                                                                                                                       awst_tmp%1#0,awst_tmp%1#0                                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    gtxns TypeEnum                                                                                               //                                                                                                                                                                                                                                                    awst_tmp%1#0,{gtxns}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%26#0 to l-stack (no copy)                                              awst_tmp%1#0,tmp%26#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%26#0 from l-stack (no copy)                                             awst_tmp%1#0,tmp%26#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int axfer                                                                                                    //                                                                                                                                                                                                                                                    awst_tmp%1#0,tmp%26#0,axfer                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    ==                                                                                                           //                                                                                                                                                                                                                                                    awst_tmp%1#0,{==}                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%27#0 to l-stack (no copy)                                              awst_tmp%1#0,tmp%27#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%27#0 from l-stack (no copy)                                             awst_tmp%1#0,tmp%27#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // transaction type is axfer                                                                          //                                                                                                                                                                                                                                                    awst_tmp%1#0                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txn GroupIndex                                                                                               //                                                                                                                                                                                                                                                    awst_tmp%1#0,{txn}                                                                                                                                                                                                                                                                                                                                      class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%28#0 to l-stack (no copy)                                              awst_tmp%1#0,tmp%28#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%28#0 from l-stack (no copy)                                             awst_tmp%1#0,tmp%28#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int 1                                                                                                        //                                                                                                                                                                                                                                                    awst_tmp%1#0,tmp%28#0,1                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    -                                                                                                            //                                                                                                                                                                                                                                                    awst_tmp%1#0,{-}                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store awst_tmp%2#0 to l-stack (no copy)                                          awst_tmp%1#0,awst_tmp%2#0                                                                                                                                                                                                                                                                                                                                                                                      class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    dup                                                                                                          //                                                                                        load awst_tmp%2#0 from l-stack (copy)                                                                                                                       awst_tmp%1#0,awst_tmp%2#0,awst_tmp%2#0                                                                                                                                                                                                                                                                                                                  class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    gtxns TypeEnum                                                                                               //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,{gtxns}                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%29#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%29#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%29#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%29#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int axfer                                                                                                    //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%29#0,axfer                                                                                                                                                                                                                                                                                                                class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    ==                                                                                                           //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,{==}                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%30#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%30#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%30#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%30#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // transaction type is axfer                                                                          //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0                                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 1                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,{txna}                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%31#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%31#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%31#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%31#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,{btoi}                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%32#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%32#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%32#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%32#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,{txnas}                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%33#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0                                                                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 2                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,{txna}                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%34#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%34#0                                                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%34#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%34#0                                                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,{btoi}                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%35#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%35#0                                                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%35#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%35#0                                                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,{txnas}                                                                                                                                                                                                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%36#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0                                                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 3                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,{txna}                                                                                                                                                                                                                                                                                                      class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%37#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%37#0                                                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%37#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%37#0                                                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,{btoi}                                                                                                                                                                                                                                                                                                      class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%38#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%38#0                                                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%38#0 from l-stack (no copy)                                             awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%38#0                                                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,{txnas}                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%39#0 to l-stack (no copy)                                              awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%39#0                                                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    uncover 4                                                                                                    //                                                                                        load awst_tmp%1#0 from l-stack (no copy)                                                                                                                    awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%39#0,awst_tmp%1#0                                                                                                                                                                                                                                                                                                    arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    uncover 4                                                                                                    //                                                                                        load awst_tmp%2#0 from l-stack (no copy)                                                                                                                    tmp%33#0,tmp%36#0,tmp%39#0,awst_tmp%1#0,awst_tmp%2#0                                                                                                                                                                                                                                                                                                    arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    uncover 4                                                                                                    //                                                                                        load tmp%33#0 from l-stack (no copy)                                                                                                                        tmp%36#0,tmp%39#0,awst_tmp%1#0,awst_tmp%2#0,tmp%33#0                                                                                                                                                                                                                                                                                                    arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    uncover 4                                                                                                    //                                                                                        load tmp%36#0 from l-stack (no copy)                                                                                                                        tmp%39#0,awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0                                                                                                                                                                                                                                                                                                    arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    uncover 4                                                                                                    //                                                                                        load tmp%39#0 from l-stack (no copy)                                                                                                                        awst_tmp%1#0,awst_tmp%2#0,tmp%33#0,tmp%36#0,tmp%39#0                                                                                                                                                                                                                                                                                                    arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    callsub mint                                                                                                 //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    int 1                                                                                                        //                                                                                                                                                                                                                                                    1                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89
    return                                                                                                       //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:83-89

main_burn_route@7:
    txn OnCompletion                                                                                             //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    //                                                                                                           virtual: store tmp%40#0 to l-stack (no copy)                                              tmp%40#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    //                                                                                                           virtual: load tmp%40#0 from l-stack (no copy)                                             tmp%40#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    //                                                                                                           virtual: store tmp%41#0 to l-stack (no copy)                                              tmp%41#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    //                                                                                                           virtual: load tmp%41#0 from l-stack (no copy)                                             tmp%41#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    assert // OnCompletion is NoOp                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    //                                                                                                           virtual: store tmp%42#0 to l-stack (no copy)                                              tmp%42#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    //                                                                                                           virtual: load tmp%42#0 from l-stack (no copy)                                             tmp%42#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    assert // is not creating                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    txn GroupIndex                                                                                               //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%43#0 to l-stack (no copy)                                              tmp%43#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%43#0 from l-stack (no copy)                                             tmp%43#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int 1                                                                                                        //                                                                                                                                                                                                                                                    tmp%43#0,1                                                                                                                                                                                                                                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    -                                                                                                            //                                                                                                                                                                                                                                                    {-}                                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store awst_tmp%3#0 to l-stack (no copy)                                          awst_tmp%3#0                                                                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    dup                                                                                                          //                                                                                        load awst_tmp%3#0 from l-stack (copy)                                                                                                                       awst_tmp%3#0,awst_tmp%3#0                                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    gtxns TypeEnum                                                                                               //                                                                                                                                                                                                                                                    awst_tmp%3#0,{gtxns}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%44#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%44#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%44#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%44#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int axfer                                                                                                    //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%44#0,axfer                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    ==                                                                                                           //                                                                                                                                                                                                                                                    awst_tmp%3#0,{==}                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%45#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%45#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%45#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%45#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // transaction type is axfer                                                                          //                                                                                                                                                                                                                                                    awst_tmp%3#0                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 1                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%3#0,{txna}                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%46#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%46#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%46#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%46#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%3#0,{btoi}                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%47#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%47#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%47#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%47#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%3#0,{txnas}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%48#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 2                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%48#0,{txna}                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%49#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0,tmp%49#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%49#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%48#0,tmp%49#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%48#0,{btoi}                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%50#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0,tmp%50#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%50#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%48#0,tmp%50#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%48#0,{txnas}                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%51#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0,tmp%51#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 3                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%48#0,tmp%51#0,{txna}                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%52#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0,tmp%51#0,tmp%52#0                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%52#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%48#0,tmp%51#0,tmp%52#0                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%48#0,tmp%51#0,{btoi}                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%53#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0,tmp%51#0,tmp%53#0                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%53#0 from l-stack (no copy)                                             awst_tmp%3#0,tmp%48#0,tmp%51#0,tmp%53#0                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%3#0,tmp%48#0,tmp%51#0,{txnas}                                                                                                                                                                                                                                                                                                                  class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%54#0 to l-stack (no copy)                                              awst_tmp%3#0,tmp%48#0,tmp%51#0,tmp%54#0                                                                                                                                                                                                                                                                                                                                                                        class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    uncover 3                                                                                                    //                                                                                        load awst_tmp%3#0 from l-stack (no copy)                                                                                                                    tmp%48#0,tmp%51#0,tmp%54#0,awst_tmp%3#0                                                                                                                                                                                                                                                                                                                 arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    uncover 3                                                                                                    //                                                                                        load tmp%48#0 from l-stack (no copy)                                                                                                                        tmp%51#0,tmp%54#0,awst_tmp%3#0,tmp%48#0                                                                                                                                                                                                                                                                                                                 arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    uncover 3                                                                                                    //                                                                                        load tmp%51#0 from l-stack (no copy)                                                                                                                        tmp%54#0,awst_tmp%3#0,tmp%48#0,tmp%51#0                                                                                                                                                                                                                                                                                                                 arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    uncover 3                                                                                                    //                                                                                        load tmp%54#0 from l-stack (no copy)                                                                                                                        awst_tmp%3#0,tmp%48#0,tmp%51#0,tmp%54#0                                                                                                                                                                                                                                                                                                                 arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    callsub burn                                                                                                 //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    int 1                                                                                                        //                                                                                                                                                                                                                                                    1                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155
    return                                                                                                       //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": "... amm/contract.py:149-155

main_swap_route@8:
    txn OnCompletion                                                                                             //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    //                                                                                                           virtual: store tmp%55#0 to l-stack (no copy)                                              tmp%55#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    //                                                                                                           virtual: load tmp%55#0 from l-stack (no copy)                                             tmp%55#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    //                                                                                                           virtual: store tmp%56#0 to l-stack (no copy)                                              tmp%56#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    //                                                                                                           virtual: load tmp%56#0 from l-stack (no copy)                                             tmp%56#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    assert // OnCompletion is NoOp                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    //                                                                                                           virtual: store tmp%57#0 to l-stack (no copy)                                              tmp%57#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    //                                                                                                           virtual: load tmp%57#0 from l-stack (no copy)                                             tmp%57#0                                                                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    assert // is not creating                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    txn GroupIndex                                                                                               //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%58#0 to l-stack (no copy)                                              tmp%58#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%58#0 from l-stack (no copy)                                             tmp%58#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int 1                                                                                                        //                                                                                                                                                                                                                                                    tmp%58#0,1                                                                                                                                                                                                                                                                                                                                              class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    -                                                                                                            //                                                                                                                                                                                                                                                    {-}                                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store awst_tmp%4#0 to l-stack (no copy)                                          awst_tmp%4#0                                                                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    dup                                                                                                          //                                                                                        load awst_tmp%4#0 from l-stack (copy)                                                                                                                       awst_tmp%4#0,awst_tmp%4#0                                                                                                                                                                                                                                                                                                                               class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    gtxns TypeEnum                                                                                               //                                                                                                                                                                                                                                                    awst_tmp%4#0,{gtxns}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%59#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%59#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%59#0 from l-stack (no copy)                                             awst_tmp%4#0,tmp%59#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int axfer                                                                                                    //                                                                                                                                                                                                                                                    awst_tmp%4#0,tmp%59#0,axfer                                                                                                                                                                                                                                                                                                                             class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    ==                                                                                                           //                                                                                                                                                                                                                                                    awst_tmp%4#0,{==}                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%60#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%60#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%60#0 from l-stack (no copy)                                             awst_tmp%4#0,tmp%60#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // transaction type is axfer                                                                          //                                                                                                                                                                                                                                                    awst_tmp%4#0                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 1                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%4#0,{txna}                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%61#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%61#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%61#0 from l-stack (no copy)                                             awst_tmp%4#0,tmp%61#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%4#0,{btoi}                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%62#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%62#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%62#0 from l-stack (no copy)                                             awst_tmp%4#0,tmp%62#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%4#0,{txnas}                                                                                                                                                                                                                                                                                                                                    class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%63#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%63#0                                                                                                                                                                                                                                                                                                                                                                                          class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txna ApplicationArgs 2                                                                                       //                                                                                                                                                                                                                                                    awst_tmp%4#0,tmp%63#0,{txna}                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%64#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%63#0,tmp%64#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%64#0 from l-stack (no copy)                                             awst_tmp%4#0,tmp%63#0,tmp%64#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    btoi                                                                                                         //                                                                                                                                                                                                                                                    awst_tmp%4#0,tmp%63#0,{btoi}                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%65#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%63#0,tmp%65#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%65#0 from l-stack (no copy)                                             awst_tmp%4#0,tmp%63#0,tmp%65#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txnas Assets                                                                                                 //                                                                                                                                                                                                                                                    awst_tmp%4#0,tmp%63#0,{txnas}                                                                                                                                                                                                                                                                                                                           class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%66#0 to l-stack (no copy)                                              awst_tmp%4#0,tmp%63#0,tmp%66#0                                                                                                                                                                                                                                                                                                                                                                                 class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    uncover 2                                                                                                    //                                                                                        load awst_tmp%4#0 from l-stack (no copy)                                                                                                                    tmp%63#0,tmp%66#0,awst_tmp%4#0                                                                                                                                                                                                                                                                                                                          arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    uncover 2                                                                                                    //                                                                                        load tmp%63#0 from l-stack (no copy)                                                                                                                        tmp%66#0,awst_tmp%4#0,tmp%63#0                                                                                                                                                                                                                                                                                                                          arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    uncover 2                                                                                                    //                                                                                        load tmp%66#0 from l-stack (no copy)                                                                                                                        awst_tmp%4#0,tmp%63#0,tmp%66#0                                                                                                                                                                                                                                                                                                                          arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    callsub swap                                                                                                 //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    int 1                                                                                                        //                                                                                                                                                                                                                                                    1                                                                                                                                                                                                                                                                                                                                                       arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211
    return                                                                                                       //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)                 amm/contract.py:206-211

main_bare_routing@11:
    txn OnCompletion                                                                                             //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%67#0 to l-stack (no copy)                                              tmp%67#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%67#0 from l-stack (no copy)                                             tmp%67#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store not%tmp%67#0 to l-stack (no copy)                                          not%tmp%67#0                                                                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load not%tmp%67#0 from l-stack (no copy)                                         not%tmp%67#0                                                                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // reject transaction                                                                                 //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    txn ApplicationID                                                                                            //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%68#0 to l-stack (no copy)                                              tmp%68#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%68#0 from l-stack (no copy)                                             tmp%68#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    !                                                                                                            //                                                                                                                                                                                                                                                    {!}                                                                                                                                                                                                                                                                                                                                                     class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: store tmp%69#0 to l-stack (no copy)                                              tmp%69#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    //                                                                                                           virtual: load tmp%69#0 from l-stack (no copy)                                             tmp%69#0                                                                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    assert // is creating                                                                                        //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    int 1                                                                                                        //                                                                                                                                                                                                                                                    1                                                                                                                                                                                                                                                                                                                                                       class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27
    return                                                                                                       //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class ConstantProductAMM(ARC4Contract):                                                              amm/contract.py:27


// examples.amm.contract.ConstantProductAMM.set_governor(new_governor: bytes) -> void:
set_governor:
    proto 1 0                                                                                                    //                                                                                                                                                                                                                                                    () new_governor#0 |                                                                                                                                                                                                                                                                                                                                    @arc4.abimethod()\ndef set_governor(self, new_governor: Account) -> None:                            amm/contract.py:43-44

set_governor_block@0:
    callsub _check_is_governor                                                                                   //                                                                                                                                                                                                                                                    () new_governor#0 |                                                                                                                                                                                                                                                                                                                                    self._check_is_governor()                                                                            amm/contract.py:46
    byte "governor"                                                                                              //                                                                                                                                                                                                                                                    () new_governor#0 | "governor"                                                                                                                                                                                                                                                                                                                         self.governor                                                                                        amm/contract.py:47
    frame_dig -1                                                                                                 //                                                                                        load new_governor#0 from parameters                                                                                                                         () new_governor#0 | "governor",new_governor#0                                                                                                                                                                                                                                                                                                          self.governor = new_governor                                                                         amm/contract.py:47
    app_global_put                                                                                               //                                                                                                                                                                                                                                                    () new_governor#0 |                                                                                                                                                                                                                                                                                                                                    self.governor = new_governor                                                                         amm/contract.py:47
    retsub                                                                                                       //


// examples.amm.contract.ConstantProductAMM._check_is_governor() -> void:
_check_is_governor:
    proto 0 0                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _check_is_governor(self) -> None:                                                   amm/contract.py:264-265

_check_is_governor_block@0:
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   Txn.sender                                                                                           amm/contract.py:267
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        Txn.sender                                                                                           amm/contract.py:267
    int 0                                                                                                        //                                                                                                                                                                                                                                                    tmp%0#0,0                                                                                                                                                                                                                                                                                                                                               self.governor                                                                                        amm/contract.py:267
    byte "governor"                                                                                              //                                                                                                                                                                                                                                                    tmp%0#0,0,"governor"                                                                                                                                                                                                                                                                                                                                    self.governor                                                                                        amm/contract.py:267
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    tmp%0#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                     self.governor                                                                                        amm/contract.py:267
    //                                                                                                           virtual: store governor_exists%0#0 to l-stack (no copy)                                   tmp%0#0,governor_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                              self.governor                                                                                        amm/contract.py:267
    //                                                                                                           virtual: store governor_value%0#0 to l-stack (no copy)                                    tmp%0#0,governor_value%0#0,governor_exists%0#0                                                                                                                                                                                                                                                                                                                                                                 self.governor                                                                                        amm/contract.py:267
    //                                                                                                           virtual: load governor_exists%0#0 from l-stack (no copy)                                  tmp%0#0,governor_value%0#0,governor_exists%0#0                                                                                                                                                                                                                                                                                                                                                                 self.governor                                                                                        amm/contract.py:267
    assert // check governor exists                                                                              //                                                                                                                                                                                                                                                    tmp%0#0,governor_value%0#0                                                                                                                                                                                                                                                                                                                              self.governor                                                                                        amm/contract.py:267
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              governor_value%0#0,tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                     Txn.sender == self.governor                                                                          amm/contract.py:267
    //                                                                                                           virtual: load governor_value%0#0 from l-stack (no copy)                                   tmp%0#0,governor_value%0#0                                                                                                                                                                                                                                                                                                                                                                                     Txn.sender == self.governor                                                                          amm/contract.py:267
    ==                                                                                                           //                                                                                                                                                                                                                                                    {==}                                                                                                                                                                                                                                                                                                                                                    Txn.sender == self.governor                                                                          amm/contract.py:267
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               tmp%1#0                                                                                                                                                                                                                                                                                                                                                                                                        Txn.sender == self.governor                                                                          amm/contract.py:267
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              tmp%1#0                                                                                                                                                                                                                                                                                                                                                                                                        assert (\nTxn.sender == self.governor\n), "Only the account set in global_state.governor may call... amm/contract.py:266-268
    assert // Only the account set in global_state.governor may call this method                                 //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            assert (\nTxn.sender == self.governor\n), "Only the account set in global_state.governor may call... amm/contract.py:266-268
    retsub                                                                                                       //


// examples.amm.contract.ConstantProductAMM.bootstrap(seed: uint64, a_asset: uint64, b_asset: uint64) -> bytes:
bootstrap:
    proto 3 1                                                                                                    //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        @arc4.abimethod()\ndef bootstrap(\nself, seed: gtxn.PaymentTransaction, a_asset: Asset, b_asset: ... amm/contract.py:49-52

bootstrap_block@0:
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                                      self.pool_token                                                                                      amm/contract.py:68
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0,"pool_token"                                                                                                                                                                                                                                                                                                         self.pool_token                                                                                      amm/contract.py:68
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                            self.pool_token                                                                                      amm/contract.py:68
    //                                                                                                           virtual: store pool_token_exists%0#0 to l-stack (no copy)                                 () seed#0,a_asset#0,b_asset#0 | pool_token_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                   self.pool_token                                                                                      amm/contract.py:68
    //                                                                                                           virtual: store pool_token_value%0#0 to l-stack (no copy)                                  () seed#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:68
    //                                                                                                           virtual: load pool_token_exists%0#0 from l-stack (no copy)                                () seed#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:68
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | pool_token_value%0#0                                                                                                                                                                                                                                                                                                   self.pool_token                                                                                      amm/contract.py:68
    //                                                                                                           virtual: load pool_token_value%0#0 from l-stack (no copy)                                 () seed#0,a_asset#0,b_asset#0 | pool_token_value%0#0                                                                                                                                                                                                                                                                                                                                                          not self.pool_token                                                                                  amm/contract.py:68
    !                                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {!}                                                                                                                                                                                                                                                                                                                    not self.pool_token                                                                                  amm/contract.py:68
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                                       not self.pool_token                                                                                  amm/contract.py:68
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                                       assert not self.pool_token, "application has already been bootstrapped"                              amm/contract.py:68
    assert // application has already been bootstrapped                                                          //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        assert not self.pool_token, "application has already been bootstrapped"                              amm/contract.py:68
    callsub _check_is_governor                                                                                   //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        self._check_is_governor()                                                                            amm/contract.py:69
    global GroupSize                                                                                             //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {global}                                                                                                                                                                                                                                                                                                               Global.group_size                                                                                    amm/contract.py:70
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                                                       Global.group_size                                                                                    amm/contract.py:70
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                                                       Global.group_size == 2, "group size not 2"                                                           amm/contract.py:70
    int 2                                                                                                        //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | tmp%1#0,2                                                                                                                                                                                                                                                                                                              2                                                                                                    amm/contract.py:70
    ==                                                                                                           //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                                                   Global.group_size == 2, "group size not 2"                                                           amm/contract.py:70
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                                                       Global.group_size == 2, "group size not 2"                                                           amm/contract.py:70
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                                                       assert Global.group_size == 2, "group size not 2"                                                    amm/contract.py:70
    assert // group size not 2                                                                                   //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        assert Global.group_size == 2, "group size not 2"                                                    amm/contract.py:70
    frame_dig -3                                                                                                 //                                                                                        load seed#0 from parameters                                                                                                                                 () seed#0,a_asset#0,b_asset#0 | seed#0                                                                                                                                                                                                                                                                                                                 seed.receiver                                                                                        amm/contract.py:71
    gtxns Receiver                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                                                seed.receiver                                                                                        amm/contract.py:71
    //                                                                                                           virtual: store tmp%3#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%3#0                                                                                                                                                                                                                                                                                                                                                                       seed.receiver                                                                                        amm/contract.py:71
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | tmp%3#0,{global}                                                                                                                                                                                                                                                                                                       Global.current_application_address                                                                   amm/contract.py:71
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%3#0,tmp%4#0                                                                                                                                                                                                                                                                                                                                                               Global.current_application_address                                                                   amm/contract.py:71
    //                                                                                                           virtual: load tmp%3#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%4#0,tmp%3#0                                                                                                                                                                                                                                                                                                                                                               seed.receiver == Global.current_application_address, "receiver not app address"                      amm/contract.py:71
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%3#0,tmp%4#0                                                                                                                                                                                                                                                                                                                                                               seed.receiver == Global.current_application_address, "receiver not app address"                      amm/contract.py:71
    ==                                                                                                           //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                                                   seed.receiver == Global.current_application_address, "receiver not app address"                      amm/contract.py:71
    //                                                                                                           virtual: store tmp%5#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%5#0                                                                                                                                                                                                                                                                                                                                                                       seed.receiver == Global.current_application_address, "receiver not app address"                      amm/contract.py:71
    //                                                                                                           virtual: load tmp%5#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%5#0                                                                                                                                                                                                                                                                                                                                                                       assert seed.receiver == Global.current_application_address, "receiver not app address"               amm/contract.py:71
    assert // receiver not app address                                                                           //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        assert seed.receiver == Global.current_application_address, "receiver not app address"               amm/contract.py:71
    frame_dig -3                                                                                                 //                                                                                        load seed#0 from parameters                                                                                                                                 () seed#0,a_asset#0,b_asset#0 | seed#0                                                                                                                                                                                                                                                                                                                 seed.amount                                                                                          amm/contract.py:73
    gtxns Amount                                                                                                 //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                                                seed.amount                                                                                          amm/contract.py:73
    //                                                                                                           virtual: store tmp%6#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                                                                                                       seed.amount                                                                                          amm/contract.py:73
    //                                                                                                           virtual: load tmp%6#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                                                                                                       seed.amount >= 300_000, "amount minimum not met"  # 0.3 Algos                                        amm/contract.py:73
    int 300000                                                                                                   //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | tmp%6#0,300000                                                                                                                                                                                                                                                                                                         300_000                                                                                              amm/contract.py:73
    >=                                                                                                           //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {>=}                                                                                                                                                                                                                                                                                                                   seed.amount >= 300_000, "amount minimum not met"  # 0.3 Algos                                        amm/contract.py:73
    //                                                                                                           virtual: store tmp%7#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%7#0                                                                                                                                                                                                                                                                                                                                                                       seed.amount >= 300_000, "amount minimum not met"  # 0.3 Algos                                        amm/contract.py:73
    //                                                                                                           virtual: load tmp%7#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%7#0                                                                                                                                                                                                                                                                                                                                                                       assert seed.amount >= 300_000, "amount minimum not met"                                              amm/contract.py:73
    assert // amount minimum not met                                                                             //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        assert seed.amount >= 300_000, "amount minimum not met"                                              amm/contract.py:73
    frame_dig -2                                                                                                 //                                                                                        load a_asset#0 from parameters                                                                                                                              () seed#0,a_asset#0,b_asset#0 | a_asset#0                                                                                                                                                                                                                                                                                                              a_asset.id < b_asset.id, "asset a must be less than asset b"                                         amm/contract.py:74
    frame_dig -1                                                                                                 //                                                                                        load b_asset#0 from parameters                                                                                                                              () seed#0,a_asset#0,b_asset#0 | a_asset#0,b_asset#0                                                                                                                                                                                                                                                                                                    a_asset.id < b_asset.id, "asset a must be less than asset b"                                         amm/contract.py:74
    <                                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {<}                                                                                                                                                                                                                                                                                                                    a_asset.id < b_asset.id, "asset a must be less than asset b"                                         amm/contract.py:74
    //                                                                                                           virtual: store tmp%8#0 to l-stack (no copy)                                               () seed#0,a_asset#0,b_asset#0 | tmp%8#0                                                                                                                                                                                                                                                                                                                                                                       a_asset.id < b_asset.id, "asset a must be less than asset b"                                         amm/contract.py:74
    //                                                                                                           virtual: load tmp%8#0 from l-stack (no copy)                                              () seed#0,a_asset#0,b_asset#0 | tmp%8#0                                                                                                                                                                                                                                                                                                                                                                       assert a_asset.id < b_asset.id, "asset a must be less than asset b"                                  amm/contract.py:74
    assert // asset a must be less than asset b                                                                  //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        assert a_asset.id < b_asset.id, "asset a must be less than asset b"                                  amm/contract.py:74
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | "asset_a"                                                                                                                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:75
    frame_dig -2                                                                                                 //                                                                                        load a_asset#0 from parameters                                                                                                                              () seed#0,a_asset#0,b_asset#0 | "asset_a",a_asset#0                                                                                                                                                                                                                                                                                                    self.asset_a = a_asset                                                                               amm/contract.py:75
    app_global_put                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        self.asset_a = a_asset                                                                               amm/contract.py:75
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | "asset_b"                                                                                                                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:76
    frame_dig -1                                                                                                 //                                                                                        load b_asset#0 from parameters                                                                                                                              () seed#0,a_asset#0,b_asset#0 | "asset_b",b_asset#0                                                                                                                                                                                                                                                                                                    self.asset_b = b_asset                                                                               amm/contract.py:76
    app_global_put                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        self.asset_b = b_asset                                                                               amm/contract.py:76
    callsub _create_pool_token                                                                                   //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {_create_pool_token}                                                                                                                                                                                                                                                                                                   self._create_pool_token()                                                                            amm/contract.py:77
    //                                                                                                           virtual: store new_state_value%0#0 to l-stack (no copy)                                   () seed#0,a_asset#0,b_asset#0 | new_state_value%0#0                                                                                                                                                                                                                                                                                                                                                           self._create_pool_token()                                                                            amm/contract.py:77
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | new_state_value%0#0,"pool_token"                                                                                                                                                                                                                                                                                       self.pool_token                                                                                      amm/contract.py:77
    swap                                                                                                         //                                                                                        load new_state_value%0#0 from l-stack (no copy)                                                                                                             () seed#0,a_asset#0,b_asset#0 | "pool_token",new_state_value%0#0                                                                                                                                                                                                                                                                                       self.pool_token = self._create_pool_token()                                                          amm/contract.py:77
    app_global_put                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        self.pool_token = self._create_pool_token()                                                          amm/contract.py:77
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                                      self.asset_a                                                                                         amm/contract.py:79
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0,"asset_a"                                                                                                                                                                                                                                                                                                            self.asset_a                                                                                         amm/contract.py:79
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                            self.asset_a                                                                                         amm/contract.py:79
    //                                                                                                           virtual: store asset_a_exists%0#0 to l-stack (no copy)                                    () seed#0,a_asset#0,b_asset#0 | asset_a_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                      self.asset_a                                                                                         amm/contract.py:79
    //                                                                                                           virtual: store asset_a_value%0#0 to l-stack (no copy)                                     () seed#0,a_asset#0,b_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                                          self.asset_a                                                                                         amm/contract.py:79
    //                                                                                                           virtual: load asset_a_exists%0#0 from l-stack (no copy)                                   () seed#0,a_asset#0,b_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                                          self.asset_a                                                                                         amm/contract.py:79
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | asset_a_value%0#0                                                                                                                                                                                                                                                                                                      self.asset_a                                                                                         amm/contract.py:79
    //                                                                                                           virtual: load asset_a_value%0#0 from l-stack (no copy)                                    () seed#0,a_asset#0,b_asset#0 | asset_a_value%0#0                                                                                                                                                                                                                                                                                                                                                             self._do_opt_in(self.asset_a)                                                                        amm/contract.py:79
    callsub _do_opt_in                                                                                           //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        self._do_opt_in(self.asset_a)                                                                        amm/contract.py:79
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                                      self.asset_b                                                                                         amm/contract.py:80
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0,"asset_b"                                                                                                                                                                                                                                                                                                            self.asset_b                                                                                         amm/contract.py:80
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                            self.asset_b                                                                                         amm/contract.py:80
    //                                                                                                           virtual: store asset_b_exists%0#0 to l-stack (no copy)                                    () seed#0,a_asset#0,b_asset#0 | asset_b_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                      self.asset_b                                                                                         amm/contract.py:80
    //                                                                                                           virtual: store asset_b_value%0#0 to l-stack (no copy)                                     () seed#0,a_asset#0,b_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                                          self.asset_b                                                                                         amm/contract.py:80
    //                                                                                                           virtual: load asset_b_exists%0#0 from l-stack (no copy)                                   () seed#0,a_asset#0,b_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                                          self.asset_b                                                                                         amm/contract.py:80
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | asset_b_value%0#0                                                                                                                                                                                                                                                                                                      self.asset_b                                                                                         amm/contract.py:80
    //                                                                                                           virtual: load asset_b_value%0#0 from l-stack (no copy)                                    () seed#0,a_asset#0,b_asset#0 | asset_b_value%0#0                                                                                                                                                                                                                                                                                                                                                             self._do_opt_in(self.asset_b)                                                                        amm/contract.py:80
    callsub _do_opt_in                                                                                           //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                        self._do_opt_in(self.asset_b)                                                                        amm/contract.py:80
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                                      self.pool_token                                                                                      amm/contract.py:81
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | 0,"pool_token"                                                                                                                                                                                                                                                                                                         self.pool_token                                                                                      amm/contract.py:81
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                            self.pool_token                                                                                      amm/contract.py:81
    //                                                                                                           virtual: store pool_token_exists%1#0 to l-stack (no copy)                                 () seed#0,a_asset#0,b_asset#0 | pool_token_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                   self.pool_token                                                                                      amm/contract.py:81
    //                                                                                                           virtual: store pool_token_value%1#0 to l-stack (no copy)                                  () seed#0,a_asset#0,b_asset#0 | pool_token_value%1#0,pool_token_exists%1#0                                                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:81
    //                                                                                                           virtual: load pool_token_exists%1#0 from l-stack (no copy)                                () seed#0,a_asset#0,b_asset#0 | pool_token_value%1#0,pool_token_exists%1#0                                                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:81
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | pool_token_value%1#0                                                                                                                                                                                                                                                                                                   self.pool_token                                                                                      amm/contract.py:81
    //                                                                                                           virtual: load pool_token_value%1#0 from l-stack (no copy)                                 () seed#0,a_asset#0,b_asset#0 | pool_token_value%1#0                                                                                                                                                                                                                                                                                                                                                          arc4.UInt64(self.pool_token.id)                                                                      amm/contract.py:81
    itob                                                                                                         //                                                                                                                                                                                                                                                    () seed#0,a_asset#0,b_asset#0 | {itob}                                                                                                                                                                                                                                                                                                                 arc4.UInt64(self.pool_token.id)                                                                      amm/contract.py:81
    //                                                                                                           virtual: store val_as_bytes%0#0 to l-stack (no copy)                                      () seed#0,a_asset#0,b_asset#0 | val_as_bytes%0#0                                                                                                                                                                                                                                                                                                                                                              arc4.UInt64(self.pool_token.id)                                                                      amm/contract.py:81
    //                                                                                                           virtual: load val_as_bytes%0#0 from l-stack (no copy)                                     () seed#0,a_asset#0,b_asset#0 | val_as_bytes%0#0                                                                                                                                                                                                                                                                                                                                                              return arc4.UInt64(self.pool_token.id)                                                               amm/contract.py:81
    retsub                                                                                                       //                                                                                                                                                                                                                                                    val_as_bytes%0#0                                                                                                                                                                                                                                                                                                                                        return arc4.UInt64(self.pool_token.id)                                                               amm/contract.py:81


// examples.amm.contract.ConstantProductAMM._create_pool_token() -> uint64:
_create_pool_token:
    proto 0 1                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _create_pool_token(self) -> Asset:                                                  amm/contract.py:270-271

_create_pool_token_block@0:
    itxn_begin                                                                                                   //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            itxn.AssetConfig(\nasset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,\n... amm/contract.py:273-282
    int 0                                                                                                        //                                                                                                                                                                                                                                                    0                                                                                                                                                                                                                                                                                                                                                       self.asset_a                                                                                         amm/contract.py:274
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    0,"asset_a"                                                                                                                                                                                                                                                                                                                                             self.asset_a                                                                                         amm/contract.py:274
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                             self.asset_a                                                                                         amm/contract.py:274
    //                                                                                                           virtual: store asset_a_exists%0#0 to l-stack (no copy)                                    asset_a_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                                       self.asset_a                                                                                         amm/contract.py:274
    //                                                                                                           virtual: store asset_a_value%0#0 to l-stack (no copy)                                     asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:274
    //                                                                                                           virtual: load asset_a_exists%0#0 from l-stack (no copy)                                   asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:274
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    asset_a_value%0#0                                                                                                                                                                                                                                                                                                                                       self.asset_a                                                                                         amm/contract.py:274
    //                                                                                                           virtual: load asset_a_value%0#0 from l-stack (no copy)                                    asset_a_value%0#0                                                                                                                                                                                                                                                                                                                                                                                              self.asset_a.unit_name                                                                               amm/contract.py:274
    asset_params_get AssetUnitName                                                                               //                                                                                                                                                                                                                                                    {asset_params_get}.0,{asset_params_get}.1                                                                                                                                                                                                                                                                                                               self.asset_a.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: store check%0#0 to l-stack (no copy)                                             check%0#0,{asset_params_get}.0                                                                                                                                                                                                                                                                                                                                                                                 self.asset_a.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: store value%0#0 to l-stack (no copy)                                             value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.asset_a.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: load check%0#0 from l-stack (no copy)                                            value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.asset_a.unit_name                                                                               amm/contract.py:274
    assert // asset exists                                                                                       //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               self.asset_a.unit_name                                                                               amm/contract.py:274
    byte "DPT-"                                                                                                  //                                                                                                                                                                                                                                                    value%0#0,"DPT-"                                                                                                                                                                                                                                                                                                                                        b"DPT-"                                                                                              amm/contract.py:274
    swap                                                                                                         //                                                                                        load value%0#0 from l-stack (no copy)                                                                                                                       "DPT-",value%0#0                                                                                                                                                                                                                                                                                                                                        b"DPT-" + self.asset_a.unit_name                                                                     amm/contract.py:274
    concat                                                                                                       //                                                                                                                                                                                                                                                    {concat}                                                                                                                                                                                                                                                                                                                                                b"DPT-" + self.asset_a.unit_name                                                                     amm/contract.py:274
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        b"DPT-" + self.asset_a.unit_name                                                                     amm/contract.py:274
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        b"DPT-" + self.asset_a.unit_name + b"-"                                                              amm/contract.py:274
    byte "-"                                                                                                     //                                                                                                                                                                                                                                                    tmp%0#0,"-"                                                                                                                                                                                                                                                                                                                                             b"-"                                                                                                 amm/contract.py:274
    concat                                                                                                       //                                                                                                                                                                                                                                                    {concat}                                                                                                                                                                                                                                                                                                                                                b"DPT-" + self.asset_a.unit_name + b"-"                                                              amm/contract.py:274
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               tmp%1#0                                                                                                                                                                                                                                                                                                                                                                                                        b"DPT-" + self.asset_a.unit_name + b"-"                                                              amm/contract.py:274
    int 0                                                                                                        //                                                                                                                                                                                                                                                    tmp%1#0,0                                                                                                                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:274
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    tmp%1#0,0,"asset_b"                                                                                                                                                                                                                                                                                                                                     self.asset_b                                                                                         amm/contract.py:274
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    tmp%1#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                     self.asset_b                                                                                         amm/contract.py:274
    //                                                                                                           virtual: store asset_b_exists%0#0 to l-stack (no copy)                                    tmp%1#0,asset_b_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:274
    //                                                                                                           virtual: store asset_b_value%0#0 to l-stack (no copy)                                     tmp%1#0,asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:274
    //                                                                                                           virtual: load asset_b_exists%0#0 from l-stack (no copy)                                   tmp%1#0,asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:274
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    tmp%1#0,asset_b_value%0#0                                                                                                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:274
    //                                                                                                           virtual: load asset_b_value%0#0 from l-stack (no copy)                                    tmp%1#0,asset_b_value%0#0                                                                                                                                                                                                                                                                                                                                                                                      self.asset_b.unit_name                                                                               amm/contract.py:274
    asset_params_get AssetUnitName                                                                               //                                                                                                                                                                                                                                                    tmp%1#0,{asset_params_get}.0,{asset_params_get}.1                                                                                                                                                                                                                                                                                                       self.asset_b.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: store check%1#0 to l-stack (no copy)                                             tmp%1#0,check%1#0,{asset_params_get}.0                                                                                                                                                                                                                                                                                                                                                                         self.asset_b.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: store value%1#0 to l-stack (no copy)                                             tmp%1#0,value%1#0,check%1#0                                                                                                                                                                                                                                                                                                                                                                                    self.asset_b.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: load check%1#0 from l-stack (no copy)                                            tmp%1#0,value%1#0,check%1#0                                                                                                                                                                                                                                                                                                                                                                                    self.asset_b.unit_name                                                                               amm/contract.py:274
    assert // asset exists                                                                                       //                                                                                                                                                                                                                                                    tmp%1#0,value%1#0                                                                                                                                                                                                                                                                                                                                       self.asset_b.unit_name                                                                               amm/contract.py:274
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              value%1#0,tmp%1#0                                                                                                                                                                                                                                                                                                                                                                                              b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name                                     amm/contract.py:274
    //                                                                                                           virtual: load value%1#0 from l-stack (no copy)                                            tmp%1#0,value%1#0                                                                                                                                                                                                                                                                                                                                                                                              b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name                                     amm/contract.py:274
    concat                                                                                                       //                                                                                                                                                                                                                                                    {concat}                                                                                                                                                                                                                                                                                                                                                b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name                                     amm/contract.py:274
    //                                                                                                           virtual: store inner_txn_params%0%%param_ConfigAssetName_idx_0#0 to l-stack (no copy)     inner_txn_params%0%%param_ConfigAssetName_idx_0#0                                                                                                                                                                                                                                                                                                                                                              b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name                                     amm/contract.py:274
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,{global}                                                                                                                                                                                                                                                                                              Global.current_application_address                                                                   amm/contract.py:278
    //                                                                                                           virtual: store inner_txn_params%0%%param_ConfigAssetManager_idx_0#0 to l-stack (no copy)  inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0                                                                                                                                                                                                                                                                                                         Global.current_application_address                                                                   amm/contract.py:278
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,{global}                                                                                                                                                                                                                                         Global.current_application_address                                                                   amm/contract.py:279
    //                                                                                                           virtual: store inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0 to l-stack (no copy)  inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0                                                                                                                                                                                                                                                    Global.current_application_address                                                                   amm/contract.py:279
    int 0                                                                                                        //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0,0                                                                                                                                                                                           0                                                                                                    amm/contract.py:280
    itxn_field Fee                                                                                               //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0
    //                                                                                                           virtual: load inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0 from l-stack (no copy) inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0
    itxn_field ConfigAssetReserve                                                                                //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0
    //                                                                                                           virtual: load inner_txn_params%0%%param_ConfigAssetManager_idx_0#0 from l-stack (no copy) inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0
    itxn_field ConfigAssetManager                                                                                //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0
    int 3                                                                                                        //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,3                                                                                                                                                                                                                                                                                                     3                                                                                                    amm/contract.py:277
    itxn_field ConfigAssetDecimals                                                                               //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0
    int 10000000000                                                                                              //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,10000000000                                                                                                                                                                                                                                                                                           TOTAL_SUPPLY                                                                                         amm/contract.py:276
    itxn_field ConfigAssetTotal                                                                                  //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0
    byte "dbt"                                                                                                   //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0,"dbt"                                                                                                                                                                                                                                                                                                 b"dbt"                                                                                               amm/contract.py:275
    itxn_field ConfigAssetUnitName                                                                               //                                                                                                                                                                                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0
    //                                                                                                           virtual: load inner_txn_params%0%%param_ConfigAssetName_idx_0#0 from l-stack (no copy)    inner_txn_params%0%%param_ConfigAssetName_idx_0#0
    itxn_field ConfigAssetName                                                                                   //
    int acfg                                                                                                     //                                                                                                                                                                                                                                                    acfg                                                                                                                                                                                                                                                                                                                                                    itxn.AssetConfig                                                                                     amm/contract.py:273
    itxn_field TypeEnum                                                                                          //
    itxn_submit                                                                                                  //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            itxn.AssetConfig(\nasset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,\n... amm/contract.py:273-282
    itxn CreatedAssetID                                                                                          //                                                                                                                                                                                                                                                    {itxn}                                                                                                                                                                                                                                                                                                                                                  itxn.AssetConfig(\nasset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,\n... amm/contract.py:273-282
    //                                                                                                           virtual: store submit_result_0%0%%CreatedAssetID#0 to l-stack (no copy)                   submit_result_0%0%%CreatedAssetID#0                                                                                                                                                                                                                                                                                                                                                                            itxn.AssetConfig(\nasset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,\n... amm/contract.py:273-282
    //                                                                                                           virtual: load submit_result_0%0%%CreatedAssetID#0 from l-stack (no copy)                  submit_result_0%0%%CreatedAssetID#0                                                                                                                                                                                                                                                                                                                                                                            return (\nitxn.AssetConfig(\nasset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.un... amm/contract.py:272-284
    retsub                                                                                                       //                                                                                                                                                                                                                                                    submit_result_0%0%%CreatedAssetID#0                                                                                                                                                                                                                                                                                                                     return (\nitxn.AssetConfig(\nasset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.un... amm/contract.py:272-284


// examples.amm.contract.ConstantProductAMM._do_opt_in(asset: uint64) -> void:
_do_opt_in:
    proto 1 0                                                                                                    //                                                                                                                                                                                                                                                    () asset#0 |                                                                                                                                                                                                                                                                                                                                           @subroutine\ndef _do_opt_in(self, asset: Asset) -> None:                                             amm/contract.py:286-287

_do_opt_in_block@0:
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    () asset#0 | {global}                                                                                                                                                                                                                                                                                                                                  Global.current_application_address                                                                   amm/contract.py:289
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                          Global.current_application_address                                                                   amm/contract.py:289
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                          do_asset_transfer(\nreceiver=Global.current_application_address,\nasset=asset,\namount=UInt64(0),\n) amm/contract.py:288-292
    frame_dig -1                                                                                                 //                                                                                        load asset#0 from parameters                                                                                                                                () asset#0 | tmp%0#0,asset#0                                                                                                                                                                                                                                                                                                                           do_asset_transfer(\nreceiver=Global.current_application_address,\nasset=asset,\namount=UInt64(0),\n) amm/contract.py:288-292
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () asset#0 | tmp%0#0,asset#0,0                                                                                                                                                                                                                                                                                                                         UInt64(0)                                                                                            amm/contract.py:291
    callsub do_asset_transfer                                                                                    //                                                                                                                                                                                                                                                    () asset#0 |                                                                                                                                                                                                                                                                                                                                           do_asset_transfer(\nreceiver=Global.current_application_address,\nasset=asset,\namount=UInt64(0),\n) amm/contract.py:288-292
    retsub                                                                                                       //


// examples.amm.contract.do_asset_transfer(receiver: bytes, asset: uint64, amount: uint64) -> void:
do_asset_transfer:
    proto 3 0                                                                                                    //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |                                                                                                                                                                                                                                                                                                                       @subroutine\ndef do_asset_transfer(*, receiver: Account, asset: Asset, amount: UInt64) -> None:      amm/contract.py:359-360

do_asset_transfer_block@0:
    itxn_begin                                                                                                   //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |                                                                                                                                                                                                                                                                                                                       itxn.AssetTransfer(\nxfer_asset=asset,\nasset_amount=amount,\nasset_receiver=receiver,\nfee=0,\n)... amm/contract.py:361-366
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 | 0                                                                                                                                                                                                                                                                                                                     0                                                                                                    amm/contract.py:365
    itxn_field Fee                                                                                               //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |
    frame_dig -3                                                                                                 //                                                                                        load receiver#0 from parameters                                                                                                                             () receiver#0,asset#0,amount#0 | receiver#0
    itxn_field AssetReceiver                                                                                     //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |
    frame_dig -1                                                                                                 //                                                                                        load amount#0 from parameters                                                                                                                               () receiver#0,asset#0,amount#0 | amount#0
    itxn_field AssetAmount                                                                                       //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |
    frame_dig -2                                                                                                 //                                                                                        load asset#0 from parameters                                                                                                                                () receiver#0,asset#0,amount#0 | asset#0
    itxn_field XferAsset                                                                                         //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |
    int axfer                                                                                                    //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 | axfer                                                                                                                                                                                                                                                                                                                 itxn.AssetTransfer                                                                                   amm/contract.py:361
    itxn_field TypeEnum                                                                                          //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |
    itxn_submit                                                                                                  //                                                                                                                                                                                                                                                    () receiver#0,asset#0,amount#0 |                                                                                                                                                                                                                                                                                                                       itxn.AssetTransfer(\nxfer_asset=asset,\nasset_amount=amount,\nasset_receiver=receiver,\nfee=0,\n)... amm/contract.py:361-366
    retsub                                                                                                       //


// examples.amm.contract.ConstantProductAMM.mint(a_xfer: uint64, b_xfer: uint64, pool_asset: uint64, a_asset: uint64, b_asset: uint64) -> void:
mint:
    proto 5 0                                                                                                    //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                @arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": ... amm/contract.py:83-97

mint_block@0:
    callsub _check_bootstrapped                                                                                  //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                self._check_bootstrapped()                                                                           amm/contract.py:113
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                              \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0,"pool_token"                                                                                                                                                                                                                                                                                 \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                    \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    //                                                                                                           virtual: store pool_token_exists%0#0 to l-stack (no copy)                                 () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                           \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    //                                                                                                           virtual: store pool_token_value%0#0 to l-stack (no copy)                                  () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                            \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    //                                                                                                           virtual: load pool_token_exists%0#0 from l-stack (no copy)                                () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                            \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0                                                                                                                                                                                                                                                                           \nassert pool_asset == self.pool_token                                                               amm/contract.py:115-116
    frame_dig -3                                                                                                 //                                                                                        load pool_asset#0 from parameters                                                                                                                           () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_asset#0                                                                                                                                                                                                                                                              formed mint\nassert pool_asset == self.pool_token                                                    amm/contract.py:115-116
    swap                                                                                                         //                                                                                        load pool_token_value%0#0 from l-stack (no copy)                                                                                                            () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_asset#0,pool_token_value%0#0                                                                                                                                                                                                                                                              formed mint\nassert pool_asset == self.pool_token                                                    amm/contract.py:115-116
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           formed mint\nassert pool_asset == self.pool_token                                                    amm/contract.py:115-116
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                               formed mint\nassert pool_asset == self.pool_token                                                    amm/contract.py:115-116
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                               # well-formed mint\nassert pool_asset == self.pool_token, "asset pool incorrect"                     amm/contract.py:115-116
    assert // asset pool incorrect                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                # well-formed mint\nassert pool_asset == self.pool_token, "asset pool incorrect"                     amm/contract.py:115-116
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:117
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0,"asset_a"                                                                                                                                                                                                                                                                                    self.asset_a                                                                                         amm/contract.py:117
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                    self.asset_a                                                                                         amm/contract.py:117
    //                                                                                                           virtual: store asset_a_exists%0#0 to l-stack (no copy)                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:117
    //                                                                                                           virtual: store asset_a_value%0#0 to l-stack (no copy)                                     () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                  self.asset_a                                                                                         amm/contract.py:117
    //                                                                                                           virtual: load asset_a_exists%0#0 from l-stack (no copy)                                   () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                  self.asset_a                                                                                         amm/contract.py:117
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0                                                                                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:117
    frame_dig -2                                                                                                 //                                                                                        load a_asset#0 from parameters                                                                                                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0,a_asset#0                                                                                                                                                                                                                                                                    a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:117
    swap                                                                                                         //                                                                                        load asset_a_value%0#0 from l-stack (no copy)                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_asset#0,asset_a_value%0#0                                                                                                                                                                                                                                                                    a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:117
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:117
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                               a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:117
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                               assert a_asset == self.asset_a, "asset a incorrect"                                                  amm/contract.py:117
    assert // asset a incorrect                                                                                  //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                assert a_asset == self.asset_a, "asset a incorrect"                                                  amm/contract.py:117
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:118
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0,"asset_b"                                                                                                                                                                                                                                                                                    self.asset_b                                                                                         amm/contract.py:118
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                    self.asset_b                                                                                         amm/contract.py:118
    //                                                                                                           virtual: store asset_b_exists%0#0 to l-stack (no copy)                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:118
    //                                                                                                           virtual: store asset_b_value%0#0 to l-stack (no copy)                                     () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                  self.asset_b                                                                                         amm/contract.py:118
    //                                                                                                           virtual: load asset_b_exists%0#0 from l-stack (no copy)                                   () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                  self.asset_b                                                                                         amm/contract.py:118
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0                                                                                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:118
    frame_dig -1                                                                                                 //                                                                                        load b_asset#0 from parameters                                                                                                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0,b_asset#0                                                                                                                                                                                                                                                                    b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:118
    swap                                                                                                         //                                                                                        load asset_b_value%0#0 from l-stack (no copy)                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_asset#0,asset_b_value%0#0                                                                                                                                                                                                                                                                    b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:118
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:118
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                               b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:118
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                               assert b_asset == self.asset_b, "asset b incorrect"                                                  amm/contract.py:118
    assert // asset b incorrect                                                                                  //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                assert b_asset == self.asset_b, "asset b incorrect"                                                  amm/contract.py:118
    frame_dig -5                                                                                                 //                                                                                        load a_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_xfer#0                                                                                                                                                                                                                                                                                       a_xfer.sender                                                                                        amm/contract.py:119
    gtxns Sender                                                                                                 //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                        a_xfer.sender                                                                                        amm/contract.py:119
    //                                                                                                           virtual: store tmp%3#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0                                                                                                                                                                                                                                                                                                                                               a_xfer.sender                                                                                        amm/contract.py:119
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0,{txn}                                                                                                                                                                                                                                                                                  Txn.sender                                                                                           amm/contract.py:119
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0,tmp%4#0                                                                                                                                                                                                                                                                                                                                       Txn.sender                                                                                           amm/contract.py:119
    //                                                                                                           virtual: load tmp%3#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%4#0,tmp%3#0                                                                                                                                                                                                                                                                                                                                       a_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:119
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0,tmp%4#0                                                                                                                                                                                                                                                                                                                                       a_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:119
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           a_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:119
    //                                                                                                           virtual: store tmp%5#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%5#0                                                                                                                                                                                                                                                                                                                                               a_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:119
    //                                                                                                           virtual: load tmp%5#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%5#0                                                                                                                                                                                                                                                                                                                                               assert a_xfer.sender == Txn.sender, "sender invalid"                                                 amm/contract.py:119
    assert // sender invalid                                                                                     //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                assert a_xfer.sender == Txn.sender, "sender invalid"                                                 amm/contract.py:119
    frame_dig -4                                                                                                 //                                                                                        load b_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_xfer#0                                                                                                                                                                                                                                                                                       b_xfer.sender                                                                                        amm/contract.py:120
    gtxns Sender                                                                                                 //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                        b_xfer.sender                                                                                        amm/contract.py:120
    //                                                                                                           virtual: store tmp%6#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                                                                               b_xfer.sender                                                                                        amm/contract.py:120
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,{txn}                                                                                                                                                                                                                                                                                  Txn.sender                                                                                           amm/contract.py:120
    //                                                                                                           virtual: store tmp%7#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%7#0                                                                                                                                                                                                                                                                                                                                       Txn.sender                                                                                           amm/contract.py:120
    //                                                                                                           virtual: load tmp%6#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%7#0,tmp%6#0                                                                                                                                                                                                                                                                                                                                       b_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:120
    //                                                                                                           virtual: load tmp%7#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%7#0                                                                                                                                                                                                                                                                                                                                       b_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:120
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           b_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:120
    //                                                                                                           virtual: store tmp%8#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%8#0                                                                                                                                                                                                                                                                                                                                               b_xfer.sender == Txn.sender, "sender invalid"                                                        amm/contract.py:120
    //                                                                                                           virtual: load tmp%8#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%8#0                                                                                                                                                                                                                                                                                                                                               assert b_xfer.sender == Txn.sender, "sender invalid"                                                 amm/contract.py:120
    assert // sender invalid                                                                                     //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                assert b_xfer.sender == Txn.sender, "sender invalid"                                                 amm/contract.py:120
    frame_dig -5                                                                                                 //                                                                                        load a_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_xfer#0                                                                                                                                                                                                                                                                                       a_xfer.asset_receiver                                                                                amm/contract.py:124
    gtxns AssetReceiver                                                                                          //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                        a_xfer.asset_receiver                                                                                amm/contract.py:124
    //                                                                                                           virtual: store tmp%9#0 to l-stack (no copy)                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%9#0                                                                                                                                                                                                                                                                                                                                               a_xfer.asset_receiver                                                                                amm/contract.py:124
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%9#0,{global}                                                                                                                                                                                                                                                                               Global.current_application_address                                                                   amm/contract.py:124
    //                                                                                                           virtual: store tmp%10#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%9#0,tmp%10#0                                                                                                                                                                                                                                                                                                                                      Global.current_application_address                                                                   amm/contract.py:124
    //                                                                                                           virtual: load tmp%9#0 from l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%10#0,tmp%9#0                                                                                                                                                                                                                                                                                                                                      a_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:124
    //                                                                                                           virtual: load tmp%10#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%9#0,tmp%10#0                                                                                                                                                                                                                                                                                                                                      a_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:124
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           a_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:124
    //                                                                                                           virtual: store tmp%11#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%11#0                                                                                                                                                                                                                                                                                                                                              a_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:124
    //                                                                                                           virtual: load tmp%11#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%11#0                                                                                                                                                                                                                                                                                                                                              # valid asset a xfer\nassert (\na_xfer.asset_receiver == Global.current_application_address\n), "... amm/contract.py:122-125
    assert // receiver not app address                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                # valid asset a xfer\nassert (\na_xfer.asset_receiver == Global.current_application_address\n), "... amm/contract.py:122-125
    frame_dig -5                                                                                                 //                                                                                        load a_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_xfer#0                                                                                                                                                                                                                                                                                       a_xfer.xfer_asset                                                                                    amm/contract.py:126
    gtxns XferAsset                                                                                              //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                        a_xfer.xfer_asset                                                                                    amm/contract.py:126
    //                                                                                                           virtual: store tmp%12#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0                                                                                                                                                                                                                                                                                                                                              a_xfer.xfer_asset                                                                                    amm/contract.py:126
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,0                                                                                                                                                                                                                                                                                     self.asset_a                                                                                         amm/contract.py:126
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,0,"asset_a"                                                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:126
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:126
    //                                                                                                           virtual: store asset_a_exists%1#0 to l-stack (no copy)                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,asset_a_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                     self.asset_a                                                                                         amm/contract.py:126
    //                                                                                                           virtual: store asset_a_value%1#0 to l-stack (no copy)                                     () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,asset_a_value%1#0,asset_a_exists%1#0                                                                                                                                                                                                                                                                                                         self.asset_a                                                                                         amm/contract.py:126
    //                                                                                                           virtual: load asset_a_exists%1#0 from l-stack (no copy)                                   () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,asset_a_value%1#0,asset_a_exists%1#0                                                                                                                                                                                                                                                                                                         self.asset_a                                                                                         amm/contract.py:126
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,asset_a_value%1#0                                                                                                                                                                                                                                                                     self.asset_a                                                                                         amm/contract.py:126
    //                                                                                                           virtual: load tmp%12#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%1#0,tmp%12#0                                                                                                                                                                                                                                                                                                                            a_xfer.xfer_asset == self.asset_a, "asset a incorrect"                                               amm/contract.py:126
    //                                                                                                           virtual: load asset_a_value%1#0 from l-stack (no copy)                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%12#0,asset_a_value%1#0                                                                                                                                                                                                                                                                                                                            a_xfer.xfer_asset == self.asset_a, "asset a incorrect"                                               amm/contract.py:126
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                           a_xfer.xfer_asset == self.asset_a, "asset a incorrect"                                               amm/contract.py:126
    //                                                                                                           virtual: store tmp%13#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%13#0                                                                                                                                                                                                                                                                                                                                              a_xfer.xfer_asset == self.asset_a, "asset a incorrect"                                               amm/contract.py:126
    //                                                                                                           virtual: load tmp%13#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%13#0                                                                                                                                                                                                                                                                                                                                              assert a_xfer.xfer_asset == self.asset_a, "asset a incorrect"                                        amm/contract.py:126
    assert // asset a incorrect                                                                                  //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                assert a_xfer.xfer_asset == self.asset_a, "asset a incorrect"                                        amm/contract.py:126
    frame_dig -5                                                                                                 //                                                                                        load a_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_xfer#0                                                                                                                                                                                                                                                                                       a_xfer.asset_amount                                                                                  amm/contract.py:127
    gtxns AssetAmount                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                        a_xfer.asset_amount                                                                                  amm/contract.py:127
    //                                                                                                           virtual: store tmp%14#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0                                                                                                                                                                                                                                                                                                                                              a_xfer.asset_amount                                                                                  amm/contract.py:127
    dup                                                                                                          //                                                                                        load tmp%14#0 from l-stack (copy)                                                                                                                           () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%14#0                                                                                                                                                                                                                                                                              assert a_xfer.asset_amount > 0, "amount minimum not met"                                             amm/contract.py:127
    assert // amount minimum not met                                                                             //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0                                                                                                                                                                                                                                                                                       assert a_xfer.asset_amount > 0, "amount minimum not met"                                             amm/contract.py:127
    frame_dig -4                                                                                                 //                                                                                        load b_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,b_xfer#0                                                                                                                                                                                                                                                                              b_xfer.asset_receiver                                                                                amm/contract.py:131
    gtxns AssetReceiver                                                                                          //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,{gtxns}                                                                                                                                                                                                                                                                               b_xfer.asset_receiver                                                                                amm/contract.py:131
    //                                                                                                           virtual: store tmp%16#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%16#0                                                                                                                                                                                                                                                                                                                                     b_xfer.asset_receiver                                                                                amm/contract.py:131
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%16#0,{global}                                                                                                                                                                                                                                                                     Global.current_application_address                                                                   amm/contract.py:131
    //                                                                                                           virtual: store tmp%17#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%16#0,tmp%17#0                                                                                                                                                                                                                                                                                                                            Global.current_application_address                                                                   amm/contract.py:131
    //                                                                                                           virtual: load tmp%16#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%17#0,tmp%16#0                                                                                                                                                                                                                                                                                                                            b_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:131
    //                                                                                                           virtual: load tmp%17#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%16#0,tmp%17#0                                                                                                                                                                                                                                                                                                                            b_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:131
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,{==}                                                                                                                                                                                                                                                                                  b_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:131
    //                                                                                                           virtual: store tmp%18#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%18#0                                                                                                                                                                                                                                                                                                                                     b_xfer.asset_receiver == Global.current_application_address                                          amm/contract.py:131
    //                                                                                                           virtual: load tmp%18#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%18#0                                                                                                                                                                                                                                                                                                                                     # valid asset b xfer\nassert (\nb_xfer.asset_receiver == Global.current_application_address\n), "... amm/contract.py:129-132
    assert // receiver not app address                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0                                                                                                                                                                                                                                                                                       # valid asset b xfer\nassert (\nb_xfer.asset_receiver == Global.current_application_address\n), "... amm/contract.py:129-132
    frame_dig -4                                                                                                 //                                                                                        load b_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,b_xfer#0                                                                                                                                                                                                                                                                              b_xfer.xfer_asset                                                                                    amm/contract.py:133
    gtxns XferAsset                                                                                              //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,{gtxns}                                                                                                                                                                                                                                                                               b_xfer.xfer_asset                                                                                    amm/contract.py:133
    //                                                                                                           virtual: store tmp%19#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0                                                                                                                                                                                                                                                                                                                                     b_xfer.xfer_asset                                                                                    amm/contract.py:133
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,0                                                                                                                                                                                                                                                                            self.asset_b                                                                                         amm/contract.py:133
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,0,"asset_b"                                                                                                                                                                                                                                                                  self.asset_b                                                                                         amm/contract.py:133
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                  self.asset_b                                                                                         amm/contract.py:133
    //                                                                                                           virtual: store asset_b_exists%1#0 to l-stack (no copy)                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,asset_b_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                            self.asset_b                                                                                         amm/contract.py:133
    //                                                                                                           virtual: store asset_b_value%1#0 to l-stack (no copy)                                     () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,asset_b_value%1#0,asset_b_exists%1#0                                                                                                                                                                                                                                                                                                self.asset_b                                                                                         amm/contract.py:133
    //                                                                                                           virtual: load asset_b_exists%1#0 from l-stack (no copy)                                   () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,asset_b_value%1#0,asset_b_exists%1#0                                                                                                                                                                                                                                                                                                self.asset_b                                                                                         amm/contract.py:133
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,asset_b_value%1#0                                                                                                                                                                                                                                                            self.asset_b                                                                                         amm/contract.py:133
    //                                                                                                           virtual: load tmp%19#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,asset_b_value%1#0,tmp%19#0                                                                                                                                                                                                                                                                                                                   b_xfer.xfer_asset == self.asset_b, "asset b incorrect"                                               amm/contract.py:133
    //                                                                                                           virtual: load asset_b_value%1#0 from l-stack (no copy)                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%19#0,asset_b_value%1#0                                                                                                                                                                                                                                                                                                                   b_xfer.xfer_asset == self.asset_b, "asset b incorrect"                                               amm/contract.py:133
    ==                                                                                                           //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,{==}                                                                                                                                                                                                                                                                                  b_xfer.xfer_asset == self.asset_b, "asset b incorrect"                                               amm/contract.py:133
    //                                                                                                           virtual: store tmp%20#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%20#0                                                                                                                                                                                                                                                                                                                                     b_xfer.xfer_asset == self.asset_b, "asset b incorrect"                                               amm/contract.py:133
    //                                                                                                           virtual: load tmp%20#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%20#0                                                                                                                                                                                                                                                                                                                                     assert b_xfer.xfer_asset == self.asset_b, "asset b incorrect"                                        amm/contract.py:133
    assert // asset b incorrect                                                                                  //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0                                                                                                                                                                                                                                                                                       assert b_xfer.xfer_asset == self.asset_b, "asset b incorrect"                                        amm/contract.py:133
    frame_dig -4                                                                                                 //                                                                                        load b_xfer#0 from parameters                                                                                                                               () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,b_xfer#0                                                                                                                                                                                                                                                                              b_xfer.asset_amount                                                                                  amm/contract.py:134
    gtxns AssetAmount                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,{gtxns}                                                                                                                                                                                                                                                                               b_xfer.asset_amount                                                                                  amm/contract.py:134
    //                                                                                                           virtual: store tmp%21#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0                                                                                                                                                                                                                                                                                                                                     b_xfer.asset_amount                                                                                  amm/contract.py:134
    dup                                                                                                          //                                                                                        load tmp%21#0 from l-stack (copy)                                                                                                                           () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%21#0                                                                                                                                                                                                                                                                     assert b_xfer.asset_amount > 0, "amount minimum not met"                                             amm/contract.py:134
    assert // amount minimum not met                                                                             //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0                                                                                                                                                                                                                                                                              assert b_xfer.asset_amount > 0, "amount minimum not met"                                             amm/contract.py:134
    callsub _current_pool_balance                                                                                //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,{_current_pool_balance}                                                                                                                                                                                                                                                      self._current_pool_balance()                                                                         amm/contract.py:137
    //                                                                                                           virtual: store tmp%23#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%23#0                                                                                                                                                                                                                                                                                                                            self._current_pool_balance()                                                                         amm/contract.py:137
    callsub _current_a_balance                                                                                   //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%23#0,{_current_a_balance}                                                                                                                                                                                                                                                self._current_a_balance()                                                                            amm/contract.py:138
    //                                                                                                           virtual: store tmp%24#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%23#0,tmp%24#0                                                                                                                                                                                                                                                                                                                   self._current_a_balance()                                                                            amm/contract.py:138
    callsub _current_b_balance                                                                                   //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%23#0,tmp%24#0,{_current_b_balance}                                                                                                                                                                                                                                       self._current_b_balance()                                                                            amm/contract.py:139
    //                                                                                                           virtual: store tmp%25#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%23#0,tmp%24#0,tmp%25#0                                                                                                                                                                                                                                                                                                          self._current_b_balance()                                                                            amm/contract.py:139
    uncover 2                                                                                                    //                                                                                        load tmp%23#0 from l-stack (no copy)                                                                                                                        () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%24#0,tmp%25#0,tmp%23#0                                                                                                                                                                                                                                                   to_mint = tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_... amm/contract.py:136-142
    uncover 2                                                                                                    //                                                                                        load tmp%24#0 from l-stack (no copy)                                                                                                                        () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%25#0,tmp%23#0,tmp%24#0                                                                                                                                                                                                                                                   to_mint = tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_... amm/contract.py:136-142
    uncover 2                                                                                                    //                                                                                        load tmp%25#0 from l-stack (no copy)                                                                                                                        () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%14#0,tmp%21#0,tmp%23#0,tmp%24#0,tmp%25#0                                                                                                                                                                                                                                                   to_mint = tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_... amm/contract.py:136-142
    uncover 4                                                                                                    //                                                                                        load tmp%14#0 from l-stack (no copy)                                                                                                                        () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%21#0,tmp%23#0,tmp%24#0,tmp%25#0,tmp%14#0                                                                                                                                                                                                                                                   to_mint = tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_... amm/contract.py:136-142
    uncover 4                                                                                                    //                                                                                        load tmp%21#0 from l-stack (no copy)                                                                                                                        () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%23#0,tmp%24#0,tmp%25#0,tmp%14#0,tmp%21#0                                                                                                                                                                                                                                                   to_mint = tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_... amm/contract.py:136-142
    callsub tokens_to_mint                                                                                       //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {tokens_to_mint}                                                                                                                                                                                                                                                                               tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_balance(),... amm/contract.py:136-142
    //                                                                                                           virtual: store to_mint#0 to l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0                                                                                                                                                                                                                                                                                                                                             to_mint = tokens_to_mint(\npool_balance=self._current_pool_balance(),\na_balance=self._current_a_... amm/contract.py:136-142
    dup                                                                                                          //                                                                                        load to_mint#0 from l-stack (copy)                                                                                                                          () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,to_mint#0                                                                                                                                                                                                                                                                            assert to_mint > 0, "send amount too low"                                                            amm/contract.py:143
    assert // send amount too low                                                                                //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0                                                                                                                                                                                                                                                                                      assert to_mint > 0, "send amount too low"                                                            amm/contract.py:143
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,{txn}                                                                                                                                                                                                                                                                                \ndo_asset_transfer(receiver=Txn.sender                                                              amm/contract.py:145-146
    //                                                                                                           virtual: store tmp%29#0 to l-stack (no copy)                                              () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0                                                                                                                                                                                                                                                                                                                                    \ndo_asset_transfer(receiver=Txn.sender                                                              amm/contract.py:145-146
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,0                                                                                                                                                                                                                                                                           \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,0,"pool_token"                                                                                                                                                                                                                                                              \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                 \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    //                                                                                                           virtual: store pool_token_exists%1#0 to l-stack (no copy)                                 () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,pool_token_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                        \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    //                                                                                                           virtual: store pool_token_value%1#0 to l-stack (no copy)                                  () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,pool_token_value%1#0,pool_token_exists%1#0                                                                                                                                                                                                                                                                                         \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    //                                                                                                           virtual: load pool_token_exists%1#0 from l-stack (no copy)                                () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,pool_token_value%1#0,pool_token_exists%1#0                                                                                                                                                                                                                                                                                         \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,pool_token_value%1#0                                                                                                                                                                                                                                                        \ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token                                       amm/contract.py:145-146
    //                                                                                                           virtual: load tmp%29#0 from l-stack (no copy)                                             () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,pool_token_value%1#0,tmp%29#0                                                                                                                                                                                                                                                                                                               # mint tokens\ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token, amount=to_mint)         amm/contract.py:145-146
    //                                                                                                           virtual: load pool_token_value%1#0 from l-stack (no copy)                                 () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | to_mint#0,tmp%29#0,pool_token_value%1#0                                                                                                                                                                                                                                                                                                               # mint tokens\ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token, amount=to_mint)         amm/contract.py:145-146
    uncover 2                                                                                                    //                                                                                        load to_mint#0 from l-stack (no copy)                                                                                                                       () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%29#0,pool_token_value%1#0,to_mint#0                                                                                                                                                                                                                                                        # mint tokens\ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token, amount=to_mint)         amm/contract.py:145-146
    callsub do_asset_transfer                                                                                    //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                # mint tokens\ndo_asset_transfer(receiver=Txn.sender, asset=self.pool_token, amount=to_mint)         amm/contract.py:145-146
    callsub _update_ratio                                                                                        //                                                                                                                                                                                                                                                    () a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                self._update_ratio()                                                                                 amm/contract.py:147
    retsub                                                                                                       //


// examples.amm.contract.ConstantProductAMM._check_bootstrapped() -> void:
_check_bootstrapped:
    proto 0 0                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _check_bootstrapped(self) -> None:                                                  amm/contract.py:253-254

_check_bootstrapped_block@0:
    int 0                                                                                                        //                                                                                                                                                                                                                                                    0                                                                                                                                                                                                                                                                                                                                                       self.pool_token                                                                                      amm/contract.py:255
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    0,"pool_token"                                                                                                                                                                                                                                                                                                                                          self.pool_token                                                                                      amm/contract.py:255
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                             self.pool_token                                                                                      amm/contract.py:255
    //                                                                                                           virtual: store pool_token_exists%0#0 to l-stack (no copy)                                 pool_token_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:255
    //                                                                                                           virtual: store pool_token_value%0#0 to l-stack (no copy)                                  pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                                                                     self.pool_token                                                                                      amm/contract.py:255
    //                                                                                                           virtual: load pool_token_exists%0#0 from l-stack (no copy)                                pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                                                                     self.pool_token                                                                                      amm/contract.py:255
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    pool_token_value%0#0                                                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:255
    //                                                                                                           virtual: load pool_token_value%0#0 from l-stack (no copy)                                 pool_token_value%0#0                                                                                                                                                                                                                                                                                                                                                                                           assert self.pool_token, "bootstrap method needs to be called first"                                  amm/contract.py:255
    assert // bootstrap method needs to be called first                                                          //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            assert self.pool_token, "bootstrap method needs to be called first"                                  amm/contract.py:255
    retsub                                                                                                       //


// examples.amm.contract.ConstantProductAMM._current_pool_balance() -> uint64:
_current_pool_balance:
    proto 0 1                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _current_pool_balance(self) -> UInt64:                                              amm/contract.py:294-295

_current_pool_balance_block@0:
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    {global}                                                                                                                                                                                                                                                                                                                                                Global.current_application_address                                                                   amm/contract.py:296
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        Global.current_application_address                                                                   amm/contract.py:296
    int 0                                                                                                        //                                                                                                                                                                                                                                                    tmp%0#0,0                                                                                                                                                                                                                                                                                                                                               self.pool_token                                                                                      amm/contract.py:296
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    tmp%0#0,0,"pool_token"                                                                                                                                                                                                                                                                                                                                  self.pool_token                                                                                      amm/contract.py:296
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    tmp%0#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                     self.pool_token                                                                                      amm/contract.py:296
    //                                                                                                           virtual: store pool_token_exists%0#0 to l-stack (no copy)                                 tmp%0#0,pool_token_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                            self.pool_token                                                                                      amm/contract.py:296
    //                                                                                                           virtual: store pool_token_value%0#0 to l-stack (no copy)                                  tmp%0#0,pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                                                             self.pool_token                                                                                      amm/contract.py:296
    //                                                                                                           virtual: load pool_token_exists%0#0 from l-stack (no copy)                                tmp%0#0,pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                                                             self.pool_token                                                                                      amm/contract.py:296
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    tmp%0#0,pool_token_value%0#0                                                                                                                                                                                                                                                                                                                            self.pool_token                                                                                      amm/contract.py:296
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              pool_token_value%0#0,tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                   self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    //                                                                                                           virtual: load pool_token_value%0#0 from l-stack (no copy)                                 tmp%0#0,pool_token_value%0#0                                                                                                                                                                                                                                                                                                                                                                                   self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    asset_holding_get AssetBalance                                                                               //                                                                                                                                                                                                                                                    {asset_holding_get}.0,{asset_holding_get}.1                                                                                                                                                                                                                                                                                                             self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    //                                                                                                           virtual: store check%0#0 to l-stack (no copy)                                             check%0#0,{asset_holding_get}.0                                                                                                                                                                                                                                                                                                                                                                                self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    //                                                                                                           virtual: store value%0#0 to l-stack (no copy)                                             value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    //                                                                                                           virtual: load check%0#0 from l-stack (no copy)                                            value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    assert // account opted into asset                                                                           //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               self.pool_token.balance(Global.current_application_address)                                          amm/contract.py:296
    //                                                                                                           virtual: load value%0#0 from l-stack (no copy)                                            value%0#0                                                                                                                                                                                                                                                                                                                                                                                                      return self.pool_token.balance(Global.current_application_address)                                   amm/contract.py:296
    retsub                                                                                                       //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               return self.pool_token.balance(Global.current_application_address)                                   amm/contract.py:296


// examples.amm.contract.ConstantProductAMM._current_a_balance() -> uint64:
_current_a_balance:
    proto 0 1                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _current_a_balance(self) -> UInt64:                                                 amm/contract.py:298-299

_current_a_balance_block@0:
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    {global}                                                                                                                                                                                                                                                                                                                                                Global.current_application_address                                                                   amm/contract.py:300
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        Global.current_application_address                                                                   amm/contract.py:300
    int 0                                                                                                        //                                                                                                                                                                                                                                                    tmp%0#0,0                                                                                                                                                                                                                                                                                                                                               self.asset_a                                                                                         amm/contract.py:300
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    tmp%0#0,0,"asset_a"                                                                                                                                                                                                                                                                                                                                     self.asset_a                                                                                         amm/contract.py:300
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    tmp%0#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                     self.asset_a                                                                                         amm/contract.py:300
    //                                                                                                           virtual: store asset_a_exists%0#0 to l-stack (no copy)                                    tmp%0#0,asset_a_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                               self.asset_a                                                                                         amm/contract.py:300
    //                                                                                                           virtual: store asset_a_value%0#0 to l-stack (no copy)                                     tmp%0#0,asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                                                                   self.asset_a                                                                                         amm/contract.py:300
    //                                                                                                           virtual: load asset_a_exists%0#0 from l-stack (no copy)                                   tmp%0#0,asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                                                                   self.asset_a                                                                                         amm/contract.py:300
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    tmp%0#0,asset_a_value%0#0                                                                                                                                                                                                                                                                                                                               self.asset_a                                                                                         amm/contract.py:300
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              asset_a_value%0#0,tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                      self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    //                                                                                                           virtual: load asset_a_value%0#0 from l-stack (no copy)                                    tmp%0#0,asset_a_value%0#0                                                                                                                                                                                                                                                                                                                                                                                      self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    asset_holding_get AssetBalance                                                                               //                                                                                                                                                                                                                                                    {asset_holding_get}.0,{asset_holding_get}.1                                                                                                                                                                                                                                                                                                             self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    //                                                                                                           virtual: store check%0#0 to l-stack (no copy)                                             check%0#0,{asset_holding_get}.0                                                                                                                                                                                                                                                                                                                                                                                self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    //                                                                                                           virtual: store value%0#0 to l-stack (no copy)                                             value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    //                                                                                                           virtual: load check%0#0 from l-stack (no copy)                                            value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    assert // account opted into asset                                                                           //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               self.asset_a.balance(Global.current_application_address)                                             amm/contract.py:300
    //                                                                                                           virtual: load value%0#0 from l-stack (no copy)                                            value%0#0                                                                                                                                                                                                                                                                                                                                                                                                      return self.asset_a.balance(Global.current_application_address)                                      amm/contract.py:300
    retsub                                                                                                       //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               return self.asset_a.balance(Global.current_application_address)                                      amm/contract.py:300


// examples.amm.contract.ConstantProductAMM._current_b_balance() -> uint64:
_current_b_balance:
    proto 0 1                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _current_b_balance(self) -> UInt64:                                                 amm/contract.py:302-303

_current_b_balance_block@0:
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    {global}                                                                                                                                                                                                                                                                                                                                                Global.current_application_address                                                                   amm/contract.py:304
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                                        Global.current_application_address                                                                   amm/contract.py:304
    int 0                                                                                                        //                                                                                                                                                                                                                                                    tmp%0#0,0                                                                                                                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:304
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    tmp%0#0,0,"asset_b"                                                                                                                                                                                                                                                                                                                                     self.asset_b                                                                                         amm/contract.py:304
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    tmp%0#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                                                                     self.asset_b                                                                                         amm/contract.py:304
    //                                                                                                           virtual: store asset_b_exists%0#0 to l-stack (no copy)                                    tmp%0#0,asset_b_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:304
    //                                                                                                           virtual: store asset_b_value%0#0 to l-stack (no copy)                                     tmp%0#0,asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:304
    //                                                                                                           virtual: load asset_b_exists%0#0 from l-stack (no copy)                                   tmp%0#0,asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:304
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    tmp%0#0,asset_b_value%0#0                                                                                                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:304
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              asset_b_value%0#0,tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                      self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    //                                                                                                           virtual: load asset_b_value%0#0 from l-stack (no copy)                                    tmp%0#0,asset_b_value%0#0                                                                                                                                                                                                                                                                                                                                                                                      self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    asset_holding_get AssetBalance                                                                               //                                                                                                                                                                                                                                                    {asset_holding_get}.0,{asset_holding_get}.1                                                                                                                                                                                                                                                                                                             self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    //                                                                                                           virtual: store check%0#0 to l-stack (no copy)                                             check%0#0,{asset_holding_get}.0                                                                                                                                                                                                                                                                                                                                                                                self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    //                                                                                                           virtual: store value%0#0 to l-stack (no copy)                                             value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    //                                                                                                           virtual: load check%0#0 from l-stack (no copy)                                            value%0#0,check%0#0                                                                                                                                                                                                                                                                                                                                                                                            self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    assert // account opted into asset                                                                           //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               self.asset_b.balance(Global.current_application_address)                                             amm/contract.py:304
    //                                                                                                           virtual: load value%0#0 from l-stack (no copy)                                            value%0#0                                                                                                                                                                                                                                                                                                                                                                                                      return self.asset_b.balance(Global.current_application_address)                                      amm/contract.py:304
    retsub                                                                                                       //                                                                                                                                                                                                                                                    value%0#0                                                                                                                                                                                                                                                                                                                                               return self.asset_b.balance(Global.current_application_address)                                      amm/contract.py:304


// examples.amm.contract.tokens_to_mint(pool_balance: uint64, a_balance: uint64, b_balance: uint64, a_amount: uint64, b_amount: uint64) -> uint64:
tokens_to_mint:
    proto 5 1                                                                                                    //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 |                                                                                                                                                                                                                                                                                      @subroutine\ndef tokens_to_mint(\n*,\npool_balance: UInt64,\na_balance: UInt64,\nb_balance: UInt6... amm/contract.py:325-333
    byte ""
    dup                                                                                                          //                                                                                        allocate 2 to stack                                                                                                                                         () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |

tokens_to_mint_block@0:
    frame_dig -4                                                                                                 //                                                                                        load a_balance#0 from parameters                                                                                                                            () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | a_balance#0                                                                                                                                                                                                                                                a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    frame_dig -2                                                                                                 //                                                                                        load a_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | a_balance#0,a_amount#0                                                                                                                                                                                                                                     a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {==}                                                                                                                                                                                                                                                       a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%0#0                                                                                                                                                                                                                                                                                                           a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%0#0                                                                                                                                                                                                                                                                                                           a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    bz tokens_to_mint_bool_false@3                                                                               //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |                                                                                                                                                                                                                                                            a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    // Implicit fall through to tokens_to_mint_and_contd@1                                                       //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |                                                                                                                                                                                                                                                            a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334

tokens_to_mint_and_contd@1:
    frame_dig -3                                                                                                 //                                                                                        load b_balance#0 from parameters                                                                                                                            () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | b_balance#0                                                                                                                                                                                                                                                b_balance == b_amount                                                                                amm/contract.py:334
    frame_dig -1                                                                                                 //                                                                                        load b_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | b_balance#0,b_amount#0                                                                                                                                                                                                                                     b_balance == b_amount                                                                                amm/contract.py:334
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {==}                                                                                                                                                                                                                                                       b_balance == b_amount                                                                                amm/contract.py:334
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%1#0                                                                                                                                                                                                                                                                                                           b_balance == b_amount                                                                                amm/contract.py:334
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%1#0                                                                                                                                                                                                                                                                                                           a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    bz tokens_to_mint_bool_false@3                                                                               //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |                                                                                                                                                                                                                                                            a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334
    // Implicit fall through to tokens_to_mint_bool_true@2                                                       //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |                                                                                                                                                                                                                                                            a_balance == a_amount and b_balance == b_amount                                                      amm/contract.py:334

tokens_to_mint_bool_true@2:
    int 1                                                                                                        //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | 1
    //                                                                                                           virtual: store and_result%0#0 to l-stack (no copy)                                        () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | and_result%0#0
    //                                                                                                           virtual: load and_result%0#0 from l-stack (no copy)                                       () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | and_result%0#0
    //                                                                                                           virtual: store is_initial_mint#0 to x-stack (no copy)                                     () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () is_initial_mint#0 |
    b tokens_to_mint_bool_merge@4                                                                                //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () is_initial_mint#0 |                                                                                                                               is_initial_mint#0

tokens_to_mint_bool_false@3:
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | 0
    //                                                                                                           virtual: store and_result%0#0 to l-stack (no copy)                                        () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | and_result%0#0
    //                                                                                                           virtual: load and_result%0#0 from l-stack (no copy)                                       () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | and_result%0#0
    //                                                                                                           virtual: store is_initial_mint#0 to x-stack (no copy)                                     () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () is_initial_mint#0 |
    // Implicit fall through to tokens_to_mint_bool_merge@4                                                      //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () is_initial_mint#0 |                                                                                                                               is_initial_mint#0

tokens_to_mint_bool_merge@4:
    //                                                                                                           virtual: load is_initial_mint#0 from x-stack                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | is_initial_mint#0                                                                                                                                                                                                                                                                            is_initial_mint#0    if is_initial_mint:                                                                                  amm/contract.py:335
    bz tokens_to_mint_after_if_else@6                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |                                                                                                                                                                                                                                                            if is_initial_mint:                                                                                  amm/contract.py:335
    // Implicit fall through to tokens_to_mint_if_body@5                                                         //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 |                                                                                                                                                                                                                                                            if is_initial_mint:                                                                                  amm/contract.py:335

tokens_to_mint_if_body@5:
    frame_dig -2                                                                                                 //                                                                                        load a_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | a_amount#0                                                                                                                                                                                                                                                 a_amount * b_amount                                                                                  amm/contract.py:336
    frame_dig -1                                                                                                 //                                                                                        load b_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | a_amount#0,b_amount#0                                                                                                                                                                                                                                      a_amount * b_amount                                                                                  amm/contract.py:336
    *                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {*}                                                                                                                                                                                                                                                        a_amount * b_amount                                                                                  amm/contract.py:336
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%2#0                                                                                                                                                                                                                                                                                                           a_amount * b_amount                                                                                  amm/contract.py:336
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%2#0                                                                                                                                                                                                                                                                                                           op.sqrt(a_amount * b_amount)                                                                         amm/contract.py:336
    sqrt                                                                                                         //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {sqrt}                                                                                                                                                                                                                                                     op.sqrt(a_amount * b_amount)                                                                         amm/contract.py:336
    //                                                                                                           virtual: store tmp%3#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%3#0                                                                                                                                                                                                                                                                                                           op.sqrt(a_amount * b_amount)                                                                         amm/contract.py:336
    //                                                                                                           virtual: load tmp%3#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%3#0                                                                                                                                                                                                                                                                                                           op.sqrt(a_amount * b_amount) - SCALE                                                                 amm/contract.py:336
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%3#0,1000                                                                                                                                                                                                                                               SCALE                                                                                                amm/contract.py:336
    -                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {-}                                                                                                                                                                                                                                                        op.sqrt(a_amount * b_amount) - SCALE                                                                 amm/contract.py:336
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%4#0                                                                                                                                                                                                                                                                                                           op.sqrt(a_amount * b_amount) - SCALE                                                                 amm/contract.py:336
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%4#0                                                                                                                                                                                                                                                                                                           return op.sqrt(a_amount * b_amount) - SCALE                                                          amm/contract.py:336
    frame_bury 0
    retsub                                                                                                       //                                                                                                                                                                                                                                                    tmp%4#0                                                                                                                                                                                                                                                                                                                                                 return op.sqrt(a_amount * b_amount) - SCALE                                                          amm/contract.py:336

tokens_to_mint_after_if_else@6:
    int 10000000000                                                                                              //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | 10000000000                                                                                                                                                                                                                                                TOTAL_SUPPLY                                                                                         amm/contract.py:337
    frame_dig -5                                                                                                 //                                                                                        load pool_balance#0 from parameters                                                                                                                         () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | 10000000000,pool_balance#0                                                                                                                                                                                                                                 issued = TOTAL_SUPPLY - pool_balance                                                                 amm/contract.py:337
    -                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {-}                                                                                                                                                                                                                                                        TOTAL_SUPPLY - pool_balance                                                                          amm/contract.py:337
    //                                                                                                           virtual: store issued#0 to x-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 |                                                                                                                                                                                                                                                                                                    issued = TOTAL_SUPPLY - pool_balance                                                                 amm/contract.py:337
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | 1000                                                                                                                                                                                                                                        SCALE                                                                                                amm/contract.py:338
    frame_dig -2                                                                                                 //                                                                                        load a_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | 1000,a_amount#0                                                                                                                                                                                                                             SCALE * a_amount                                                                                     amm/contract.py:338
    *                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | {*}                                                                                                                                                                                                                                         SCALE * a_amount                                                                                     amm/contract.py:338
    //                                                                                                           virtual: store tmp%5#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%5#0                                                                                                                                                                                                                                                                                            SCALE * a_amount                                                                                     amm/contract.py:338
    frame_dig -4                                                                                                 //                                                                                        load a_balance#0 from parameters                                                                                                                            () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%5#0,a_balance#0                                                                                                                                                                                                                         a_balance - a_amount                                                                                 amm/contract.py:338
    frame_dig -2                                                                                                 //                                                                                        load a_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%5#0,a_balance#0,a_amount#0                                                                                                                                                                                                              a_balance - a_amount                                                                                 amm/contract.py:338
    -                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%5#0,{-}                                                                                                                                                                                                                                 a_balance - a_amount                                                                                 amm/contract.py:338
    //                                                                                                           virtual: store tmp%6#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%5#0,tmp%6#0                                                                                                                                                                                                                                                                                    a_balance - a_amount                                                                                 amm/contract.py:338
    //                                                                                                           virtual: load tmp%5#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%6#0,tmp%5#0                                                                                                                                                                                                                                                                                    a_ratio = SCALE * a_amount // (a_balance - a_amount)                                                 amm/contract.py:338
    //                                                                                                           virtual: load tmp%6#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%5#0,tmp%6#0                                                                                                                                                                                                                                                                                    a_ratio = SCALE * a_amount // (a_balance - a_amount)                                                 amm/contract.py:338
    /                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | {/}                                                                                                                                                                                                                                         SCALE * a_amount // (a_balance - a_amount)                                                           amm/contract.py:338
    dup                                                                                                          //                                                                                        store a_ratio#0 to l-stack (copy)                                                                                                                           () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,a_ratio#0                                                                                                                                                                                                                         a_ratio = SCALE * a_amount // (a_balance - a_amount)                                                 amm/contract.py:338
    frame_bury 0                                                                                                 //                                                                                        store a_ratio#0 to f-stack                                                                                                                                  () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0                                                                                                                                                                                                                                   a_ratio = SCALE * a_amount // (a_balance - a_amount)                                                 amm/contract.py:338
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,1000                                                                                                                                                                                                                              SCALE                                                                                                amm/contract.py:339
    frame_dig -1                                                                                                 //                                                                                        load b_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,1000,b_amount#0                                                                                                                                                                                                                   SCALE * b_amount                                                                                     amm/contract.py:339
    *                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,{*}                                                                                                                                                                                                                               SCALE * b_amount                                                                                     amm/contract.py:339
    //                                                                                                           virtual: store tmp%7#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%7#0                                                                                                                                                                                                                                                                                  SCALE * b_amount                                                                                     amm/contract.py:339
    frame_dig -3                                                                                                 //                                                                                        load b_balance#0 from parameters                                                                                                                            () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%7#0,b_balance#0                                                                                                                                                                                                               b_balance - b_amount                                                                                 amm/contract.py:339
    frame_dig -1                                                                                                 //                                                                                        load b_amount#0 from parameters                                                                                                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%7#0,b_balance#0,b_amount#0                                                                                                                                                                                                    b_balance - b_amount                                                                                 amm/contract.py:339
    -                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%7#0,{-}                                                                                                                                                                                                                       b_balance - b_amount                                                                                 amm/contract.py:339
    //                                                                                                           virtual: store tmp%8#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%7#0,tmp%8#0                                                                                                                                                                                                                                                                          b_balance - b_amount                                                                                 amm/contract.py:339
    //                                                                                                           virtual: load tmp%7#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%8#0,tmp%7#0                                                                                                                                                                                                                                                                          b_ratio = SCALE * b_amount // (b_balance - b_amount)                                                 amm/contract.py:339
    //                                                                                                           virtual: load tmp%8#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,tmp%7#0,tmp%8#0                                                                                                                                                                                                                                                                          b_ratio = SCALE * b_amount // (b_balance - b_amount)                                                 amm/contract.py:339
    /                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,{/}                                                                                                                                                                                                                               SCALE * b_amount // (b_balance - b_amount)                                                           amm/contract.py:339
    dup                                                                                                          //                                                                                        store b_ratio#0 to l-stack (copy)                                                                                                                           () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,b_ratio#0,b_ratio#0                                                                                                                                                                                                               b_ratio = SCALE * b_amount // (b_balance - b_amount)                                                 amm/contract.py:339
    frame_bury 1                                                                                                 //                                                                                        store b_ratio#0 to f-stack                                                                                                                                  () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,b_ratio#0                                                                                                                                                                                                                         b_ratio = SCALE * b_amount // (b_balance - b_amount)                                                 amm/contract.py:339
    //                                                                                                           virtual: load a_ratio#0 from l-stack (no copy)                                            () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | b_ratio#0,a_ratio#0                                                                                                                                                                                                                                                                                a_ratio < b_ratio:                                                                                   amm/contract.py:340
    //                                                                                                           virtual: load b_ratio#0 from l-stack (no copy)                                            () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0,b_ratio#0                                                                                                                                                                                                                                                                                a_ratio < b_ratio:                                                                                   amm/contract.py:340
    <                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | {<}                                                                                                                                                                                                                                         a_ratio < b_ratio:                                                                                   amm/contract.py:340
    //                                                                                                           virtual: store tmp%9#0 to l-stack (no copy)                                               () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%9#0                                                                                                                                                                                                                                                                                            a_ratio < b_ratio:                                                                                   amm/contract.py:340
    //                                                                                                           virtual: load tmp%9#0 from l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | tmp%9#0                                                                                                                                                                                                                                                                                            if a_ratio < b_ratio:                                                                                amm/contract.py:340
    bz tokens_to_mint_else_body@8                                                                                //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 |                                                                                                                                                                                                                                             if a_ratio < b_ratio:                                                                                amm/contract.py:340
    // Implicit fall through to tokens_to_mint_if_body@7                                                         //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 |                                                                                                                                        issued#0                                                                                             if a_ratio < b_ratio:                                                                                amm/contract.py:340

tokens_to_mint_if_body@7:
    frame_dig 0                                                                                                  //                                                                                        load a_ratio#0 from f-stack                                                                                                                                 () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | a_ratio#0                                                                                                                              issued#0                                                                                             a_ratio * issued                                                                                     amm/contract.py:341
    swap                                                                                                         //                                                                                        load issued#0 from x-stack                                                                                                                                  () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | a_ratio#0,issued#0                                                                                                                                                                                                                                         a_ratio * issued                                                                                     amm/contract.py:341
    *                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {*}                                                                                                                                                                                                                                                        a_ratio * issued                                                                                     amm/contract.py:341
    //                                                                                                           virtual: store tmp%10#0 to l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%10#0                                                                                                                                                                                                                                                                                                          a_ratio * issued                                                                                     amm/contract.py:341
    //                                                                                                           virtual: load tmp%10#0 from l-stack (no copy)                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%10#0                                                                                                                                                                                                                                                                                                          a_ratio * issued // SCALE                                                                            amm/contract.py:341
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%10#0,1000                                                                                                                                                                                                                                              SCALE                                                                                                amm/contract.py:341
    /                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {/}                                                                                                                                                                                                                                                        a_ratio * issued // SCALE                                                                            amm/contract.py:341
    //                                                                                                           virtual: store tmp%11#0 to l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%11#0                                                                                                                                                                                                                                                                                                          a_ratio * issued // SCALE                                                                            amm/contract.py:341
    //                                                                                                           virtual: load tmp%11#0 from l-stack (no copy)                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%11#0                                                                                                                                                                                                                                                                                                          return a_ratio * issued // SCALE                                                                     amm/contract.py:341
    frame_bury 0
    retsub                                                                                                       //                                                                                                                                                                                                                                                    tmp%11#0                                                                                                                                                                                                                                                                                                                                                return a_ratio * issued // SCALE                                                                     amm/contract.py:341

tokens_to_mint_else_body@8:
    frame_dig 1                                                                                                  //                                                                                        load b_ratio#0 from f-stack                                                                                                                                 () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | () issued#0 | b_ratio#0                                                                                                                              issued#0                                                                                             b_ratio * issued                                                                                     amm/contract.py:343
    swap                                                                                                         //                                                                                        load issued#0 from x-stack                                                                                                                                  () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | b_ratio#0,issued#0                                                                                                                                                                                                                                         b_ratio * issued                                                                                     amm/contract.py:343
    *                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {*}                                                                                                                                                                                                                                                        b_ratio * issued                                                                                     amm/contract.py:343
    //                                                                                                           virtual: store tmp%12#0 to l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%12#0                                                                                                                                                                                                                                                                                                          b_ratio * issued                                                                                     amm/contract.py:343
    //                                                                                                           virtual: load tmp%12#0 from l-stack (no copy)                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%12#0                                                                                                                                                                                                                                                                                                          b_ratio * issued // SCALE                                                                            amm/contract.py:343
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%12#0,1000                                                                                                                                                                                                                                              SCALE                                                                                                amm/contract.py:343
    /                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | {/}                                                                                                                                                                                                                                                        b_ratio * issued // SCALE                                                                            amm/contract.py:343
    //                                                                                                           virtual: store tmp%13#0 to l-stack (no copy)                                              () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%13#0                                                                                                                                                                                                                                                                                                          b_ratio * issued // SCALE                                                                            amm/contract.py:343
    //                                                                                                           virtual: load tmp%13#0 from l-stack (no copy)                                             () pool_balance#0,a_balance#0,b_balance#0,a_amount#0,b_amount#0 | () a_ratio#0,b_ratio#0 | tmp%13#0                                                                                                                                                                                                                                                                                                          return b_ratio * issued // SCALE                                                                     amm/contract.py:343
    frame_bury 0
    retsub                                                                                                       //                                                                                                                                                                                                                                                    tmp%13#0                                                                                                                                                                                                                                                                                                                                                return b_ratio * issued // SCALE                                                                     amm/contract.py:343


// examples.amm.contract.ConstantProductAMM._update_ratio() -> void:
_update_ratio:
    proto 0 0                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            @subroutine\ndef _update_ratio(self) -> None:                                                        amm/contract.py:257-258

_update_ratio_block@0:
    callsub _current_a_balance                                                                                   //                                                                                                                                                                                                                                                    {_current_a_balance}                                                                                                                                                                                                                                                                                                                                    self._current_a_balance()                                                                            amm/contract.py:259
    //                                                                                                           virtual: store a_balance#0 to l-stack (no copy)                                           a_balance#0                                                                                                                                                                                                                                                                                                                                                                                                    a_balance = self._current_a_balance()                                                                amm/contract.py:259
    callsub _current_b_balance                                                                                   //                                                                                                                                                                                                                                                    a_balance#0,{_current_b_balance}                                                                                                                                                                                                                                                                                                                        self._current_b_balance()                                                                            amm/contract.py:260
    swap                                                                                                         //                                                                                        store b_balance#0 to l-stack (no copy)                                                                                                                      b_balance#0,a_balance#0                                                                                                                                                                                                                                                                                                                                 b_balance = self._current_b_balance()                                                                amm/contract.py:260
    //                                                                                                           virtual: load a_balance#0 from l-stack (no copy)                                          b_balance#0,a_balance#0                                                                                                                                                                                                                                                                                                                                                                                        a_balance * SCALE                                                                                    amm/contract.py:262
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    b_balance#0,a_balance#0,1000                                                                                                                                                                                                                                                                                                                            SCALE                                                                                                amm/contract.py:262
    *                                                                                                            //                                                                                                                                                                                                                                                    b_balance#0,{*}                                                                                                                                                                                                                                                                                                                                         a_balance * SCALE                                                                                    amm/contract.py:262
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               b_balance#0,tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                            a_balance * SCALE                                                                                    amm/contract.py:262
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              b_balance#0,tmp%0#0                                                                                                                                                                                                                                                                                                                                                                                            a_balance * SCALE // b_balance                                                                       amm/contract.py:262
    swap                                                                                                         //                                                                                        load b_balance#0 from l-stack (no copy)                                                                                                                     tmp%0#0,b_balance#0                                                                                                                                                                                                                                                                                                                                     a_balance * SCALE // b_balance                                                                       amm/contract.py:262
    /                                                                                                            //                                                                                                                                                                                                                                                    {/}                                                                                                                                                                                                                                                                                                                                                     a_balance * SCALE // b_balance                                                                       amm/contract.py:262
    //                                                                                                           virtual: store new_state_value%0#0 to l-stack (no copy)                                   new_state_value%0#0                                                                                                                                                                                                                                                                                                                                                                                            a_balance * SCALE // b_balance                                                                       amm/contract.py:262
    byte "ratio"                                                                                                 //                                                                                                                                                                                                                                                    new_state_value%0#0,"ratio"                                                                                                                                                                                                                                                                                                                             self.ratio                                                                                           amm/contract.py:262
    swap                                                                                                         //                                                                                        load new_state_value%0#0 from l-stack (no copy)                                                                                                             "ratio",new_state_value%0#0                                                                                                                                                                                                                                                                                                                             self.ratio = a_balance * SCALE // b_balance                                                          amm/contract.py:262
    app_global_put                                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            self.ratio = a_balance * SCALE // b_balance                                                          amm/contract.py:262
    retsub                                                                                                       //


// examples.amm.contract.ConstantProductAMM.burn(pool_xfer: uint64, pool_asset: uint64, a_asset: uint64, b_asset: uint64) -> void:
burn:
    proto 4 0                                                                                                    //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      @arc4.abimethod(\ndefault_args={\n"pool_asset": "pool_token",\n"a_asset": "asset_a",\n"b_asset": ... amm/contract.py:149-162

burn_block@0:
    callsub _check_bootstrapped                                                                                  //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      self._check_bootstrapped()                                                                           amm/contract.py:172
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:174
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0,"pool_token"                                                                                                                                                                                                                                                                                       self.pool_token                                                                                      amm/contract.py:174
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                          self.pool_token                                                                                      amm/contract.py:174
    //                                                                                                           virtual: store pool_token_exists%0#0 to l-stack (no copy)                                 () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                 self.pool_token                                                                                      amm/contract.py:174
    //                                                                                                           virtual: store pool_token_value%0#0 to l-stack (no copy)                                  () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                  self.pool_token                                                                                      amm/contract.py:174
    //                                                                                                           virtual: load pool_token_exists%0#0 from l-stack (no copy)                                () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_token_exists%0#0                                                                                                                                                                                                                                                                                                                  self.pool_token                                                                                      amm/contract.py:174
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0                                                                                                                                                                                                                                                                                 self.pool_token                                                                                      amm/contract.py:174
    frame_dig -3                                                                                                 //                                                                                        load pool_asset#0 from parameters                                                                                                                           () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_token_value%0#0,pool_asset#0                                                                                                                                                                                                                                                                    pool_asset == self.pool_token, "asset pool incorrect"                                                amm/contract.py:174
    swap                                                                                                         //                                                                                        load pool_token_value%0#0 from l-stack (no copy)                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_asset#0,pool_token_value%0#0                                                                                                                                                                                                                                                                    pool_asset == self.pool_token, "asset pool incorrect"                                                amm/contract.py:174
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                                 pool_asset == self.pool_token, "asset pool incorrect"                                                amm/contract.py:174
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                     pool_asset == self.pool_token, "asset pool incorrect"                                                amm/contract.py:174
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                     assert pool_asset == self.pool_token, "asset pool incorrect"                                         amm/contract.py:174
    assert // asset pool incorrect                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      assert pool_asset == self.pool_token, "asset pool incorrect"                                         amm/contract.py:174
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                    self.asset_a                                                                                         amm/contract.py:175
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0,"asset_a"                                                                                                                                                                                                                                                                                          self.asset_a                                                                                         amm/contract.py:175
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                          self.asset_a                                                                                         amm/contract.py:175
    //                                                                                                           virtual: store asset_a_exists%0#0 to l-stack (no copy)                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                    self.asset_a                                                                                         amm/contract.py:175
    //                                                                                                           virtual: store asset_a_value%0#0 to l-stack (no copy)                                     () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                        self.asset_a                                                                                         amm/contract.py:175
    //                                                                                                           virtual: load asset_a_exists%0#0 from l-stack (no copy)                                   () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                                        self.asset_a                                                                                         amm/contract.py:175
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0                                                                                                                                                                                                                                                                                    self.asset_a                                                                                         amm/contract.py:175
    frame_dig -2                                                                                                 //                                                                                        load a_asset#0 from parameters                                                                                                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_a_value%0#0,a_asset#0                                                                                                                                                                                                                                                                          a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:175
    swap                                                                                                         //                                                                                        load asset_a_value%0#0 from l-stack (no copy)                                                                                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_asset#0,asset_a_value%0#0                                                                                                                                                                                                                                                                          a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:175
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                                 a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:175
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                                     a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:175
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                                     assert a_asset == self.asset_a, "asset a incorrect"                                                  amm/contract.py:175
    assert // asset a incorrect                                                                                  //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      assert a_asset == self.asset_a, "asset a incorrect"                                                  amm/contract.py:175
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0                                                                                                                                                                                                                                                                                                    self.asset_b                                                                                         amm/contract.py:176
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | 0,"asset_b"                                                                                                                                                                                                                                                                                          self.asset_b                                                                                         amm/contract.py:176
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                                          self.asset_b                                                                                         amm/contract.py:176
    //                                                                                                           virtual: store asset_b_exists%0#0 to l-stack (no copy)                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                                    self.asset_b                                                                                         amm/contract.py:176
    //                                                                                                           virtual: store asset_b_value%0#0 to l-stack (no copy)                                     () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                        self.asset_b                                                                                         amm/contract.py:176
    //                                                                                                           virtual: load asset_b_exists%0#0 from l-stack (no copy)                                   () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                                        self.asset_b                                                                                         amm/contract.py:176
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0                                                                                                                                                                                                                                                                                    self.asset_b                                                                                         amm/contract.py:176
    frame_dig -1                                                                                                 //                                                                                        load b_asset#0 from parameters                                                                                                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | asset_b_value%0#0,b_asset#0                                                                                                                                                                                                                                                                          b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:176
    swap                                                                                                         //                                                                                        load asset_b_value%0#0 from l-stack (no copy)                                                                                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_asset#0,asset_b_value%0#0                                                                                                                                                                                                                                                                          b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:176
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                                 b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:176
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                                     b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:176
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                                     assert b_asset == self.asset_b, "asset b incorrect"                                                  amm/contract.py:176
    assert // asset b incorrect                                                                                  //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      assert b_asset == self.asset_b, "asset b incorrect"                                                  amm/contract.py:176
    frame_dig -4                                                                                                 //                                                                                        load pool_xfer#0 from parameters                                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_xfer#0                                                                                                                                                                                                                                                                                          pool_xfer.asset_receiver                                                                             amm/contract.py:179
    gtxns AssetReceiver                                                                                          //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                              pool_xfer.asset_receiver                                                                             amm/contract.py:179
    //                                                                                                           virtual: store tmp%3#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0                                                                                                                                                                                                                                                                                                                                                     pool_xfer.asset_receiver                                                                             amm/contract.py:179
    global CurrentApplicationAddress                                                                             //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0,{global}                                                                                                                                                                                                                                                                                     Global.current_application_address                                                                   amm/contract.py:179
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0,tmp%4#0                                                                                                                                                                                                                                                                                                                                             Global.current_application_address                                                                   amm/contract.py:179
    //                                                                                                           virtual: load tmp%3#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%4#0,tmp%3#0                                                                                                                                                                                                                                                                                                                                             pool_xfer.asset_receiver == Global.current_application_address                                       amm/contract.py:179
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%3#0,tmp%4#0                                                                                                                                                                                                                                                                                                                                             pool_xfer.asset_receiver == Global.current_application_address                                       amm/contract.py:179
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {==}                                                                                                                                                                                                                                                                                                 pool_xfer.asset_receiver == Global.current_application_address                                       amm/contract.py:179
    //                                                                                                           virtual: store tmp%5#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%5#0                                                                                                                                                                                                                                                                                                                                                     pool_xfer.asset_receiver == Global.current_application_address                                       amm/contract.py:179
    //                                                                                                           virtual: load tmp%5#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%5#0                                                                                                                                                                                                                                                                                                                                                     assert (\npool_xfer.asset_receiver == Global.current_application_address\n), "receiver not app ad... amm/contract.py:178-180
    assert // receiver not app address                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      assert (\npool_xfer.asset_receiver == Global.current_application_address\n), "receiver not app ad... amm/contract.py:178-180
    frame_dig -4                                                                                                 //                                                                                        load pool_xfer#0 from parameters                                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | pool_xfer#0                                                                                                                                                                                                                                                                                          pool_xfer.asset_amount                                                                               amm/contract.py:181
    gtxns AssetAmount                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | {gtxns}                                                                                                                                                                                                                                                                                              pool_xfer.asset_amount                                                                               amm/contract.py:181
    //                                                                                                           virtual: store tmp%6#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                                                                                     pool_xfer.asset_amount                                                                               amm/contract.py:181
    dup                                                                                                          //                                                                                        load tmp%6#0 from l-stack (copy)                                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%6#0                                                                                                                                                                                                                                                                                      assert pool_xfer.asset_amount > 0, "amount minimum not met"                                          amm/contract.py:181
    assert // amount minimum not met                                                                             //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                              assert pool_xfer.asset_amount > 0, "amount minimum not met"                                          amm/contract.py:181
    frame_dig -4                                                                                                 //                                                                                        load pool_xfer#0 from parameters                                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_xfer#0                                                                                                                                                                                                                                                                                  pool_xfer.xfer_asset                                                                                 amm/contract.py:182
    gtxns XferAsset                                                                                              //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,{gtxns}                                                                                                                                                                                                                                                                                      pool_xfer.xfer_asset                                                                                 amm/contract.py:182
    //                                                                                                           virtual: store tmp%8#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0                                                                                                                                                                                                                                                                                                                                             pool_xfer.xfer_asset                                                                                 amm/contract.py:182
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,0                                                                                                                                                                                                                                                                                    self.pool_token                                                                                      amm/contract.py:182
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,0,"pool_token"                                                                                                                                                                                                                                                                       self.pool_token                                                                                      amm/contract.py:182
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                          self.pool_token                                                                                      amm/contract.py:182
    //                                                                                                           virtual: store pool_token_exists%1#0 to l-stack (no copy)                                 () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,pool_token_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                 self.pool_token                                                                                      amm/contract.py:182
    //                                                                                                           virtual: store pool_token_value%1#0 to l-stack (no copy)                                  () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,pool_token_value%1#0,pool_token_exists%1#0                                                                                                                                                                                                                                                                                                  self.pool_token                                                                                      amm/contract.py:182
    //                                                                                                           virtual: load pool_token_exists%1#0 from l-stack (no copy)                                () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,pool_token_value%1#0,pool_token_exists%1#0                                                                                                                                                                                                                                                                                                  self.pool_token                                                                                      amm/contract.py:182
    assert // check pool_token exists                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,pool_token_value%1#0                                                                                                                                                                                                                                                                 self.pool_token                                                                                      amm/contract.py:182
    //                                                                                                           virtual: load tmp%8#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_token_value%1#0,tmp%8#0                                                                                                                                                                                                                                                                                                                        pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"                                      amm/contract.py:182
    //                                                                                                           virtual: load pool_token_value%1#0 from l-stack (no copy)                                 () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%8#0,pool_token_value%1#0                                                                                                                                                                                                                                                                                                                        pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"                                      amm/contract.py:182
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,{==}                                                                                                                                                                                                                                                                                         pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"                                      amm/contract.py:182
    //                                                                                                           virtual: store tmp%9#0 to l-stack (no copy)                                               () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%9#0                                                                                                                                                                                                                                                                                                                                             pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"                                      amm/contract.py:182
    //                                                                                                           virtual: load tmp%9#0 from l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%9#0                                                                                                                                                                                                                                                                                                                                             assert pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"                               amm/contract.py:182
    assert // asset pool incorrect                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                              assert pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"                               amm/contract.py:182
    frame_dig -4                                                                                                 //                                                                                        load pool_xfer#0 from parameters                                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_xfer#0                                                                                                                                                                                                                                                                                  pool_xfer.sender                                                                                     amm/contract.py:183
    gtxns Sender                                                                                                 //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,{gtxns}                                                                                                                                                                                                                                                                                      pool_xfer.sender                                                                                     amm/contract.py:183
    //                                                                                                           virtual: store tmp%10#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%10#0                                                                                                                                                                                                                                                                                                                                            pool_xfer.sender                                                                                     amm/contract.py:183
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%10#0,{txn}                                                                                                                                                                                                                                                                               Txn.sender                                                                                           amm/contract.py:183
    //                                                                                                           virtual: store tmp%11#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%10#0,tmp%11#0                                                                                                                                                                                                                                                                                                                                   Txn.sender                                                                                           amm/contract.py:183
    //                                                                                                           virtual: load tmp%10#0 from l-stack (no copy)                                             () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%11#0,tmp%10#0                                                                                                                                                                                                                                                                                                                                   pool_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:183
    //                                                                                                           virtual: load tmp%11#0 from l-stack (no copy)                                             () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%10#0,tmp%11#0                                                                                                                                                                                                                                                                                                                                   pool_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:183
    ==                                                                                                           //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,{==}                                                                                                                                                                                                                                                                                         pool_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:183
    //                                                                                                           virtual: store tmp%12#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%12#0                                                                                                                                                                                                                                                                                                                                            pool_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:183
    //                                                                                                           virtual: load tmp%12#0 from l-stack (no copy)                                             () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,tmp%12#0                                                                                                                                                                                                                                                                                                                                            assert pool_xfer.sender == Txn.sender, "sender invalid"                                              amm/contract.py:183
    assert // sender invalid                                                                                     //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0                                                                                                                                                                                                                                                                                              assert pool_xfer.sender == Txn.sender, "sender invalid"                                              amm/contract.py:183
    callsub _current_pool_balance                                                                                //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,{_current_pool_balance}                                                                                                                                                                                                                                                                      number of tokens issued\n# !important: this happens prior to receiving the current axfer of pool ... amm/contract.py:185-187
    //                                                                                                           virtual: store pool_balance#0 to l-stack (no copy)                                        () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0                                                                                                                                                                                                                                                                                                                                      # Get the total number of tokens issued\n# !important: this happens prior to receiving the curren... amm/contract.py:185-187
    callsub _current_a_balance                                                                                   //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0,{_current_a_balance}                                                                                                                                                                                                                                                          self._current_a_balance()                                                                            amm/contract.py:190
    //                                                                                                           virtual: store tmp%13#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0,tmp%13#0                                                                                                                                                                                                                                                                                                                             self._current_a_balance()                                                                            amm/contract.py:190
    dig 1                                                                                                        //                                                                                        load pool_balance#0 from l-stack (copy)                                                                                                                     () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0,tmp%13#0,pool_balance#0                                                                                                                                                                                                                                                       a_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_a_balance(),\namount=po... amm/contract.py:188-192
    swap                                                                                                         //                                                                                        load tmp%13#0 from l-stack (no copy)                                                                                                                        () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0,pool_balance#0,tmp%13#0                                                                                                                                                                                                                                                       a_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_a_balance(),\namount=po... amm/contract.py:188-192
    dig 3                                                                                                        //                                                                                        load tmp%6#0 from l-stack (copy)                                                                                                                            () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0,pool_balance#0,tmp%13#0,tmp%6#0                                                                                                                                                                                                                                               a_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_a_balance(),\namount=po... amm/contract.py:188-192
    callsub tokens_to_burn                                                                                       //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%6#0,pool_balance#0,{tokens_to_burn}                                                                                                                                                                                                                                                              tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_a_balance(),\namount=pool_xfer.... amm/contract.py:188-192
    cover 2                                                                                                      //                                                                                        store a_amt#0 to l-stack (no copy)                                                                                                                          () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,tmp%6#0,pool_balance#0                                                                                                                                                                                                                                                                       a_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_a_balance(),\namount=po... amm/contract.py:188-192
    callsub _current_b_balance                                                                                   //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,tmp%6#0,pool_balance#0,{_current_b_balance}                                                                                                                                                                                                                                                  self._current_b_balance()                                                                            amm/contract.py:195
    //                                                                                                           virtual: store tmp%15#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,tmp%6#0,pool_balance#0,tmp%15#0                                                                                                                                                                                                                                                                                                                     self._current_b_balance()                                                                            amm/contract.py:195
    //                                                                                                           virtual: load pool_balance#0 from l-stack (no copy)                                       () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,tmp%6#0,tmp%15#0,pool_balance#0                                                                                                                                                                                                                                                                                                                     b_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_b_balance(),\namount=po... amm/contract.py:193-197
    //                                                                                                           virtual: load tmp%15#0 from l-stack (no copy)                                             () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,tmp%6#0,pool_balance#0,tmp%15#0                                                                                                                                                                                                                                                                                                                     b_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_b_balance(),\namount=po... amm/contract.py:193-197
    uncover 2                                                                                                    //                                                                                        load tmp%6#0 from l-stack (no copy)                                                                                                                         () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,pool_balance#0,tmp%15#0,tmp%6#0                                                                                                                                                                                                                                                              b_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_b_balance(),\namount=po... amm/contract.py:193-197
    callsub tokens_to_burn                                                                                       //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | a_amt#0,{tokens_to_burn}                                                                                                                                                                                                                                                                             tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_b_balance(),\namount=pool_xfer.... amm/contract.py:193-197
    swap                                                                                                         //                                                                                        store b_amt#0 to l-stack (no copy)                                                                                                                          () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0                                                                                                                                                                                                                                                                                      b_amt = tokens_to_burn(\npool_balance=pool_balance,\nsupply=self._current_b_balance(),\namount=po... amm/contract.py:193-197
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,{txn}                                                                                                                                                                                                                                                                                t of a\ndo_asset_transfer(receiver=Txn.sender                                                        amm/contract.py:199-200
    //                                                                                                           virtual: store tmp%17#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0                                                                                                                                                                                                                                                                                                                                    t of a\ndo_asset_transfer(receiver=Txn.sender                                                        amm/contract.py:199-200
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,0                                                                                                                                                                                                                                                                           \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,0,"asset_a"                                                                                                                                                                                                                                                                 \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                 \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    //                                                                                                           virtual: store asset_a_exists%1#0 to l-stack (no copy)                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,asset_a_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                           \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    //                                                                                                           virtual: store asset_a_value%1#0 to l-stack (no copy)                                     () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,asset_a_value%1#0,asset_a_exists%1#0                                                                                                                                                                                                                                                                                               \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    //                                                                                                           virtual: load asset_a_exists%1#0 from l-stack (no copy)                                   () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,asset_a_value%1#0,asset_a_exists%1#0                                                                                                                                                                                                                                                                                               \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,asset_a_value%1#0                                                                                                                                                                                                                                                           \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a                                          amm/contract.py:199-200
    //                                                                                                           virtual: load tmp%17#0 from l-stack (no copy)                                             () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,asset_a_value%1#0,tmp%17#0                                                                                                                                                                                                                                                                                                                  # Send back commensurate amt of a\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a, amo... amm/contract.py:199-200
    //                                                                                                           virtual: load asset_a_value%1#0 from l-stack (no copy)                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,a_amt#0,tmp%17#0,asset_a_value%1#0                                                                                                                                                                                                                                                                                                                  # Send back commensurate amt of a\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a, amo... amm/contract.py:199-200
    uncover 2                                                                                                    //                                                                                        load a_amt#0 from l-stack (no copy)                                                                                                                         () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%17#0,asset_a_value%1#0,a_amt#0                                                                                                                                                                                                                                                           # Send back commensurate amt of a\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a, amo... amm/contract.py:199-200
    callsub do_asset_transfer                                                                                    //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0                                                                                                                                                                                                                                                                                              # Send back commensurate amt of a\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_a, amo... amm/contract.py:199-200
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,{txn}                                                                                                                                                                                                                                                                                        t of b\ndo_asset_transfer(receiver=Txn.sender                                                        amm/contract.py:202-203
    //                                                                                                           virtual: store tmp%18#0 to l-stack (no copy)                                              () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0                                                                                                                                                                                                                                                                                                                                            t of b\ndo_asset_transfer(receiver=Txn.sender                                                        amm/contract.py:202-203
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,0                                                                                                                                                                                                                                                                                   \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,0,"asset_b"                                                                                                                                                                                                                                                                         \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                         \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    //                                                                                                           virtual: store asset_b_exists%1#0 to l-stack (no copy)                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,asset_b_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                   \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    //                                                                                                           virtual: store asset_b_value%1#0 to l-stack (no copy)                                     () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,asset_b_value%1#0,asset_b_exists%1#0                                                                                                                                                                                                                                                                                                       \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    //                                                                                                           virtual: load asset_b_exists%1#0 from l-stack (no copy)                                   () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,asset_b_value%1#0,asset_b_exists%1#0                                                                                                                                                                                                                                                                                                       \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,asset_b_value%1#0                                                                                                                                                                                                                                                                   \ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b                                          amm/contract.py:202-203
    //                                                                                                           virtual: load tmp%18#0 from l-stack (no copy)                                             () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,asset_b_value%1#0,tmp%18#0                                                                                                                                                                                                                                                                                                                          # Send back commensurate amt of b\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b, amo... amm/contract.py:202-203
    //                                                                                                           virtual: load asset_b_value%1#0 from l-stack (no copy)                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | b_amt#0,tmp%18#0,asset_b_value%1#0                                                                                                                                                                                                                                                                                                                          # Send back commensurate amt of b\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b, amo... amm/contract.py:202-203
    uncover 2                                                                                                    //                                                                                        load b_amt#0 from l-stack (no copy)                                                                                                                         () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 | tmp%18#0,asset_b_value%1#0,b_amt#0                                                                                                                                                                                                                                                                   # Send back commensurate amt of b\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b, amo... amm/contract.py:202-203
    callsub do_asset_transfer                                                                                    //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      # Send back commensurate amt of b\ndo_asset_transfer(receiver=Txn.sender, asset=self.asset_b, amo... amm/contract.py:202-203
    callsub _update_ratio                                                                                        //                                                                                                                                                                                                                                                    () pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                      self._update_ratio()                                                                                 amm/contract.py:204
    retsub                                                                                                       //


// examples.amm.contract.tokens_to_burn(pool_balance: uint64, supply: uint64, amount: uint64) -> uint64:
tokens_to_burn:
    proto 3 1                                                                                                    //                                                                                                                                                                                                                                                    () pool_balance#0,supply#0,amount#0 |                                                                                                                                                                                                                                                                                                                  @subroutine\ndef tokens_to_burn(*, pool_balance: UInt64, supply: UInt64, amount: UInt64) -> UInt64:  amm/contract.py:346-347

tokens_to_burn_block@0:
    int 10000000000                                                                                              //                                                                                                                                                                                                                                                    () pool_balance#0,supply#0,amount#0 | 10000000000                                                                                                                                                                                                                                                                                                      TOTAL_SUPPLY                                                                                         amm/contract.py:348
    frame_dig -3                                                                                                 //                                                                                        load pool_balance#0 from parameters                                                                                                                         () pool_balance#0,supply#0,amount#0 | 10000000000,pool_balance#0                                                                                                                                                                                                                                                                                       TOTAL_SUPPLY - pool_balance                                                                          amm/contract.py:348
    -                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,supply#0,amount#0 | {-}                                                                                                                                                                                                                                                                                                              TOTAL_SUPPLY - pool_balance                                                                          amm/contract.py:348
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () pool_balance#0,supply#0,amount#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                                 TOTAL_SUPPLY - pool_balance                                                                          amm/contract.py:348
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () pool_balance#0,supply#0,amount#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                                 issued = TOTAL_SUPPLY - pool_balance - amount                                                        amm/contract.py:348
    frame_dig -1                                                                                                 //                                                                                        load amount#0 from parameters                                                                                                                               () pool_balance#0,supply#0,amount#0 | tmp%0#0,amount#0                                                                                                                                                                                                                                                                                                 issued = TOTAL_SUPPLY - pool_balance - amount                                                        amm/contract.py:348
    -                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,supply#0,amount#0 | {-}                                                                                                                                                                                                                                                                                                              TOTAL_SUPPLY - pool_balance - amount                                                                 amm/contract.py:348
    //                                                                                                           virtual: store issued#0 to l-stack (no copy)                                              () pool_balance#0,supply#0,amount#0 | issued#0                                                                                                                                                                                                                                                                                                                                                                issued = TOTAL_SUPPLY - pool_balance - amount                                                        amm/contract.py:348
    frame_dig -2                                                                                                 //                                                                                        load supply#0 from parameters                                                                                                                               () pool_balance#0,supply#0,amount#0 | issued#0,supply#0                                                                                                                                                                                                                                                                                                supply * amount                                                                                      amm/contract.py:349
    frame_dig -1                                                                                                 //                                                                                        load amount#0 from parameters                                                                                                                               () pool_balance#0,supply#0,amount#0 | issued#0,supply#0,amount#0                                                                                                                                                                                                                                                                                       supply * amount                                                                                      amm/contract.py:349
    *                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,supply#0,amount#0 | issued#0,{*}                                                                                                                                                                                                                                                                                                     supply * amount                                                                                      amm/contract.py:349
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () pool_balance#0,supply#0,amount#0 | issued#0,tmp%1#0                                                                                                                                                                                                                                                                                                                                                        supply * amount                                                                                      amm/contract.py:349
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () pool_balance#0,supply#0,amount#0 | issued#0,tmp%1#0                                                                                                                                                                                                                                                                                                                                                        supply * amount // issued                                                                            amm/contract.py:349
    swap                                                                                                         //                                                                                        load issued#0 from l-stack (no copy)                                                                                                                        () pool_balance#0,supply#0,amount#0 | tmp%1#0,issued#0                                                                                                                                                                                                                                                                                                 supply * amount // issued                                                                            amm/contract.py:349
    /                                                                                                            //                                                                                                                                                                                                                                                    () pool_balance#0,supply#0,amount#0 | {/}                                                                                                                                                                                                                                                                                                              supply * amount // issued                                                                            amm/contract.py:349
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               () pool_balance#0,supply#0,amount#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                                                 supply * amount // issued                                                                            amm/contract.py:349
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () pool_balance#0,supply#0,amount#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                                                                 return supply * amount // issued                                                                     amm/contract.py:349
    retsub                                                                                                       //                                                                                                                                                                                                                                                    tmp%2#0                                                                                                                                                                                                                                                                                                                                                 return supply * amount // issued                                                                     amm/contract.py:349


// examples.amm.contract.ConstantProductAMM.swap(swap_xfer: uint64, a_asset: uint64, b_asset: uint64) -> void:
swap:
    proto 3 0                                                                                                    //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 |                                                                                                                                                                                                                                                                                                                   @arc4.abimethod(\ndefault_args={\n"a_asset": "asset_a",\n"b_asset": "asset_b",\n},\n)\ndef swap(\... amm/contract.py:206-217
    byte ""
    dup                                                                                                          //                                                                                        allocate 2 to stack                                                                                                                                         () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 |

swap_block@0:
    callsub _check_bootstrapped                                                                                  //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 |                                                                                                                                                                                                                                                                                     self._check_bootstrapped()                                                                           amm/contract.py:225
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | 0                                                                                                                                                                                                                                                                                   self.asset_a                                                                                         amm/contract.py:227
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | 0,"asset_a"                                                                                                                                                                                                                                                                         self.asset_a                                                                                         amm/contract.py:227
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                         self.asset_a                                                                                         amm/contract.py:227
    //                                                                                                           virtual: store asset_a_exists%0#0 to l-stack (no copy)                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_a_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                   self.asset_a                                                                                         amm/contract.py:227
    //                                                                                                           virtual: store asset_a_value%0#0 to l-stack (no copy)                                     () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                       self.asset_a                                                                                         amm/contract.py:227
    //                                                                                                           virtual: load asset_a_exists%0#0 from l-stack (no copy)                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_a_value%0#0,asset_a_exists%0#0                                                                                                                                                                                                                                                                                                       self.asset_a                                                                                         amm/contract.py:227
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_a_value%0#0                                                                                                                                                                                                                                                                   self.asset_a                                                                                         amm/contract.py:227
    frame_dig -2                                                                                                 //                                                                                        load a_asset#0 from parameters                                                                                                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_a_value%0#0,a_asset#0                                                                                                                                                                                                                                                         a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:227
    swap                                                                                                         //                                                                                        load asset_a_value%0#0 from l-stack (no copy)                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | a_asset#0,asset_a_value%0#0                                                                                                                                                                                                                                                         a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:227
    ==                                                                                                           //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | {==}                                                                                                                                                                                                                                                                                a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:227
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                    a_asset == self.asset_a, "asset a incorrect"                                                         amm/contract.py:227
    //                                                                                                           virtual: load tmp%0#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                    assert a_asset == self.asset_a, "asset a incorrect"                                                  amm/contract.py:227
    assert // asset a incorrect                                                                                  //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 |                                                                                                                                                                                                                                                                                     assert a_asset == self.asset_a, "asset a incorrect"                                                  amm/contract.py:227
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | 0                                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:228
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | 0,"asset_b"                                                                                                                                                                                                                                                                         self.asset_b                                                                                         amm/contract.py:228
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                         self.asset_b                                                                                         amm/contract.py:228
    //                                                                                                           virtual: store asset_b_exists%0#0 to l-stack (no copy)                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_b_exists%0#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:228
    //                                                                                                           virtual: store asset_b_value%0#0 to l-stack (no copy)                                     () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                       self.asset_b                                                                                         amm/contract.py:228
    //                                                                                                           virtual: load asset_b_exists%0#0 from l-stack (no copy)                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_b_value%0#0,asset_b_exists%0#0                                                                                                                                                                                                                                                                                                       self.asset_b                                                                                         amm/contract.py:228
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_b_value%0#0                                                                                                                                                                                                                                                                   self.asset_b                                                                                         amm/contract.py:228
    frame_dig -1                                                                                                 //                                                                                        load b_asset#0 from parameters                                                                                                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | asset_b_value%0#0,b_asset#0                                                                                                                                                                                                                                                         b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:228
    swap                                                                                                         //                                                                                        load asset_b_value%0#0 from l-stack (no copy)                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | b_asset#0,asset_b_value%0#0                                                                                                                                                                                                                                                         b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:228
    ==                                                                                                           //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | {==}                                                                                                                                                                                                                                                                                b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:228
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                    b_asset == self.asset_b, "asset b incorrect"                                                         amm/contract.py:228
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                    assert b_asset == self.asset_b, "asset b incorrect"                                                  amm/contract.py:228
    assert // asset b incorrect                                                                                  //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 |                                                                                                                                                                                                                                                                                     assert b_asset == self.asset_b, "asset b incorrect"                                                  amm/contract.py:228
    frame_dig -3                                                                                                 //                                                                                        load swap_xfer#0 from parameters                                                                                                                            () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | swap_xfer#0                                                                                                                                                                                                                                                                         swap_xfer.asset_amount                                                                               amm/contract.py:230
    gtxns AssetAmount                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | {gtxns}                                                                                                                                                                                                                                                                             swap_xfer.asset_amount                                                                               amm/contract.py:230
    dup                                                                                                          //                                                                                        store tmp%2#0 to l-stack (copy)                                                                                                                             () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0 | tmp%2#0,tmp%2#0                                                                                                                                                                                                                                                                     swap_xfer.asset_amount                                                                               amm/contract.py:230
    swap                                                                                                         //                                                                                        store tmp%2#0 to f-stack                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%2#0                                                                                                                                                                                                                                                                     swap_xfer.asset_amount                                                                               amm/contract.py:230
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%2#0                                                                                                                                                                                                                                                                                                                            assert swap_xfer.asset_amount > 0, "amount minimum not met"                                          amm/contract.py:230
    assert // amount minimum not met                                                                             //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             assert swap_xfer.asset_amount > 0, "amount minimum not met"                                          amm/contract.py:230
    frame_dig -3                                                                                                 //                                                                                        load swap_xfer#0 from parameters                                                                                                                            () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | swap_xfer#0                                                                                                                                                                                                                                                                 swap_xfer.sender                                                                                     amm/contract.py:231
    gtxns Sender                                                                                                 //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {gtxns}                                                                                                                                                                                                                                                                     swap_xfer.sender                                                                                     amm/contract.py:231
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%4#0                                                                                                                                                                                                                                                                                                                            swap_xfer.sender                                                                                     amm/contract.py:231
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%4#0,{txn}                                                                                                                                                                                                                                                               Txn.sender                                                                                           amm/contract.py:231
    //                                                                                                           virtual: store tmp%5#0 to l-stack (no copy)                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%4#0,tmp%5#0                                                                                                                                                                                                                                                                                                                    Txn.sender                                                                                           amm/contract.py:231
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%5#0,tmp%4#0                                                                                                                                                                                                                                                                                                                    swap_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:231
    //                                                                                                           virtual: load tmp%5#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%4#0,tmp%5#0                                                                                                                                                                                                                                                                                                                    swap_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:231
    ==                                                                                                           //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {==}                                                                                                                                                                                                                                                                        swap_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:231
    //                                                                                                           virtual: store tmp%6#0 to l-stack (no copy)                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%6#0                                                                                                                                                                                                                                                                                                                            swap_xfer.sender == Txn.sender, "sender invalid"                                                     amm/contract.py:231
    //                                                                                                           virtual: load tmp%6#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%6#0                                                                                                                                                                                                                                                                                                                            assert swap_xfer.sender == Txn.sender, "sender invalid"                                              amm/contract.py:231
    assert // sender invalid                                                                                     //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             assert swap_xfer.sender == Txn.sender, "sender invalid"                                              amm/contract.py:231
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | 0                                                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:234
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | 0,"asset_a"                                                                                                                                                                                                                                                                 self.asset_a                                                                                         amm/contract.py:234
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                                                 self.asset_a                                                                                         amm/contract.py:234
    //                                                                                                           virtual: store asset_a_exists%1#0 to l-stack (no copy)                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:234
    //                                                                                                           virtual: store asset_a_value%1#0 to l-stack (no copy)                                     () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_a_exists%1#0                                                                                                                                                                                                                                                                                               self.asset_a                                                                                         amm/contract.py:234
    //                                                                                                           virtual: load asset_a_exists%1#0 from l-stack (no copy)                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_a_exists%1#0                                                                                                                                                                                                                                                                                               self.asset_a                                                                                         amm/contract.py:234
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0                                                                                                                                                                                                                                                           self.asset_a                                                                                         amm/contract.py:234
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,0                                                                                                                                                                                                                                                         self.asset_b                                                                                         amm/contract.py:238
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,0,"asset_b"                                                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:238
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,{app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                               self.asset_b                                                                                         amm/contract.py:238
    //                                                                                                           virtual: store asset_b_exists%1#0 to l-stack (no copy)                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_exists%1#0,{app_global_get_ex}.0                                                                                                                                                                                                                                                                         self.asset_b                                                                                         amm/contract.py:238
    //                                                                                                           virtual: store asset_b_value%1#0 to l-stack (no copy)                                     () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0,asset_b_exists%1#0                                                                                                                                                                                                                                                                             self.asset_b                                                                                         amm/contract.py:238
    //                                                                                                           virtual: load asset_b_exists%1#0 from l-stack (no copy)                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0,asset_b_exists%1#0                                                                                                                                                                                                                                                                             self.asset_b                                                                                         amm/contract.py:238
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0                                                                                                                                                                                                                                         self.asset_b                                                                                         amm/contract.py:238
    frame_dig -3                                                                                                 //                                                                                        load swap_xfer#0 from parameters                                                                                                                            () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0,swap_xfer#0                                                                                                                                                                                                                             swap_xfer.xfer_asset                                                                                 amm/contract.py:233
    gtxns XferAsset                                                                                              //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0,{gtxns}                                                                                                                                                                                                                                 swap_xfer.xfer_asset                                                                                 amm/contract.py:233
    //                                                                                                           virtual: store awst_tmp%0#0 to l-stack (no copy)                                          () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0,awst_tmp%0#0                                                                                                                                                                                                                                                                                   swap_xfer.xfer_asset                                                                                 amm/contract.py:233
    uncover 2                                                                                                    //                                                                                        load asset_a_value%1#0 from l-stack (no copy)                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_b_value%1#0,awst_tmp%0#0,asset_a_value%1#0                                                                                                                                                                                                                            match swap_xfer.xfer_asset:\ncase self.asset_a:\nin_supply = self._current_b_balance()\nout_suppl... amm/contract.py:233-243
    uncover 2                                                                                                    //                                                                                        load asset_b_value%1#0 from l-stack (no copy)                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | awst_tmp%0#0,asset_a_value%1#0,asset_b_value%1#0                                                                                                                                                                                                                            match swap_xfer.xfer_asset:\ncase self.asset_a:\nin_supply = self._current_b_balance()\nout_suppl... amm/contract.py:233-243
    uncover 2                                                                                                    //                                                                                        load awst_tmp%0#0 from l-stack (no copy)                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | asset_a_value%1#0,asset_b_value%1#0,awst_tmp%0#0                                                                                                                                                                                                                            match swap_xfer.xfer_asset:\ncase self.asset_a:\nin_supply = self._current_b_balance()\nout_suppl... amm/contract.py:233-243
    match swap_switch_case_0@1 swap_switch_case_1@2                                                              //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             match swap_xfer.xfer_asset:\ncase self.asset_a:\nin_supply = self._current_b_balance()\nout_suppl... amm/contract.py:233-243
    err // asset id incorrect                                                                                    //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             assert False, "asset id incorrect"                                                                   amm/contract.py:243

swap_switch_case_0@1:
    callsub _current_b_balance                                                                                   //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {_current_b_balance}                                                                                                                                                                                                                                                        self._current_b_balance()                                                                            amm/contract.py:235
    frame_bury 0                                                                                                 //                                                                                        store in_supply#0 to f-stack                                                                                                                                () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             in_supply = self._current_b_balance()                                                                amm/contract.py:235
    callsub _current_a_balance                                                                                   //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {_current_a_balance}                                                                                                                                                                                                                                                        self._current_a_balance()                                                                            amm/contract.py:236
    //                                                                                                           virtual: store out_supply#0 to x-stack (no copy)                                          () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 |                                                                                                                                                                                                                                                                                                                 out_supply = self._current_a_balance()                                                               amm/contract.py:236
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | 0                                                                                                                                                                                                                                                        self.asset_a                                                                                         amm/contract.py:237
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | 0,"asset_a"                                                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:237
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:237
    swap                                                                                                         //                                                                                        store asset_a_exists%2#0 to l-stack (no copy)                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | asset_a_exists%2#0,{app_global_get_ex}.0                                                                                                                                                                                                                 self.asset_a                                                                                         amm/contract.py:237
    frame_bury 1                                                                                                 //                                                                                        store out_asset#0 to f-stack                                                                                                                                () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | asset_a_exists%2#0                                                                                                                                                                                                                                       self.asset_a                                                                                         amm/contract.py:237
    //                                                                                                           virtual: load asset_a_exists%2#0 from l-stack (no copy)                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | asset_a_exists%2#0                                                                                                                                                                                                                                                                                              self.asset_a                                                                                         amm/contract.py:237
    assert // check asset_a exists                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 |                                                                                                                                                                                                                                                          self.asset_a                                                                                         amm/contract.py:237
    b swap_switch_case_next@4                                                                                    //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 |                                                                                                                                                     out_supply#0

swap_switch_case_1@2:
    callsub _current_a_balance                                                                                   //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {_current_a_balance}                                                                                                                                                                                                                                                        self._current_a_balance()                                                                            amm/contract.py:239
    frame_bury 0                                                                                                 //                                                                                        store in_supply#0 to f-stack                                                                                                                                () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             in_supply = self._current_a_balance()                                                                amm/contract.py:239
    callsub _current_b_balance                                                                                   //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {_current_b_balance}                                                                                                                                                                                                                                                        self._current_b_balance()                                                                            amm/contract.py:240
    //                                                                                                           virtual: store out_supply#0 to x-stack (no copy)                                          () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 |                                                                                                                                                                                                                                                                                                                 out_supply = self._current_b_balance()                                                               amm/contract.py:240
    int 0                                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | 0                                                                                                                                                                                                                                                        self.asset_b                                                                                         amm/contract.py:241
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | 0,"asset_b"                                                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:241
    app_global_get_ex                                                                                            //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | {app_global_get_ex}.0,{app_global_get_ex}.1                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:241
    swap                                                                                                         //                                                                                        store asset_b_exists%2#0 to l-stack (no copy)                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | asset_b_exists%2#0,{app_global_get_ex}.0                                                                                                                                                                                                                 self.asset_b                                                                                         amm/contract.py:241
    frame_bury 1                                                                                                 //                                                                                        store out_asset#0 to f-stack                                                                                                                                () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | asset_b_exists%2#0                                                                                                                                                                                                                                       self.asset_b                                                                                         amm/contract.py:241
    //                                                                                                           virtual: load asset_b_exists%2#0 from l-stack (no copy)                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | asset_b_exists%2#0                                                                                                                                                                                                                                                                                              self.asset_b                                                                                         amm/contract.py:241
    assert // check asset_b exists                                                                               //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 |                                                                                                                                                                                                                                                          self.asset_b                                                                                         amm/contract.py:241
    // Implicit fall through to swap_switch_case_next@4                                                          //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 |                                                                                                                                                     out_supply#0

swap_switch_case_next@4:
    frame_dig 2                                                                                                  //                                                                                        load tmp%2#0 from f-stack                                                                                                                                   () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | tmp%2#0                                                                                                                                             out_supply#0                                                                                         to_swap = tokens_to_swap(\nin_amount=swap_xfer.asset_amount, in_supply=in_supply, out_supply=out_... amm/contract.py:245-247
    frame_dig 0                                                                                                  //                                                                                        load in_supply#0 from f-stack                                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | () out_supply#0 | tmp%2#0,in_supply#0                                                                                                                                                                                                                                      to_swap = tokens_to_swap(\nin_amount=swap_xfer.asset_amount, in_supply=in_supply, out_supply=out_... amm/contract.py:245-247
    uncover 2                                                                                                    //                                                                                        load out_supply#0 from x-stack                                                                                                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%2#0,in_supply#0,out_supply#0                                                                                                                                                                                                                                            to_swap = tokens_to_swap(\nin_amount=swap_xfer.asset_amount, in_supply=in_supply, out_supply=out_... amm/contract.py:245-247
    callsub tokens_to_swap                                                                                       //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | {tokens_to_swap}                                                                                                                                                                                                                                                            tokens_to_swap(\nin_amount=swap_xfer.asset_amount, in_supply=in_supply, out_supply=out_supply\n)     amm/contract.py:245-247
    //                                                                                                           virtual: store to_swap#0 to l-stack (no copy)                                             () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0                                                                                                                                                                                                                                                                                                                          to_swap = tokens_to_swap(\nin_amount=swap_xfer.asset_amount, in_supply=in_supply, out_supply=out_... amm/contract.py:245-247
    dup                                                                                                          //                                                                                        load to_swap#0 from l-stack (copy)                                                                                                                          () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0,to_swap#0                                                                                                                                                                                                                                                         assert to_swap > 0, "send amount too low"                                                            amm/contract.py:248
    assert // send amount too low                                                                                //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0                                                                                                                                                                                                                                                                   assert to_swap > 0, "send amount too low"                                                            amm/contract.py:248
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0,{txn}                                                                                                                                                                                                                                                             Txn.sender                                                                                           amm/contract.py:250
    //                                                                                                           virtual: store tmp%9#0 to l-stack (no copy)                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0,tmp%9#0                                                                                                                                                                                                                                                                                                                  Txn.sender                                                                                           amm/contract.py:250
    //                                                                                                           virtual: load tmp%9#0 from l-stack (no copy)                                              () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0,tmp%9#0                                                                                                                                                                                                                                                                                                                  do_asset_transfer(receiver=Txn.sender, asset=out_asset, amount=to_swap)                              amm/contract.py:250
    frame_dig 1                                                                                                  //                                                                                        load out_asset#0 from f-stack                                                                                                                               () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | to_swap#0,tmp%9#0,out_asset#0                                                                                                                                                                                                                                               do_asset_transfer(receiver=Txn.sender, asset=out_asset, amount=to_swap)                              amm/contract.py:250
    uncover 2                                                                                                    //                                                                                        load to_swap#0 from l-stack (no copy)                                                                                                                       () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 | tmp%9#0,out_asset#0,to_swap#0                                                                                                                                                                                                                                               do_asset_transfer(receiver=Txn.sender, asset=out_asset, amount=to_swap)                              amm/contract.py:250
    callsub do_asset_transfer                                                                                    //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             do_asset_transfer(receiver=Txn.sender, asset=out_asset, amount=to_swap)                              amm/contract.py:250
    callsub _update_ratio                                                                                        //                                                                                                                                                                                                                                                    () swap_xfer#0,a_asset#0,b_asset#0 | () in_supply#0,out_asset#0,tmp%2#0 |                                                                                                                                                                                                                                                                             self._update_ratio()                                                                                 amm/contract.py:251
    retsub                                                                                                       //


// examples.amm.contract.tokens_to_swap(in_amount: uint64, in_supply: uint64, out_supply: uint64) -> uint64:
tokens_to_swap:
    proto 3 1                                                                                                    //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 |                                                                                                                                                                                                                                                                                                              @subroutine\ndef tokens_to_swap(*, in_amount: UInt64, in_supply: UInt64, out_supply: UInt64) -> U... amm/contract.py:352-353

tokens_to_swap_block@0:
    frame_dig -2                                                                                                 //                                                                                        load in_supply#0 from parameters                                                                                                                            () in_amount#0,in_supply#0,out_supply#0 | in_supply#0                                                                                                                                                                                                                                                                                                  in_supply - in_amount                                                                                amm/contract.py:354
    frame_dig -3                                                                                                 //                                                                                        load in_amount#0 from parameters                                                                                                                            () in_amount#0,in_supply#0,out_supply#0 | in_supply#0,in_amount#0                                                                                                                                                                                                                                                                                      in_supply - in_amount                                                                                amm/contract.py:354
    -                                                                                                            //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | {-}                                                                                                                                                                                                                                                                                                          in_supply - in_amount                                                                                amm/contract.py:354
    //                                                                                                           virtual: store tmp%0#0 to l-stack (no copy)                                               () in_amount#0,in_supply#0,out_supply#0 | tmp%0#0                                                                                                                                                                                                                                                                                                                                                             in_supply - in_amount                                                                                amm/contract.py:354
    int 1000                                                                                                     //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | tmp%0#0,1000                                                                                                                                                                                                                                                                                                 SCALE                                                                                                amm/contract.py:354
    swap                                                                                                         //                                                                                        load tmp%0#0 from l-stack (no copy)                                                                                                                         () in_amount#0,in_supply#0,out_supply#0 | 1000,tmp%0#0                                                                                                                                                                                                                                                                                                 SCALE * (in_supply - in_amount)                                                                      amm/contract.py:354
    *                                                                                                            //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | {*}                                                                                                                                                                                                                                                                                                          SCALE * (in_supply - in_amount)                                                                      amm/contract.py:354
    //                                                                                                           virtual: store tmp%1#0 to l-stack (no copy)                                               () in_amount#0,in_supply#0,out_supply#0 | tmp%1#0                                                                                                                                                                                                                                                                                                                                                             SCALE * (in_supply - in_amount)                                                                      amm/contract.py:354
    frame_dig -3                                                                                                 //                                                                                        load in_amount#0 from parameters                                                                                                                            () in_amount#0,in_supply#0,out_supply#0 | tmp%1#0,in_amount#0                                                                                                                                                                                                                                                                                          in_amount * FACTOR                                                                                   amm/contract.py:354
    int 995                                                                                                      //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | tmp%1#0,in_amount#0,995                                                                                                                                                                                                                                                                                      FACTOR                                                                                               amm/contract.py:354
    *                                                                                                            //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | tmp%1#0,{*}                                                                                                                                                                                                                                                                                                  in_amount * FACTOR                                                                                   amm/contract.py:354
    //                                                                                                           virtual: store tmp%2#0 to l-stack (no copy)                                               () in_amount#0,in_supply#0,out_supply#0 | tmp%1#0,tmp%2#0                                                                                                                                                                                                                                                                                                                                                     in_amount * FACTOR                                                                                   amm/contract.py:354
    //                                                                                                           virtual: load tmp%1#0 from l-stack (no copy)                                              () in_amount#0,in_supply#0,out_supply#0 | tmp%2#0,tmp%1#0                                                                                                                                                                                                                                                                                                                                                     in_total = SCALE * (in_supply - in_amount) + (in_amount * FACTOR)                                    amm/contract.py:354
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () in_amount#0,in_supply#0,out_supply#0 | tmp%1#0,tmp%2#0                                                                                                                                                                                                                                                                                                                                                     in_total = SCALE * (in_supply - in_amount) + (in_amount * FACTOR)                                    amm/contract.py:354
    dup
    cover 2                                                                                                      //                                                                                        store tmp%2#0 to l-stack (copy)                                                                                                                             () in_amount#0,in_supply#0,out_supply#0 | tmp%2#0,tmp%1#0,tmp%2#0                                                                                                                                                                                                                                                                                      in_total = SCALE * (in_supply - in_amount) + (in_amount * FACTOR)                                    amm/contract.py:354
    +                                                                                                            //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | tmp%2#0,{+}                                                                                                                                                                                                                                                                                                  SCALE * (in_supply - in_amount) + (in_amount * FACTOR)                                               amm/contract.py:354
    swap                                                                                                         //                                                                                        store in_total#0 to l-stack (no copy)                                                                                                                       () in_amount#0,in_supply#0,out_supply#0 | in_total#0,tmp%2#0                                                                                                                                                                                                                                                                                           in_total = SCALE * (in_supply - in_amount) + (in_amount * FACTOR)                                    amm/contract.py:354
    //                                                                                                           virtual: load tmp%2#0 from l-stack (no copy)                                              () in_amount#0,in_supply#0,out_supply#0 | in_total#0,tmp%2#0                                                                                                                                                                                                                                                                                                                                                  out_total = in_amount * FACTOR * out_supply                                                          amm/contract.py:355
    frame_dig -1                                                                                                 //                                                                                        load out_supply#0 from parameters                                                                                                                           () in_amount#0,in_supply#0,out_supply#0 | in_total#0,tmp%2#0,out_supply#0                                                                                                                                                                                                                                                                              out_total = in_amount * FACTOR * out_supply                                                          amm/contract.py:355
    *                                                                                                            //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | in_total#0,{*}                                                                                                                                                                                                                                                                                               in_amount * FACTOR * out_supply                                                                      amm/contract.py:355
    //                                                                                                           virtual: store out_total#0 to l-stack (no copy)                                           () in_amount#0,in_supply#0,out_supply#0 | in_total#0,out_total#0                                                                                                                                                                                                                                                                                                                                              out_total = in_amount * FACTOR * out_supply                                                          amm/contract.py:355
    //                                                                                                           virtual: load out_total#0 from l-stack (no copy)                                          () in_amount#0,in_supply#0,out_supply#0 | in_total#0,out_total#0                                                                                                                                                                                                                                                                                                                                              out_total // in_total                                                                                amm/contract.py:356
    swap                                                                                                         //                                                                                        load in_total#0 from l-stack (no copy)                                                                                                                      () in_amount#0,in_supply#0,out_supply#0 | out_total#0,in_total#0                                                                                                                                                                                                                                                                                       out_total // in_total                                                                                amm/contract.py:356
    /                                                                                                            //                                                                                                                                                                                                                                                    () in_amount#0,in_supply#0,out_supply#0 | {/}                                                                                                                                                                                                                                                                                                          out_total // in_total                                                                                amm/contract.py:356
    //                                                                                                           virtual: store tmp%4#0 to l-stack (no copy)                                               () in_amount#0,in_supply#0,out_supply#0 | tmp%4#0                                                                                                                                                                                                                                                                                                                                                             out_total // in_total                                                                                amm/contract.py:356
    //                                                                                                           virtual: load tmp%4#0 from l-stack (no copy)                                              () in_amount#0,in_supply#0,out_supply#0 | tmp%4#0                                                                                                                                                                                                                                                                                                                                                             return out_total // in_total                                                                         amm/contract.py:356
    retsub                                                                                                       //                                                                                                                                                                                                                                                    tmp%4#0                                                                                                                                                                                                                                                                                                                                                 return out_total // in_total                                                                         amm/contract.py:356


// examples.amm.contract.ConstantProductAMM.__init__() -> void:
__init__:
    proto 0 0                                                                                                    //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            def __init__(self) -> None:                                                                          amm/contract.py:28

__init___block@0:
    byte "asset_a"                                                                                               //                                                                                                                                                                                                                                                    "asset_a"                                                                                                                                                                                                                                                                                                                                               # The asset id of asset A\nself.asset_a                                                              amm/contract.py:32-33
    int 0                                                                                                        //                                                                                                                                                                                                                                                    "asset_a",0                                                                                                                                                                                                                                                                                                                                             of asset A\nself.asset_a = Asset()                                                                   amm/contract.py:32-33
    app_global_put                                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # The asset id of asset A\nself.asset_a = Asset()                                                    amm/contract.py:32-33
    byte "asset_b"                                                                                               //                                                                                                                                                                                                                                                    "asset_b"                                                                                                                                                                                                                                                                                                                                               # The asset id of asset B\nself.asset_b                                                              amm/contract.py:34-35
    int 0                                                                                                        //                                                                                                                                                                                                                                                    "asset_b",0                                                                                                                                                                                                                                                                                                                                             of asset B\nself.asset_b = Asset()                                                                   amm/contract.py:34-35
    app_global_put                                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # The asset id of asset B\nself.asset_b = Asset()                                                    amm/contract.py:34-35
    txn Sender                                                                                                   //                                                                                                                                                                                                                                                    {txn}                                                                                                                                                                                                                                                                                                                                                   vernor of this contract, allowed to do admin type actions\nself.governor = Txn.sender                amm/contract.py:36-37
    //                                                                                                           virtual: store new_state_value%0#0 to l-stack (no copy)                                   new_state_value%0#0                                                                                                                                                                                                                                                                                                                                                                                            vernor of this contract, allowed to do admin type actions\nself.governor = Txn.sender                amm/contract.py:36-37
    byte "governor"                                                                                              //                                                                                                                                                                                                                                                    new_state_value%0#0,"governor"                                                                                                                                                                                                                                                                                                                          # The current governor of this contract, allowed to do admin type actions\nself.governor             amm/contract.py:36-37
    swap                                                                                                         //                                                                                        load new_state_value%0#0 from l-stack (no copy)                                                                                                             "governor",new_state_value%0#0                                                                                                                                                                                                                                                                                                                          # The current governor of this contract, allowed to do admin type actions\nself.governor = Txn.se... amm/contract.py:36-37
    app_global_put                                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # The current governor of this contract, allowed to do admin type actions\nself.governor = Txn.se... amm/contract.py:36-37
    byte "pool_token"                                                                                            //                                                                                                                                                                                                                                                    "pool_token"                                                                                                                                                                                                                                                                                                                                            # The asset id of the Pool Token, used to track share of pool the holder may recover\nself.pool_t... amm/contract.py:38-39
    int 0                                                                                                        //                                                                                                                                                                                                                                                    "pool_token",0                                                                                                                                                                                                                                                                                                                                          the Pool Token, used to track share of pool the holder may recover\nself.pool_token = Asset()        amm/contract.py:38-39
    app_global_put                                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # The asset id of the Pool Token, used to track share of pool the holder may recover\nself.pool_t... amm/contract.py:38-39
    byte "ratio"                                                                                                 //                                                                                                                                                                                                                                                    "ratio"                                                                                                                                                                                                                                                                                                                                                 # The ratio between assets (A*Scale/B)\nself.ratio                                                   amm/contract.py:40-41
    int 0                                                                                                        //                                                                                                                                                                                                                                                    "ratio",0                                                                                                                                                                                                                                                                                                                                               etween assets (A*Scale/B)\nself.ratio = UInt64(0)                                                    amm/contract.py:40-41
    app_global_put                                                                                               //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # The ratio between assets (A*Scale/B)\nself.ratio = UInt64(0)                                       amm/contract.py:40-41
    retsub                                                                                                       //

