// Op                                                                                             Stack (out)
// algopy.arc4.ARC4Contract.approval_program() -> uint64:
subroutine main:
    main_block@0:
        txn ApplicationID                                                                         tmp%0#0
        l-load tmp%0#0 0                                                                          tmp%0#0
        bz main_call___init__@1 ; b main_after_if_else@2

    main_call___init__@1:
        // amm/contract.py:33
        // self.asset_a = Asset()
        byte "asset_a"                                                                            "asset_a"
        int 0                                                                                     "asset_a",0
        app_global_put
        // amm/contract.py:35
        // self.asset_b = Asset()
        byte "asset_b"                                                                            "asset_b"
        int 0                                                                                     "asset_b",0
        app_global_put
        // amm/contract.py:37
        // self.governor = Txn.sender
        txn Sender                                                                                tmp%0#2
        byte "governor"                                                                           tmp%0#2,"governor"
        l-load tmp%0#2 1                                                                          "governor",tmp%0#2
        app_global_put
        // amm/contract.py:39
        // self.pool_token = Asset()
        byte "pool_token"                                                                         "pool_token"
        int 0                                                                                     "pool_token",0
        app_global_put
        // amm/contract.py:41
        // self.ratio = UInt64(0)
        byte "ratio"                                                                              "ratio"
        int 0                                                                                     "ratio",0
        app_global_put
        b main_after_if_else@2

    main_after_if_else@2:
        // amm/contract.py:27
        // class ConstantProductAMM(ARC4Contract):
        txn NumAppArgs                                                                            tmp%0#1
        l-load tmp%0#1 0                                                                          tmp%0#1
        bz main___algopy_default_create@14 ; b main_abi_routing@4

    main_abi_routing@4:
        // amm/contract.py:27
        // class ConstantProductAMM(ARC4Contract):
        txn OnCompletion                                                                          tmp%2#0
        l-load tmp%2#0 0                                                                          tmp%2#0
        !                                                                                         tmp%3#0
        l-load tmp%3#0 0                                                                          tmp%3#0
        assert // OnCompletion must be NoOp
        txn ApplicationID                                                                         tmp%4#0
        l-load tmp%4#0 0                                                                          tmp%4#0
        assert
        txna ApplicationArgs 0                                                                    tmp%6#0
        method set_governor(address)void                                                          tmp%6#0,Method(set_governor(address)void)
        method bootstrap(pay,asset,asset)uint64                                                   tmp%6#0,Method(set_governor(address)void),Method(bootstrap(pay,asset,asset)uint64)
        method mint(axfer,axfer,asset,asset,asset)void                                            tmp%6#0,Method(set_governor(address)void),Method(bootstrap(pay,asset,asset)uint64),Method(mint(axfer,axfer,asset,asset,asset)void)
        method burn(axfer,asset,asset,asset)void                                                  tmp%6#0,Method(set_governor(address)void),Method(bootstrap(pay,asset,asset)uint64),Method(mint(axfer,axfer,asset,asset,asset)void),Method(burn(axfer,asset,asset,asset)void)
        method swap(axfer,asset,asset)void                                                        tmp%6#0,Method(set_governor(address)void),Method(bootstrap(pay,asset,asset)uint64),Method(mint(axfer,axfer,asset,asset,asset)void),Method(burn(axfer,asset,asset,asset)void),Method(swap(axfer,asset,asset)void)
        l-load tmp%6#0 5                                                                          Method(set_governor(address)void),Method(bootstrap(pay,asset,asset)uint64),Method(mint(axfer,axfer,asset,asset,asset)void),Method(burn(axfer,asset,asset,asset)void),Method(swap(axfer,asset,asset)void),tmp%6#0
        match main_set_governor_route@6 main_bootstrap_route@7 main_mint_route@8 main_burn_route@9 main_swap_route@10 ; b main_after_if_else@13 

    main_set_governor_route@6:
        // amm/contract.py:43
        // @arc4.abimethod()
        callsub set_governor
        b main_after_if_else@13

    main_bootstrap_route@7:
        // amm/contract.py:49
        // @arc4.abimethod(resource_encoding="index")
        callsub bootstrap
        b main_after_if_else@13

    main_mint_route@8:
        // amm/contract.py:81-88
        // @arc4.abimethod(
        //     default_args={
        //         "pool_asset": "pool_token",
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        callsub mint
        b main_after_if_else@13

    main_burn_route@9:
        // amm/contract.py:148-155
        // @arc4.abimethod(
        //     default_args={
        //         "pool_asset": "pool_token",
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        callsub burn
        b main_after_if_else@13

    main_swap_route@10:
        // amm/contract.py:206-212
        // @arc4.abimethod(
        //     default_args={
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        callsub swap
        b main_after_if_else@13

    main_after_if_else@13:
        // amm/contract.py:27
        // class ConstantProductAMM(ARC4Contract):
        err

    main___algopy_default_create@14:
        txn OnCompletion                                                                          tmp%7#0
        l-load tmp%7#0 0                                                                          tmp%7#0
        !                                                                                         tmp%8#0
        txn ApplicationID                                                                         tmp%8#0,tmp%9#0
        l-load tmp%9#0 0                                                                          tmp%8#0,tmp%9#0
        !                                                                                         tmp%8#0,tmp%10#0
        l-load tmp%8#0 1                                                                          tmp%10#0,tmp%8#0
        l-load tmp%10#0 1                                                                         tmp%8#0,tmp%10#0
        &&                                                                                        tmp%11#0
        l-load tmp%11#0 0                                                                         tmp%11#0
        assert // OnCompletion must be NoOp && can only call when creating
        int 1                                                                                     1
        return


// examples.amm.contract.do_asset_transfer(receiver: bytes, asset: uint64, amount: uint64) -> void:
subroutine do_asset_transfer:
    do_asset_transfer_block@0:                                                                    (洧도) receiver#0,asset#0,amount#0 |
        // amm/contract.py:361-365
        // itxn.AssetTransfer(
        //     xfer_asset=asset,
        //     asset_amount=amount,
        //     asset_receiver=receiver,
        // ).submit()
        itxn_begin                                                                                (洧도) receiver#0,asset#0,amount#0 |
        p-load receiver#0                                                                         (洧도) receiver#0,asset#0,amount#0 | receiver#0 (copy)
        itxn_field AssetReceiver                                                                  (洧도) receiver#0,asset#0,amount#0 |
        p-load amount#0                                                                           (洧도) receiver#0,asset#0,amount#0 | amount#0 (copy)
        itxn_field AssetAmount                                                                    (洧도) receiver#0,asset#0,amount#0 |
        p-load asset#0                                                                            (洧도) receiver#0,asset#0,amount#0 | asset#0 (copy)
        itxn_field XferAsset                                                                      (洧도) receiver#0,asset#0,amount#0 |
        // amm/contract.py:361
        // itxn.AssetTransfer(
        int axfer                                                                                 (洧도) receiver#0,asset#0,amount#0 | axfer
        itxn_field TypeEnum                                                                       (洧도) receiver#0,asset#0,amount#0 |
        int 0                                                                                     (洧도) receiver#0,asset#0,amount#0 | 0
        itxn_field Fee                                                                            (洧도) receiver#0,asset#0,amount#0 |
        // amm/contract.py:361-365
        // itxn.AssetTransfer(
        //     xfer_asset=asset,
        //     asset_amount=amount,
        //     asset_receiver=receiver,
        // ).submit()
        itxn_submit                                                                               (洧도) receiver#0,asset#0,amount#0 |
        retsub


// examples.amm.contract.ConstantProductAMM.set_governor[routing]() -> void:
subroutine set_governor:
    set_governor_block@0:
        // amm/contract.py:43
        // @arc4.abimethod()
        txna ApplicationArgs 1                                                                    new_governor#0
        // amm/contract.py:46
        // self._check_is_governor()
        callsub _check_is_governor                                                                new_governor#0
        // amm/contract.py:47
        // self.governor = new_governor
        byte "governor"                                                                           new_governor#0,"governor"
        l-load new_governor#0 1                                                                   "governor",new_governor#0
        app_global_put
        // amm/contract.py:43
        // @arc4.abimethod()
        int 1                                                                                     1
        return


// examples.amm.contract.ConstantProductAMM.bootstrap[routing]() -> void:
subroutine bootstrap:
    bootstrap_block@0:
        // amm/contract.py:49
        // @arc4.abimethod(resource_encoding="index")
        txn GroupIndex                                                                            tmp%0#0
        l-load tmp%0#0 0                                                                          tmp%0#0
        int 1                                                                                     tmp%0#0,1
        -                                                                                         seed#0
        l-load-copy seed#0 0                                                                      seed#0,seed#0 (copy)
        gtxns TypeEnum                                                                            seed#0,gtxn_type%0#0
        l-load gtxn_type%0#0 0                                                                    seed#0,gtxn_type%0#0
        int pay                                                                                   seed#0,gtxn_type%0#0,pay
        ==                                                                                        seed#0,gtxn_type_matches%0#0
        l-load gtxn_type_matches%0#0 0                                                            seed#0,gtxn_type_matches%0#0
        assert // transaction type is pay                                                         seed#0
        txna ApplicationArgs 1                                                                    seed#0,reinterpret_Encoded(uint8)%0#0
        l-load reinterpret_Encoded(uint8)%0#0 0                                                   seed#0,reinterpret_Encoded(uint8)%0#0
        btoi                                                                                      seed#0,tmp%1#0
        l-load tmp%1#0 0                                                                          seed#0,tmp%1#0
        txnas Assets                                                                              seed#0,a_asset#0
        txna ApplicationArgs 2                                                                    seed#0,a_asset#0,reinterpret_Encoded(uint8)%1#0
        l-load reinterpret_Encoded(uint8)%1#0 0                                                   seed#0,a_asset#0,reinterpret_Encoded(uint8)%1#0
        btoi                                                                                      seed#0,a_asset#0,tmp%3#0
        l-load tmp%3#0 0                                                                          seed#0,a_asset#0,tmp%3#0
        txnas Assets                                                                              seed#0,a_asset#0,b_asset#0
        // amm/contract.py:66
        // assert not self.pool_token, "application has already been bootstrapped"
        int 0                                                                                     seed#0,a_asset#0,b_asset#0,0
        byte "pool_token"                                                                         seed#0,a_asset#0,b_asset#0,0,"pool_token"
        app_global_get_ex                                                                         seed#0,a_asset#0,b_asset#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 seed#0,a_asset#0,b_asset#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.pool_token exists                                                    seed#0,a_asset#0,b_asset#0,maybe_value%0#0
        l-load maybe_value%0#0 0                                                                  seed#0,a_asset#0,b_asset#0,maybe_value%0#0
        !                                                                                         seed#0,a_asset#0,b_asset#0,tmp%0#1
        l-load tmp%0#1 0                                                                          seed#0,a_asset#0,b_asset#0,tmp%0#1
        assert // application has already been bootstrapped                                       seed#0,a_asset#0,b_asset#0
        // amm/contract.py:67
        // self._check_is_governor()
        callsub _check_is_governor                                                                seed#0,a_asset#0,b_asset#0
        // amm/contract.py:68
        // assert Global.group_size == 2, "group size not 2"
        global GroupSize                                                                          seed#0,a_asset#0,b_asset#0,tmp%1#0
        l-load tmp%1#0 0                                                                          seed#0,a_asset#0,b_asset#0,tmp%1#0
        int 2                                                                                     seed#0,a_asset#0,b_asset#0,tmp%1#0,2
        ==                                                                                        seed#0,a_asset#0,b_asset#0,tmp%2#1
        l-load tmp%2#1 0                                                                          seed#0,a_asset#0,b_asset#0,tmp%2#1
        assert // group size not 2                                                                seed#0,a_asset#0,b_asset#0
        // amm/contract.py:69
        // assert seed.receiver == Global.current_application_address, "receiver not app address"
        l-load-copy seed#0 2                                                                      seed#0,a_asset#0,b_asset#0,seed#0 (copy)
        gtxns Receiver                                                                            seed#0,a_asset#0,b_asset#0,tmp%3#1
        global CurrentApplicationAddress                                                          seed#0,a_asset#0,b_asset#0,tmp%3#1,tmp%4#1
        l-load tmp%3#1 1                                                                          seed#0,a_asset#0,b_asset#0,tmp%4#1,tmp%3#1
        l-load tmp%4#1 1                                                                          seed#0,a_asset#0,b_asset#0,tmp%3#1,tmp%4#1
        ==                                                                                        seed#0,a_asset#0,b_asset#0,tmp%5#1
        l-load tmp%5#1 0                                                                          seed#0,a_asset#0,b_asset#0,tmp%5#1
        assert // receiver not app address                                                        seed#0,a_asset#0,b_asset#0
        // amm/contract.py:71
        // assert seed.amount >= 300_000, "amount minimum not met"  # 0.3 Algos
        l-load seed#0 2                                                                           a_asset#0,b_asset#0,seed#0
        gtxns Amount                                                                              a_asset#0,b_asset#0,tmp%6#1
        l-load tmp%6#1 0                                                                          a_asset#0,b_asset#0,tmp%6#1
        int 300000                                                                                a_asset#0,b_asset#0,tmp%6#1,300000
        >=                                                                                        a_asset#0,b_asset#0,tmp%7#1
        l-load tmp%7#1 0                                                                          a_asset#0,b_asset#0,tmp%7#1
        assert // amount minimum not met                                                          a_asset#0,b_asset#0
        // amm/contract.py:72
        // assert a_asset.id < b_asset.id, "asset a must be less than asset b"
        l-load-copy a_asset#0 1                                                                   a_asset#0,b_asset#0,a_asset#0 (copy)
        l-load-copy b_asset#0 1                                                                   a_asset#0,b_asset#0,a_asset#0 (copy),b_asset#0 (copy)
        <                                                                                         a_asset#0,b_asset#0,tmp%8#0
        l-load tmp%8#0 0                                                                          a_asset#0,b_asset#0,tmp%8#0
        assert // asset a must be less than asset b                                               a_asset#0,b_asset#0
        // amm/contract.py:73
        // self.asset_a = a_asset
        byte "asset_a"                                                                            a_asset#0,b_asset#0,"asset_a"
        l-load a_asset#0 2                                                                        b_asset#0,"asset_a",a_asset#0
        app_global_put                                                                            b_asset#0
        // amm/contract.py:74
        // self.asset_b = b_asset
        byte "asset_b"                                                                            b_asset#0,"asset_b"
        l-load-copy b_asset#0 1                                                                   b_asset#0,"asset_b",b_asset#0 (copy)
        app_global_put                                                                            b_asset#0
        // amm/contract.py:274-282
        // itxn.AssetConfig(
        //     asset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,
        //     unit_name=b"dbt",
        //     total=TOTAL_SUPPLY,
        //     decimals=3,
        //     manager=Global.current_application_address,
        //     reserve=Global.current_application_address,
        // )
        // .submit()
        itxn_begin                                                                                b_asset#0
        // amm/contract.py:275
        // asset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,
        int 0                                                                                     b_asset#0,0
        byte "asset_a"                                                                            b_asset#0,0,"asset_a"
        app_global_get_ex                                                                         b_asset#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 b_asset#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.asset_a exists                                                       b_asset#0,maybe_value%0#0
        l-load maybe_value%0#0 0                                                                  b_asset#0,maybe_value%0#0
        asset_params_get AssetUnitName                                                            b_asset#0,value%0#0,check%0#0
        l-load check%0#0 0                                                                        b_asset#0,value%0#0,check%0#0
        assert // asset exists                                                                    b_asset#0,value%0#0
        byte 0x4450542d                                                                           b_asset#0,value%0#0,0x4450542d
        l-load value%0#0 1                                                                        b_asset#0,0x4450542d,value%0#0
        concat                                                                                    b_asset#0,tmp%0#2
        l-load tmp%0#2 0                                                                          b_asset#0,tmp%0#2
        byte 0x2d                                                                                 b_asset#0,tmp%0#2,0x2d
        concat                                                                                    b_asset#0,tmp%1#2
        l-load b_asset#0 1                                                                        tmp%1#2,b_asset#0
        asset_params_get AssetUnitName                                                            tmp%1#2,value%1#0,check%1#0
        l-load check%1#0 0                                                                        tmp%1#2,value%1#0,check%1#0
        assert // asset exists                                                                    tmp%1#2,value%1#0
        l-load tmp%1#2 1                                                                          value%1#0,tmp%1#2
        l-load value%1#0 1                                                                        tmp%1#2,value%1#0
        concat                                                                                    inner_txn_params%0%%param_ConfigAssetName_idx_0#0
        // amm/contract.py:279
        // manager=Global.current_application_address,
        global CurrentApplicationAddress                                                          inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0
        // amm/contract.py:280
        // reserve=Global.current_application_address,
        global CurrentApplicationAddress                                                          inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0
        l-load inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0 0                             inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0,inner_txn_params%0%%param_ConfigAssetReserve_idx_0#0
        itxn_field ConfigAssetReserve                                                             inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0
        l-load inner_txn_params%0%%param_ConfigAssetManager_idx_0#0 0                             inner_txn_params%0%%param_ConfigAssetName_idx_0#0,inner_txn_params%0%%param_ConfigAssetManager_idx_0#0
        itxn_field ConfigAssetManager                                                             inner_txn_params%0%%param_ConfigAssetName_idx_0#0
        // amm/contract.py:278
        // decimals=3,
        int 3                                                                                     inner_txn_params%0%%param_ConfigAssetName_idx_0#0,3
        itxn_field ConfigAssetDecimals                                                            inner_txn_params%0%%param_ConfigAssetName_idx_0#0
        // amm/contract.py:277
        // total=TOTAL_SUPPLY,
        int 10000000000                                                                           inner_txn_params%0%%param_ConfigAssetName_idx_0#0,10000000000
        itxn_field ConfigAssetTotal                                                               inner_txn_params%0%%param_ConfigAssetName_idx_0#0
        // amm/contract.py:276
        // unit_name=b"dbt",
        byte 0x646274                                                                             inner_txn_params%0%%param_ConfigAssetName_idx_0#0,0x646274
        itxn_field ConfigAssetUnitName                                                            inner_txn_params%0%%param_ConfigAssetName_idx_0#0
        l-load inner_txn_params%0%%param_ConfigAssetName_idx_0#0 0                                inner_txn_params%0%%param_ConfigAssetName_idx_0#0
        itxn_field ConfigAssetName
        // amm/contract.py:274
        // itxn.AssetConfig(
        int acfg                                                                                  acfg
        itxn_field TypeEnum
        int 0                                                                                     0
        itxn_field Fee
        // amm/contract.py:274-282
        // itxn.AssetConfig(
        //     asset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,
        //     unit_name=b"dbt",
        //     total=TOTAL_SUPPLY,
        //     decimals=3,
        //     manager=Global.current_application_address,
        //     reserve=Global.current_application_address,
        // )
        // .submit()
        itxn_submit
        // amm/contract.py:274-283
        // itxn.AssetConfig(
        //     asset_name=b"DPT-" + self.asset_a.unit_name + b"-" + self.asset_b.unit_name,
        //     unit_name=b"dbt",
        //     total=TOTAL_SUPPLY,
        //     decimals=3,
        //     manager=Global.current_application_address,
        //     reserve=Global.current_application_address,
        // )
        // .submit()
        // .created_asset
        itxn CreatedAssetID                                                                       tmp%2#2
        // amm/contract.py:75
        // self.pool_token = self._create_pool_token()
        byte "pool_token"                                                                         tmp%2#2,"pool_token"
        l-load tmp%2#2 1                                                                          "pool_token",tmp%2#2
        app_global_put
        // amm/contract.py:77
        // self._do_opt_in(self.asset_a)
        int 0                                                                                     0
        byte "asset_a"                                                                            0,"asset_a"
        app_global_get_ex                                                                         asset#0,maybe_exists%1#0
        l-load maybe_exists%1#0 0                                                                 asset#0,maybe_exists%1#0
        assert // check self.asset_a exists                                                       asset#0
        // amm/contract.py:289
        // receiver=Global.current_application_address,
        global CurrentApplicationAddress                                                          asset#0,tmp%0#3
        // amm/contract.py:288-292
        // do_asset_transfer(
        //     receiver=Global.current_application_address,
        //     asset=asset,
        //     amount=UInt64(0),
        // )
        l-load tmp%0#3 0                                                                          asset#0,tmp%0#3
        l-load asset#0 1                                                                          tmp%0#3,asset#0
        // amm/contract.py:291
        // amount=UInt64(0),
        int 0                                                                                     tmp%0#3,asset#0,0
        // amm/contract.py:288-292
        // do_asset_transfer(
        //     receiver=Global.current_application_address,
        //     asset=asset,
        //     amount=UInt64(0),
        // )
        callsub do_asset_transfer
        // amm/contract.py:78
        // self._do_opt_in(self.asset_b)
        int 0                                                                                     0
        byte "asset_b"                                                                            0,"asset_b"
        app_global_get_ex                                                                         asset#0,maybe_exists%2#0
        l-load maybe_exists%2#0 0                                                                 asset#0,maybe_exists%2#0
        assert // check self.asset_b exists                                                       asset#0
        // amm/contract.py:289
        // receiver=Global.current_application_address,
        global CurrentApplicationAddress                                                          asset#0,tmp%0#3
        // amm/contract.py:288-292
        // do_asset_transfer(
        //     receiver=Global.current_application_address,
        //     asset=asset,
        //     amount=UInt64(0),
        // )
        l-load tmp%0#3 0                                                                          asset#0,tmp%0#3
        l-load asset#0 1                                                                          tmp%0#3,asset#0
        // amm/contract.py:291
        // amount=UInt64(0),
        int 0                                                                                     tmp%0#3,asset#0,0
        // amm/contract.py:288-292
        // do_asset_transfer(
        //     receiver=Global.current_application_address,
        //     asset=asset,
        //     amount=UInt64(0),
        // )
        callsub do_asset_transfer
        // amm/contract.py:79
        // return self.pool_token.id
        int 0                                                                                     0
        byte "pool_token"                                                                         0,"pool_token"
        app_global_get_ex                                                                         maybe_value%3#0,maybe_exists%3#0
        l-load maybe_exists%3#0 0                                                                 maybe_value%3#0,maybe_exists%3#0
        assert // check self.pool_token exists                                                    maybe_value%3#0
        // amm/contract.py:49
        // @arc4.abimethod(resource_encoding="index")
        l-load maybe_value%3#0 0                                                                  maybe_value%3#0
        itob                                                                                      aggregate%val_as_bytes%0#0
        byte 0x151f7c75                                                                           aggregate%val_as_bytes%0#0,0x151f7c75
        l-load aggregate%val_as_bytes%0#0 1                                                       0x151f7c75,aggregate%val_as_bytes%0#0
        concat                                                                                    tmp%7#0
        l-load tmp%7#0 0                                                                          tmp%7#0
        log
        int 1                                                                                     1
        return


// examples.amm.contract.ConstantProductAMM.mint[routing]() -> void:
subroutine mint:
    mint_block@0:
        // amm/contract.py:81-88
        // @arc4.abimethod(
        //     default_args={
        //         "pool_asset": "pool_token",
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        txn GroupIndex                                                                            tmp%0#0
        l-load tmp%0#0 0                                                                          tmp%0#0
        int 2                                                                                     tmp%0#0,2
        -                                                                                         a_xfer#0
        l-load-copy a_xfer#0 0                                                                    a_xfer#0,a_xfer#0 (copy)
        gtxns TypeEnum                                                                            a_xfer#0,gtxn_type%0#0
        l-load gtxn_type%0#0 0                                                                    a_xfer#0,gtxn_type%0#0
        int axfer                                                                                 a_xfer#0,gtxn_type%0#0,axfer
        ==                                                                                        a_xfer#0,gtxn_type_matches%0#0
        l-load gtxn_type_matches%0#0 0                                                            a_xfer#0,gtxn_type_matches%0#0
        assert // transaction type is axfer                                                       a_xfer#0
        txn GroupIndex                                                                            a_xfer#0,tmp%1#0
        l-load tmp%1#0 0                                                                          a_xfer#0,tmp%1#0
        int 1                                                                                     a_xfer#0,tmp%1#0,1
        -                                                                                         a_xfer#0,b_xfer#0
        l-load-copy b_xfer#0 0                                                                    a_xfer#0,b_xfer#0,b_xfer#0 (copy)
        gtxns TypeEnum                                                                            a_xfer#0,b_xfer#0,gtxn_type%1#0
        l-load gtxn_type%1#0 0                                                                    a_xfer#0,b_xfer#0,gtxn_type%1#0
        int axfer                                                                                 a_xfer#0,b_xfer#0,gtxn_type%1#0,axfer
        ==                                                                                        a_xfer#0,b_xfer#0,gtxn_type_matches%1#0
        l-load gtxn_type_matches%1#0 0                                                            a_xfer#0,b_xfer#0,gtxn_type_matches%1#0
        assert // transaction type is axfer                                                       a_xfer#0,b_xfer#0
        txna ApplicationArgs 1                                                                    a_xfer#0,b_xfer#0,reinterpret_Encoded(uint8)%0#0
        l-load reinterpret_Encoded(uint8)%0#0 0                                                   a_xfer#0,b_xfer#0,reinterpret_Encoded(uint8)%0#0
        btoi                                                                                      a_xfer#0,b_xfer#0,tmp%2#0
        l-load tmp%2#0 0                                                                          a_xfer#0,b_xfer#0,tmp%2#0
        txnas Assets                                                                              a_xfer#0,b_xfer#0,pool_asset#0
        txna ApplicationArgs 2                                                                    a_xfer#0,b_xfer#0,pool_asset#0,reinterpret_Encoded(uint8)%1#0
        l-load reinterpret_Encoded(uint8)%1#0 0                                                   a_xfer#0,b_xfer#0,pool_asset#0,reinterpret_Encoded(uint8)%1#0
        btoi                                                                                      a_xfer#0,b_xfer#0,pool_asset#0,tmp%4#0
        l-load tmp%4#0 0                                                                          a_xfer#0,b_xfer#0,pool_asset#0,tmp%4#0
        txnas Assets                                                                              a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0
        txna ApplicationArgs 3                                                                    a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,reinterpret_Encoded(uint8)%2#0
        l-load reinterpret_Encoded(uint8)%2#0 0                                                   a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,reinterpret_Encoded(uint8)%2#0
        btoi                                                                                      a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,tmp%6#0
        l-load tmp%6#0 0                                                                          a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,tmp%6#0
        txnas Assets                                                                              a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0
        // amm/contract.py:256
        // assert self.pool_token, "bootstrap method needs to be called first"
        int 0                                                                                     a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,0
        byte "pool_token"                                                                         a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,0,"pool_token"
        app_global_get_ex                                                                         a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_exists%0#1
        l-load maybe_exists%0#1 0                                                                 a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_exists%0#1
        assert // check self.pool_token exists                                                    a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1
        l-load-copy maybe_value%0#1 0                                                             a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_value%0#1 (copy)
        assert // bootstrap method needs to be called first                                       a_xfer#0,b_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1
        // amm/contract.py:115
        // assert pool_asset == self.pool_token, "asset pool incorrect"
        l-load pool_asset#0 3                                                                     a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,pool_asset#0
        l-load maybe_value%0#1 1                                                                  a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,pool_asset#0,maybe_value%0#1
        ==                                                                                        a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,tmp%0#1
        l-load tmp%0#1 0                                                                          a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,tmp%0#1
        assert // asset pool incorrect                                                            a_xfer#0,b_xfer#0,a_asset#0,b_asset#0
        // amm/contract.py:116
        // assert a_asset == self.asset_a, "asset a incorrect"
        int 0                                                                                     a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,0
        byte "asset_a"                                                                            a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,0,"asset_a"
        app_global_get_ex                                                                         a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,maybe_value%1#0,maybe_exists%1#0
        l-load maybe_exists%1#0 0                                                                 a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,maybe_value%1#0,maybe_exists%1#0
        assert // check self.asset_a exists                                                       a_xfer#0,b_xfer#0,a_asset#0,b_asset#0,maybe_value%1#0
        l-load a_asset#0 2                                                                        a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,a_asset#0
        l-load-copy maybe_value%1#0 1                                                             a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,a_asset#0,maybe_value%1#0 (copy)
        ==                                                                                        a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,tmp%1#1
        l-load tmp%1#1 0                                                                          a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,tmp%1#1
        assert // asset a incorrect                                                               a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0
        // amm/contract.py:117
        // assert b_asset == self.asset_b, "asset b incorrect"
        int 0                                                                                     a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,0
        byte "asset_b"                                                                            a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,0,"asset_b"
        app_global_get_ex                                                                         a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,maybe_value%2#0,maybe_exists%2#0
        l-load maybe_exists%2#0 0                                                                 a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,maybe_value%2#0,maybe_exists%2#0
        assert // check self.asset_b exists                                                       a_xfer#0,b_xfer#0,b_asset#0,maybe_value%1#0,maybe_value%2#0
        l-load b_asset#0 2                                                                        a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,b_asset#0
        l-load-copy maybe_value%2#0 1                                                             a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,b_asset#0,maybe_value%2#0 (copy)
        ==                                                                                        a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%2#1
        l-load tmp%2#1 0                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%2#1
        assert // asset b incorrect                                                               a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0
        // amm/contract.py:118
        // assert a_xfer.sender == Txn.sender, "sender invalid"
        l-load-copy a_xfer#0 3                                                                    a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,a_xfer#0 (copy)
        gtxns Sender                                                                              a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%3#1
        txn Sender                                                                                a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%3#1,tmp%4#1
        l-load tmp%3#1 1                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%4#1,tmp%3#1
        l-load tmp%4#1 1                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%3#1,tmp%4#1
        ==                                                                                        a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%5#1
        l-load tmp%5#1 0                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%5#1
        assert // sender invalid                                                                  a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0
        // amm/contract.py:119
        // assert b_xfer.sender == Txn.sender, "sender invalid"
        l-load-copy b_xfer#0 2                                                                    a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,b_xfer#0 (copy)
        gtxns Sender                                                                              a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%6#1
        txn Sender                                                                                a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%6#1,tmp%7#1
        l-load tmp%6#1 1                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%7#1,tmp%6#1
        l-load tmp%7#1 1                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%6#1,tmp%7#1
        ==                                                                                        a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%8#0
        l-load tmp%8#0 0                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%8#0
        assert // sender invalid                                                                  a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0
        // amm/contract.py:123
        // a_xfer.asset_receiver == Global.current_application_address
        l-load-copy a_xfer#0 3                                                                    a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,a_xfer#0 (copy)
        gtxns AssetReceiver                                                                       a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%9#0
        global CurrentApplicationAddress                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%9#0,tmp%10#0
        l-load tmp%9#0 1                                                                          a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%10#0,tmp%9#0
        l-load tmp%10#0 1                                                                         a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%9#0,tmp%10#0
        ==                                                                                        a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%11#0
        // amm/contract.py:122-124
        // assert (
        //     a_xfer.asset_receiver == Global.current_application_address
        // ), "receiver not app address"
        l-load tmp%11#0 0                                                                         a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%11#0
        assert // receiver not app address                                                        a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0
        // amm/contract.py:125
        // assert a_xfer.xfer_asset == self.asset_a, "asset a incorrect"
        l-load-copy a_xfer#0 3                                                                    a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,a_xfer#0 (copy)
        gtxns XferAsset                                                                           a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%12#0
        l-load tmp%12#0 0                                                                         a_xfer#0,b_xfer#0,maybe_value%1#0,maybe_value%2#0,tmp%12#0
        l-load maybe_value%1#0 2                                                                  a_xfer#0,b_xfer#0,maybe_value%2#0,tmp%12#0,maybe_value%1#0
        ==                                                                                        a_xfer#0,b_xfer#0,maybe_value%2#0,tmp%13#0
        l-load tmp%13#0 0                                                                         a_xfer#0,b_xfer#0,maybe_value%2#0,tmp%13#0
        assert // asset a incorrect                                                               a_xfer#0,b_xfer#0,maybe_value%2#0
        // amm/contract.py:126
        // assert a_xfer.asset_amount > 0, "amount minimum not met"
        l-load a_xfer#0 2                                                                         b_xfer#0,maybe_value%2#0,a_xfer#0
        gtxns AssetAmount                                                                         b_xfer#0,maybe_value%2#0,a_amount#0
        l-store-copy a_amount#0 0                                                                 b_xfer#0,maybe_value%2#0,a_amount#0,a_amount#0 (copy)
        v-store a_amount#0                                                                        b_xfer#0,maybe_value%2#0,a_amount#0
        l-load-copy a_amount#0 0                                                                  b_xfer#0,maybe_value%2#0,a_amount#0,a_amount#0 (copy)
        assert // amount minimum not met                                                          b_xfer#0,maybe_value%2#0,a_amount#0
        // amm/contract.py:130
        // b_xfer.asset_receiver == Global.current_application_address
        l-load-copy b_xfer#0 2                                                                    b_xfer#0,maybe_value%2#0,a_amount#0,b_xfer#0 (copy)
        gtxns AssetReceiver                                                                       b_xfer#0,maybe_value%2#0,a_amount#0,tmp%16#0
        global CurrentApplicationAddress                                                          b_xfer#0,maybe_value%2#0,a_amount#0,tmp%16#0,tmp%17#0
        l-load tmp%16#0 1                                                                         b_xfer#0,maybe_value%2#0,a_amount#0,tmp%17#0,tmp%16#0
        l-load tmp%17#0 1                                                                         b_xfer#0,maybe_value%2#0,a_amount#0,tmp%16#0,tmp%17#0
        ==                                                                                        b_xfer#0,maybe_value%2#0,a_amount#0,tmp%18#0
        // amm/contract.py:129-131
        // assert (
        //     b_xfer.asset_receiver == Global.current_application_address
        // ), "receiver not app address"
        l-load tmp%18#0 0                                                                         b_xfer#0,maybe_value%2#0,a_amount#0,tmp%18#0
        assert // receiver not app address                                                        b_xfer#0,maybe_value%2#0,a_amount#0
        // amm/contract.py:132
        // assert b_xfer.xfer_asset == self.asset_b, "asset b incorrect"
        l-load-copy b_xfer#0 2                                                                    b_xfer#0,maybe_value%2#0,a_amount#0,b_xfer#0 (copy)
        gtxns XferAsset                                                                           b_xfer#0,maybe_value%2#0,a_amount#0,tmp%19#0
        l-load tmp%19#0 0                                                                         b_xfer#0,maybe_value%2#0,a_amount#0,tmp%19#0
        l-load maybe_value%2#0 2                                                                  b_xfer#0,a_amount#0,tmp%19#0,maybe_value%2#0
        ==                                                                                        b_xfer#0,a_amount#0,tmp%20#0
        l-load tmp%20#0 0                                                                         b_xfer#0,a_amount#0,tmp%20#0
        assert // asset b incorrect                                                               b_xfer#0,a_amount#0
        // amm/contract.py:133
        // assert b_xfer.asset_amount > 0, "amount minimum not met"
        l-load b_xfer#0 1                                                                         a_amount#0,b_xfer#0
        gtxns AssetAmount                                                                         a_amount#0,b_amount#0
        l-store-copy b_amount#0 0                                                                 a_amount#0,b_amount#0,b_amount#0 (copy)
        v-store b_amount#0                                                                        a_amount#0,b_amount#0
        l-load b_amount#0 0                                                                       a_amount#0,b_amount#0
        assert // amount minimum not met                                                          a_amount#0
        // amm/contract.py:136
        // pool_balance=self._current_pool_balance(),
        callsub _current_pool_balance                                                             a_amount#0,pool_balance#0
        v-store pool_balance#0                                                                    a_amount#0
        // amm/contract.py:137
        // a_balance=self._current_a_balance(),
        callsub _current_a_balance                                                                a_amount#0,a_balance#0
        l-store-copy a_balance#0 0                                                                a_amount#0,a_balance#0,a_balance#0 (copy)
        v-store a_balance#0                                                                       a_amount#0,a_balance#0
        // amm/contract.py:138
        // b_balance=self._current_b_balance(),
        callsub _current_b_balance                                                                a_amount#0,a_balance#0,b_balance#0
        v-store b_balance#0                                                                       a_amount#0,a_balance#0
        // amm/contract.py:334
        // is_initial_mint = a_balance == a_amount and b_balance == b_amount
        l-load a_balance#0 0                                                                      a_amount#0,a_balance#0
        l-load a_amount#0 1                                                                       a_balance#0,a_amount#0
        ==                                                                                        tmp%0#1
        l-load tmp%0#1 0                                                                          tmp%0#1
        bz mint_bool_false@4 ; b mint_and_contd@2

    mint_and_contd@2:
        // amm/contract.py:334
        // is_initial_mint = a_balance == a_amount and b_balance == b_amount
        v-load b_balance#0                                                                        b_balance#0
        v-load b_amount#0                                                                         b_balance#0,b_amount#0
        ==                                                                                        tmp%1#1
        l-load tmp%1#1 0                                                                          tmp%1#1
        bz mint_bool_false@4 ; b mint_bool_true@3

    mint_bool_true@3:
        int 1                                                                                     1
        l-store and_result%0#0 0                                                                  and_result%0#0
        l-load and_result%0#0 0                                                                   and_result%0#0
        v-store is_initial_mint#0
        b mint_bool_merge@5

    mint_bool_false@4:
        int 0                                                                                     0
        l-store and_result%0#0 0                                                                  and_result%0#0
        l-load and_result%0#0 0                                                                   and_result%0#0
        v-store is_initial_mint#0
        b mint_bool_merge@5

    mint_bool_merge@5:
        // amm/contract.py:335
        // if is_initial_mint:
        v-load is_initial_mint#0                                                                  is_initial_mint#0
        bz mint_after_if_else@7 ; b mint_if_body@6

    mint_if_body@6:
        // amm/contract.py:336
        // return op.sqrt(a_amount * b_amount) - SCALE
        v-load a_amount#0                                                                         a_amount#0
        v-load b_amount#0                                                                         a_amount#0,b_amount#0
        *                                                                                         tmp%2#0
        l-load tmp%2#0 0                                                                          tmp%2#0
        sqrt                                                                                      tmp%3#2
        l-load tmp%3#2 0                                                                          tmp%3#2
        int 1000                                                                                  tmp%3#2,1000
        -                                                                                         tmp%4#0
        l-load tmp%4#0 0                                                                          tmp%4#0
        v-store to_mint#0
        // amm/contract.py:135-141
        // to_mint = tokens_to_mint(
        //     pool_balance=self._current_pool_balance(),
        //     a_balance=self._current_a_balance(),
        //     b_balance=self._current_b_balance(),
        //     a_amount=a_xfer.asset_amount,
        //     b_amount=b_xfer.asset_amount,
        // )
        b mint_after_inlined_examples.amm.contract.tokens_to_mint@10

    mint_after_if_else@7:
        // amm/contract.py:337
        // issued = TOTAL_SUPPLY - pool_balance
        int 10000000000                                                                           10000000000
        v-load pool_balance#0                                                                     10000000000,pool_balance#0
        -                                                                                         issued#0
        v-store issued#0
        // amm/contract.py:338
        // a_ratio = SCALE * a_amount // (a_balance - a_amount)
        int 1000                                                                                  1000
        v-load a_amount#0                                                                         1000,a_amount#0
        l-store-copy a_amount#0 1                                                                 a_amount#0,1000,a_amount#0 (copy)
        *                                                                                         a_amount#0,tmp%6#0
        v-load a_balance#0                                                                        a_amount#0,tmp%6#0,a_balance#0
        l-load a_amount#0 2                                                                       tmp%6#0,a_balance#0,a_amount#0
        -                                                                                         tmp%6#0,tmp%7#2
        l-load tmp%6#0 1                                                                          tmp%7#2,tmp%6#0
        l-load tmp%7#2 1                                                                          tmp%6#0,tmp%7#2
        /                                                                                         a_ratio#0
        l-store-copy a_ratio#0 0                                                                  a_ratio#0,a_ratio#0 (copy)
        v-store a_ratio#0                                                                         a_ratio#0
        // amm/contract.py:339
        // b_ratio = SCALE * b_amount // (b_balance - b_amount)
        int 1000                                                                                  a_ratio#0,1000
        v-load b_amount#0                                                                         a_ratio#0,1000,b_amount#0
        l-store-copy b_amount#0 1                                                                 a_ratio#0,b_amount#0,1000,b_amount#0 (copy)
        *                                                                                         a_ratio#0,b_amount#0,tmp%9#1
        v-load b_balance#0                                                                        a_ratio#0,b_amount#0,tmp%9#1,b_balance#0
        l-load b_amount#0 2                                                                       a_ratio#0,tmp%9#1,b_balance#0,b_amount#0
        -                                                                                         a_ratio#0,tmp%9#1,tmp%10#1
        l-load tmp%9#1 1                                                                          a_ratio#0,tmp%10#1,tmp%9#1
        l-load tmp%10#1 1                                                                         a_ratio#0,tmp%9#1,tmp%10#1
        /                                                                                         a_ratio#0,b_ratio#0
        l-store-copy b_ratio#0 0                                                                  a_ratio#0,b_ratio#0,b_ratio#0 (copy)
        v-store b_ratio#0                                                                         a_ratio#0,b_ratio#0
        // amm/contract.py:340
        // if a_ratio < b_ratio:
        l-load a_ratio#0 1                                                                        b_ratio#0,a_ratio#0
        l-load b_ratio#0 1                                                                        a_ratio#0,b_ratio#0
        <                                                                                         tmp%12#1
        l-load tmp%12#1 0                                                                         tmp%12#1
        bz mint_else_body@9 ; b mint_if_body@8

    mint_if_body@8:
        // amm/contract.py:341
        // return a_ratio * issued // SCALE
        v-load a_ratio#0                                                                          a_ratio#0
        v-load issued#0                                                                           a_ratio#0,issued#0
        *                                                                                         tmp%13#1
        l-load tmp%13#1 0                                                                         tmp%13#1
        int 1000                                                                                  tmp%13#1,1000
        /                                                                                         tmp%14#1
        l-load tmp%14#1 0                                                                         tmp%14#1
        v-store to_mint#0
        // amm/contract.py:135-141
        // to_mint = tokens_to_mint(
        //     pool_balance=self._current_pool_balance(),
        //     a_balance=self._current_a_balance(),
        //     b_balance=self._current_b_balance(),
        //     a_amount=a_xfer.asset_amount,
        //     b_amount=b_xfer.asset_amount,
        // )
        b mint_after_inlined_examples.amm.contract.tokens_to_mint@10

    mint_else_body@9:
        // amm/contract.py:343
        // return b_ratio * issued // SCALE
        v-load b_ratio#0                                                                          b_ratio#0
        v-load issued#0                                                                           b_ratio#0,issued#0
        *                                                                                         tmp%15#1
        l-load tmp%15#1 0                                                                         tmp%15#1
        int 1000                                                                                  tmp%15#1,1000
        /                                                                                         tmp%16#1
        l-load tmp%16#1 0                                                                         tmp%16#1
        v-store to_mint#0
        // amm/contract.py:135-141
        // to_mint = tokens_to_mint(
        //     pool_balance=self._current_pool_balance(),
        //     a_balance=self._current_a_balance(),
        //     b_balance=self._current_b_balance(),
        //     a_amount=a_xfer.asset_amount,
        //     b_amount=b_xfer.asset_amount,
        // )
        b mint_after_inlined_examples.amm.contract.tokens_to_mint@10

    mint_after_inlined_examples.amm.contract.tokens_to_mint@10:
        // amm/contract.py:142
        // assert to_mint > 0, "send amount too low"
        v-load to_mint#0                                                                          to_mint#0
        l-store-copy to_mint#0 0                                                                  to_mint#0,to_mint#0 (copy)
        assert // send amount too low                                                             to_mint#0
        // amm/contract.py:145
        // do_asset_transfer(receiver=Txn.sender, asset=self.pool_token, amount=to_mint)
        txn Sender                                                                                to_mint#0,tmp%30#0
        int 0                                                                                     to_mint#0,tmp%30#0,0
        byte "pool_token"                                                                         to_mint#0,tmp%30#0,0,"pool_token"
        app_global_get_ex                                                                         to_mint#0,tmp%30#0,maybe_value%5#0,maybe_exists%5#0
        l-load maybe_exists%5#0 0                                                                 to_mint#0,tmp%30#0,maybe_value%5#0,maybe_exists%5#0
        assert // check self.pool_token exists                                                    to_mint#0,tmp%30#0,maybe_value%5#0
        l-load tmp%30#0 1                                                                         to_mint#0,maybe_value%5#0,tmp%30#0
        l-load maybe_value%5#0 1                                                                  to_mint#0,tmp%30#0,maybe_value%5#0
        l-load to_mint#0 2                                                                        tmp%30#0,maybe_value%5#0,to_mint#0
        callsub do_asset_transfer
        // amm/contract.py:146
        // self._update_ratio()
        callsub _update_ratio
        // amm/contract.py:81-88
        // @arc4.abimethod(
        //     default_args={
        //         "pool_asset": "pool_token",
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        int 1                                                                                     1
        return


// examples.amm.contract.ConstantProductAMM.burn[routing]() -> void:
subroutine burn:
    burn_block@0:
        // amm/contract.py:148-155
        // @arc4.abimethod(
        //     default_args={
        //         "pool_asset": "pool_token",
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        txn GroupIndex                                                                            tmp%0#0
        l-load tmp%0#0 0                                                                          tmp%0#0
        int 1                                                                                     tmp%0#0,1
        -                                                                                         pool_xfer#0
        l-load-copy pool_xfer#0 0                                                                 pool_xfer#0,pool_xfer#0 (copy)
        gtxns TypeEnum                                                                            pool_xfer#0,gtxn_type%0#0
        l-load gtxn_type%0#0 0                                                                    pool_xfer#0,gtxn_type%0#0
        int axfer                                                                                 pool_xfer#0,gtxn_type%0#0,axfer
        ==                                                                                        pool_xfer#0,gtxn_type_matches%0#0
        l-load gtxn_type_matches%0#0 0                                                            pool_xfer#0,gtxn_type_matches%0#0
        assert // transaction type is axfer                                                       pool_xfer#0
        txna ApplicationArgs 1                                                                    pool_xfer#0,reinterpret_Encoded(uint8)%0#0
        l-load reinterpret_Encoded(uint8)%0#0 0                                                   pool_xfer#0,reinterpret_Encoded(uint8)%0#0
        btoi                                                                                      pool_xfer#0,tmp%1#0
        l-load tmp%1#0 0                                                                          pool_xfer#0,tmp%1#0
        txnas Assets                                                                              pool_xfer#0,pool_asset#0
        txna ApplicationArgs 2                                                                    pool_xfer#0,pool_asset#0,reinterpret_Encoded(uint8)%1#0
        l-load reinterpret_Encoded(uint8)%1#0 0                                                   pool_xfer#0,pool_asset#0,reinterpret_Encoded(uint8)%1#0
        btoi                                                                                      pool_xfer#0,pool_asset#0,tmp%3#0
        l-load tmp%3#0 0                                                                          pool_xfer#0,pool_asset#0,tmp%3#0
        txnas Assets                                                                              pool_xfer#0,pool_asset#0,a_asset#0
        txna ApplicationArgs 3                                                                    pool_xfer#0,pool_asset#0,a_asset#0,reinterpret_Encoded(uint8)%2#0
        l-load reinterpret_Encoded(uint8)%2#0 0                                                   pool_xfer#0,pool_asset#0,a_asset#0,reinterpret_Encoded(uint8)%2#0
        btoi                                                                                      pool_xfer#0,pool_asset#0,a_asset#0,tmp%5#0
        l-load tmp%5#0 0                                                                          pool_xfer#0,pool_asset#0,a_asset#0,tmp%5#0
        txnas Assets                                                                              pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0
        // amm/contract.py:256
        // assert self.pool_token, "bootstrap method needs to be called first"
        int 0                                                                                     pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,0
        byte "pool_token"                                                                         pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,0,"pool_token"
        app_global_get_ex                                                                         pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_exists%0#1
        l-load maybe_exists%0#1 0                                                                 pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_exists%0#1
        assert // check self.pool_token exists                                                    pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1
        l-load-copy maybe_value%0#1 0                                                             pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_value%0#1 (copy)
        assert // bootstrap method needs to be called first                                       pool_xfer#0,pool_asset#0,a_asset#0,b_asset#0,maybe_value%0#1
        // amm/contract.py:174
        // assert pool_asset == self.pool_token, "asset pool incorrect"
        l-load pool_asset#0 3                                                                     pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,pool_asset#0
        l-load-copy maybe_value%0#1 1                                                             pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,pool_asset#0,maybe_value%0#1 (copy)
        ==                                                                                        pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,tmp%0#1
        l-load tmp%0#1 0                                                                          pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,tmp%0#1
        assert // asset pool incorrect                                                            pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1
        // amm/contract.py:175
        // assert a_asset == self.asset_a, "asset a incorrect"
        int 0                                                                                     pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,0
        byte "asset_a"                                                                            pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,0,"asset_a"
        app_global_get_ex                                                                         pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_value%1#0,maybe_exists%1#0
        l-load maybe_exists%1#0 0                                                                 pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_value%1#0,maybe_exists%1#0
        assert // check self.asset_a exists                                                       pool_xfer#0,a_asset#0,b_asset#0,maybe_value%0#1,maybe_value%1#0
        l-load a_asset#0 3                                                                        pool_xfer#0,b_asset#0,maybe_value%0#1,maybe_value%1#0,a_asset#0
        l-load maybe_value%1#0 1                                                                  pool_xfer#0,b_asset#0,maybe_value%0#1,a_asset#0,maybe_value%1#0
        ==                                                                                        pool_xfer#0,b_asset#0,maybe_value%0#1,tmp%1#1
        l-load tmp%1#1 0                                                                          pool_xfer#0,b_asset#0,maybe_value%0#1,tmp%1#1
        assert // asset a incorrect                                                               pool_xfer#0,b_asset#0,maybe_value%0#1
        // amm/contract.py:176
        // assert b_asset == self.asset_b, "asset b incorrect"
        int 0                                                                                     pool_xfer#0,b_asset#0,maybe_value%0#1,0
        byte "asset_b"                                                                            pool_xfer#0,b_asset#0,maybe_value%0#1,0,"asset_b"
        app_global_get_ex                                                                         pool_xfer#0,b_asset#0,maybe_value%0#1,maybe_value%2#0,maybe_exists%2#0
        l-load maybe_exists%2#0 0                                                                 pool_xfer#0,b_asset#0,maybe_value%0#1,maybe_value%2#0,maybe_exists%2#0
        assert // check self.asset_b exists                                                       pool_xfer#0,b_asset#0,maybe_value%0#1,maybe_value%2#0
        l-load b_asset#0 2                                                                        pool_xfer#0,maybe_value%0#1,maybe_value%2#0,b_asset#0
        l-load maybe_value%2#0 1                                                                  pool_xfer#0,maybe_value%0#1,b_asset#0,maybe_value%2#0
        ==                                                                                        pool_xfer#0,maybe_value%0#1,tmp%2#1
        l-load tmp%2#1 0                                                                          pool_xfer#0,maybe_value%0#1,tmp%2#1
        assert // asset b incorrect                                                               pool_xfer#0,maybe_value%0#1
        // amm/contract.py:179
        // pool_xfer.asset_receiver == Global.current_application_address
        l-load-copy pool_xfer#0 1                                                                 pool_xfer#0,maybe_value%0#1,pool_xfer#0 (copy)
        gtxns AssetReceiver                                                                       pool_xfer#0,maybe_value%0#1,tmp%3#1
        global CurrentApplicationAddress                                                          pool_xfer#0,maybe_value%0#1,tmp%3#1,tmp%4#1
        l-load tmp%3#1 1                                                                          pool_xfer#0,maybe_value%0#1,tmp%4#1,tmp%3#1
        l-load tmp%4#1 1                                                                          pool_xfer#0,maybe_value%0#1,tmp%3#1,tmp%4#1
        ==                                                                                        pool_xfer#0,maybe_value%0#1,tmp%5#1
        // amm/contract.py:178-180
        // assert (
        //     pool_xfer.asset_receiver == Global.current_application_address
        // ), "receiver not app address"
        l-load tmp%5#1 0                                                                          pool_xfer#0,maybe_value%0#1,tmp%5#1
        assert // receiver not app address                                                        pool_xfer#0,maybe_value%0#1
        // amm/contract.py:181
        // assert pool_xfer.asset_amount > 0, "amount minimum not met"
        l-load-copy pool_xfer#0 1                                                                 pool_xfer#0,maybe_value%0#1,pool_xfer#0 (copy)
        gtxns AssetAmount                                                                         pool_xfer#0,maybe_value%0#1,amount#0
        l-load-copy amount#0 0                                                                    pool_xfer#0,maybe_value%0#1,amount#0,amount#0 (copy)
        assert // amount minimum not met                                                          pool_xfer#0,maybe_value%0#1,amount#0
        // amm/contract.py:182
        // assert pool_xfer.xfer_asset == self.pool_token, "asset pool incorrect"
        l-load-copy pool_xfer#0 2                                                                 pool_xfer#0,maybe_value%0#1,amount#0,pool_xfer#0 (copy)
        gtxns XferAsset                                                                           pool_xfer#0,maybe_value%0#1,amount#0,tmp%8#0
        l-load tmp%8#0 0                                                                          pool_xfer#0,maybe_value%0#1,amount#0,tmp%8#0
        l-load maybe_value%0#1 2                                                                  pool_xfer#0,amount#0,tmp%8#0,maybe_value%0#1
        ==                                                                                        pool_xfer#0,amount#0,tmp%9#0
        l-load tmp%9#0 0                                                                          pool_xfer#0,amount#0,tmp%9#0
        assert // asset pool incorrect                                                            pool_xfer#0,amount#0
        // amm/contract.py:183
        // assert pool_xfer.sender == Txn.sender, "sender invalid"
        l-load pool_xfer#0 1                                                                      amount#0,pool_xfer#0
        gtxns Sender                                                                              amount#0,tmp%10#0
        txn Sender                                                                                amount#0,tmp%10#0,tmp%11#0
        l-load tmp%10#0 1                                                                         amount#0,tmp%11#0,tmp%10#0
        l-load tmp%11#0 1                                                                         amount#0,tmp%10#0,tmp%11#0
        ==                                                                                        amount#0,tmp%12#0
        l-load tmp%12#0 0                                                                         amount#0,tmp%12#0
        assert // sender invalid                                                                  amount#0
        // amm/contract.py:187
        // pool_balance = self._current_pool_balance()
        callsub _current_pool_balance                                                             amount#0,pool_balance#0
        // amm/contract.py:190
        // supply=self._current_a_balance(),
        callsub _current_a_balance                                                                amount#0,pool_balance#0,supply#0
        // amm/contract.py:348
        // issued = TOTAL_SUPPLY - pool_balance - amount
        int 10000000000                                                                           amount#0,pool_balance#0,supply#0,10000000000
        l-load pool_balance#0 2                                                                   amount#0,supply#0,10000000000,pool_balance#0
        -                                                                                         amount#0,supply#0,tmp%0#0
        l-load tmp%0#0 0                                                                          amount#0,supply#0,tmp%0#0
        l-load-copy amount#0 2                                                                    amount#0,supply#0,tmp%0#0,amount#0 (copy)
        -                                                                                         amount#0,supply#0,issued#0
        // amm/contract.py:349
        // return supply * amount // issued
        l-load supply#0 1                                                                         amount#0,issued#0,supply#0
        l-load-copy amount#0 2                                                                    amount#0,issued#0,supply#0,amount#0 (copy)
        *                                                                                         amount#0,issued#0,tmp%2#2
        l-load tmp%2#2 0                                                                          amount#0,issued#0,tmp%2#2
        l-load-copy issued#0 1                                                                    amount#0,issued#0,tmp%2#2,issued#0 (copy)
        /                                                                                         amount#0,issued#0,a_amt#0
        // amm/contract.py:195
        // supply=self._current_b_balance(),
        callsub _current_b_balance                                                                amount#0,issued#0,a_amt#0,supply#0
        // amm/contract.py:349
        // return supply * amount // issued
        l-load supply#0 0                                                                         amount#0,issued#0,a_amt#0,supply#0
        l-load amount#0 3                                                                         issued#0,a_amt#0,supply#0,amount#0
        *                                                                                         issued#0,a_amt#0,tmp%2#2
        l-load tmp%2#2 0                                                                          issued#0,a_amt#0,tmp%2#2
        l-load issued#0 2                                                                         a_amt#0,tmp%2#2,issued#0
        /                                                                                         a_amt#0,b_amt#0
        // amm/contract.py:200
        // do_asset_transfer(receiver=Txn.sender, asset=self.asset_a, amount=a_amt)
        txn Sender                                                                                a_amt#0,b_amt#0,tmp%20#0
        int 0                                                                                     a_amt#0,b_amt#0,tmp%20#0,0
        byte "asset_a"                                                                            a_amt#0,b_amt#0,tmp%20#0,0,"asset_a"
        app_global_get_ex                                                                         a_amt#0,b_amt#0,tmp%20#0,maybe_value%4#0,maybe_exists%4#0
        l-load maybe_exists%4#0 0                                                                 a_amt#0,b_amt#0,tmp%20#0,maybe_value%4#0,maybe_exists%4#0
        assert // check self.asset_a exists                                                       a_amt#0,b_amt#0,tmp%20#0,maybe_value%4#0
        l-load tmp%20#0 1                                                                         a_amt#0,b_amt#0,maybe_value%4#0,tmp%20#0
        l-load maybe_value%4#0 1                                                                  a_amt#0,b_amt#0,tmp%20#0,maybe_value%4#0
        l-load a_amt#0 3                                                                          b_amt#0,tmp%20#0,maybe_value%4#0,a_amt#0
        callsub do_asset_transfer                                                                 b_amt#0
        // amm/contract.py:203
        // do_asset_transfer(receiver=Txn.sender, asset=self.asset_b, amount=b_amt)
        txn Sender                                                                                b_amt#0,tmp%21#0
        int 0                                                                                     b_amt#0,tmp%21#0,0
        byte "asset_b"                                                                            b_amt#0,tmp%21#0,0,"asset_b"
        app_global_get_ex                                                                         b_amt#0,tmp%21#0,maybe_value%5#0,maybe_exists%5#0
        l-load maybe_exists%5#0 0                                                                 b_amt#0,tmp%21#0,maybe_value%5#0,maybe_exists%5#0
        assert // check self.asset_b exists                                                       b_amt#0,tmp%21#0,maybe_value%5#0
        l-load tmp%21#0 1                                                                         b_amt#0,maybe_value%5#0,tmp%21#0
        l-load maybe_value%5#0 1                                                                  b_amt#0,tmp%21#0,maybe_value%5#0
        l-load b_amt#0 2                                                                          tmp%21#0,maybe_value%5#0,b_amt#0
        callsub do_asset_transfer
        // amm/contract.py:204
        // self._update_ratio()
        callsub _update_ratio
        // amm/contract.py:148-155
        // @arc4.abimethod(
        //     default_args={
        //         "pool_asset": "pool_token",
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        int 1                                                                                     1
        return


// examples.amm.contract.ConstantProductAMM.swap[routing]() -> void:
subroutine swap:
    swap_block@0:
        // amm/contract.py:206-212
        // @arc4.abimethod(
        //     default_args={
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        txn GroupIndex                                                                            tmp%0#0
        l-load tmp%0#0 0                                                                          tmp%0#0
        int 1                                                                                     tmp%0#0,1
        -                                                                                         swap_xfer#0
        l-load-copy swap_xfer#0 0                                                                 swap_xfer#0,swap_xfer#0 (copy)
        gtxns TypeEnum                                                                            swap_xfer#0,gtxn_type%0#0
        l-load gtxn_type%0#0 0                                                                    swap_xfer#0,gtxn_type%0#0
        int axfer                                                                                 swap_xfer#0,gtxn_type%0#0,axfer
        ==                                                                                        swap_xfer#0,gtxn_type_matches%0#0
        l-load gtxn_type_matches%0#0 0                                                            swap_xfer#0,gtxn_type_matches%0#0
        assert // transaction type is axfer                                                       swap_xfer#0
        txna ApplicationArgs 1                                                                    swap_xfer#0,reinterpret_Encoded(uint8)%0#0
        l-load reinterpret_Encoded(uint8)%0#0 0                                                   swap_xfer#0,reinterpret_Encoded(uint8)%0#0
        btoi                                                                                      swap_xfer#0,tmp%1#0
        l-load tmp%1#0 0                                                                          swap_xfer#0,tmp%1#0
        txnas Assets                                                                              swap_xfer#0,a_asset#0
        txna ApplicationArgs 2                                                                    swap_xfer#0,a_asset#0,reinterpret_Encoded(uint8)%1#0
        l-load reinterpret_Encoded(uint8)%1#0 0                                                   swap_xfer#0,a_asset#0,reinterpret_Encoded(uint8)%1#0
        btoi                                                                                      swap_xfer#0,a_asset#0,tmp%3#0
        l-load tmp%3#0 0                                                                          swap_xfer#0,a_asset#0,tmp%3#0
        txnas Assets                                                                              swap_xfer#0,a_asset#0,b_asset#0
        // amm/contract.py:256
        // assert self.pool_token, "bootstrap method needs to be called first"
        int 0                                                                                     swap_xfer#0,a_asset#0,b_asset#0,0
        byte "pool_token"                                                                         swap_xfer#0,a_asset#0,b_asset#0,0,"pool_token"
        app_global_get_ex                                                                         swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.pool_token exists                                                    swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0
        l-load maybe_value%0#0 0                                                                  swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0
        assert // bootstrap method needs to be called first                                       swap_xfer#0,a_asset#0,b_asset#0
        // amm/contract.py:228
        // assert a_asset == self.asset_a, "asset a incorrect"
        int 0                                                                                     swap_xfer#0,a_asset#0,b_asset#0,0
        byte "asset_a"                                                                            swap_xfer#0,a_asset#0,b_asset#0,0,"asset_a"
        app_global_get_ex                                                                         swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.asset_a exists                                                       swap_xfer#0,a_asset#0,b_asset#0,maybe_value%0#0
        l-load a_asset#0 2                                                                        swap_xfer#0,b_asset#0,maybe_value%0#0,a_asset#0
        l-load-copy maybe_value%0#0 1                                                             swap_xfer#0,b_asset#0,maybe_value%0#0,a_asset#0,maybe_value%0#0 (copy)
        ==                                                                                        swap_xfer#0,b_asset#0,maybe_value%0#0,tmp%0#1
        l-load tmp%0#1 0                                                                          swap_xfer#0,b_asset#0,maybe_value%0#0,tmp%0#1
        assert // asset a incorrect                                                               swap_xfer#0,b_asset#0,maybe_value%0#0
        // amm/contract.py:229
        // assert b_asset == self.asset_b, "asset b incorrect"
        int 0                                                                                     swap_xfer#0,b_asset#0,maybe_value%0#0,0
        byte "asset_b"                                                                            swap_xfer#0,b_asset#0,maybe_value%0#0,0,"asset_b"
        app_global_get_ex                                                                         swap_xfer#0,b_asset#0,maybe_value%0#0,maybe_value%1#0,maybe_exists%1#0
        l-load maybe_exists%1#0 0                                                                 swap_xfer#0,b_asset#0,maybe_value%0#0,maybe_value%1#0,maybe_exists%1#0
        assert // check self.asset_b exists                                                       swap_xfer#0,b_asset#0,maybe_value%0#0,maybe_value%1#0
        l-load b_asset#0 2                                                                        swap_xfer#0,maybe_value%0#0,maybe_value%1#0,b_asset#0
        l-load-copy maybe_value%1#0 1                                                             swap_xfer#0,maybe_value%0#0,maybe_value%1#0,b_asset#0,maybe_value%1#0 (copy)
        ==                                                                                        swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%1#1
        l-load tmp%1#1 0                                                                          swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%1#1
        assert // asset b incorrect                                                               swap_xfer#0,maybe_value%0#0,maybe_value%1#0
        // amm/contract.py:231
        // assert swap_xfer.asset_amount > 0, "amount minimum not met"
        l-load-copy swap_xfer#0 2                                                                 swap_xfer#0,maybe_value%0#0,maybe_value%1#0,swap_xfer#0 (copy)
        gtxns AssetAmount                                                                         swap_xfer#0,maybe_value%0#0,maybe_value%1#0,in_amount#0
        l-store-copy in_amount#0 0                                                                swap_xfer#0,maybe_value%0#0,maybe_value%1#0,in_amount#0,in_amount#0 (copy)
        v-store in_amount#0                                                                       swap_xfer#0,maybe_value%0#0,maybe_value%1#0,in_amount#0
        l-load in_amount#0 0                                                                      swap_xfer#0,maybe_value%0#0,maybe_value%1#0,in_amount#0
        assert // amount minimum not met                                                          swap_xfer#0,maybe_value%0#0,maybe_value%1#0
        // amm/contract.py:232
        // assert swap_xfer.sender == Txn.sender, "sender invalid"
        l-load-copy swap_xfer#0 2                                                                 swap_xfer#0,maybe_value%0#0,maybe_value%1#0,swap_xfer#0 (copy)
        gtxns Sender                                                                              swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%4#1
        txn Sender                                                                                swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%4#1,tmp%5#0
        l-load tmp%4#1 1                                                                          swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%5#0,tmp%4#1
        l-load tmp%5#0 1                                                                          swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%4#1,tmp%5#0
        ==                                                                                        swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%6#0
        l-load tmp%6#0 0                                                                          swap_xfer#0,maybe_value%0#0,maybe_value%1#0,tmp%6#0
        assert // sender invalid                                                                  swap_xfer#0,maybe_value%0#0,maybe_value%1#0
        // amm/contract.py:234
        // match swap_xfer.xfer_asset:
        l-load swap_xfer#0 2                                                                      maybe_value%0#0,maybe_value%1#0,swap_xfer#0
        gtxns XferAsset                                                                           maybe_value%0#0,maybe_value%1#0,tmp%7#0
        // amm/contract.py:234-244
        // match swap_xfer.xfer_asset:
        //     case self.asset_a:
        //         in_supply = self._current_b_balance()
        //         out_supply = self._current_a_balance()
        //         out_asset = self.asset_a
        //     case self.asset_b:
        //         in_supply = self._current_a_balance()
        //         out_supply = self._current_b_balance()
        //         out_asset = self.asset_b
        //     case _:
        //         assert False, "asset id incorrect"
        l-load maybe_value%0#0 2                                                                  maybe_value%1#0,tmp%7#0,maybe_value%0#0
        l-load maybe_value%1#0 2                                                                  tmp%7#0,maybe_value%0#0,maybe_value%1#0
        l-load tmp%7#0 2                                                                          maybe_value%0#0,maybe_value%1#0,tmp%7#0
        match swap_switch_case_0@2 swap_switch_case_1@3 ; b swap_switch_case_default@4

    swap_switch_case_0@2:
        // amm/contract.py:236
        // in_supply = self._current_b_balance()
        callsub _current_b_balance                                                                in_supply#0
        v-store in_supply#0
        // amm/contract.py:237
        // out_supply = self._current_a_balance()
        callsub _current_a_balance                                                                out_supply#0
        v-store out_supply#0
        // amm/contract.py:238
        // out_asset = self.asset_a
        int 0                                                                                     0
        byte "asset_a"                                                                            0,"asset_a"
        app_global_get_ex                                                                         out_asset#0,maybe_exists%4#0
        l-store maybe_exists%4#0 1                                                                maybe_exists%4#0,out_asset#0
        v-store out_asset#0                                                                       maybe_exists%4#0
        l-load maybe_exists%4#0 0                                                                 maybe_exists%4#0
        assert // check self.asset_a exists
        b swap_switch_case_next@5

    swap_switch_case_1@3:
        // amm/contract.py:240
        // in_supply = self._current_a_balance()
        callsub _current_a_balance                                                                in_supply#0
        v-store in_supply#0
        // amm/contract.py:241
        // out_supply = self._current_b_balance()
        callsub _current_b_balance                                                                out_supply#0
        v-store out_supply#0
        // amm/contract.py:242
        // out_asset = self.asset_b
        int 0                                                                                     0
        byte "asset_b"                                                                            0,"asset_b"
        app_global_get_ex                                                                         out_asset#0,maybe_exists%5#0
        l-store maybe_exists%5#0 1                                                                maybe_exists%5#0,out_asset#0
        v-store out_asset#0                                                                       maybe_exists%5#0
        l-load maybe_exists%5#0 0                                                                 maybe_exists%5#0
        assert // check self.asset_b exists
        b swap_switch_case_next@5

    swap_switch_case_default@4:
        // amm/contract.py:244
        // assert False, "asset id incorrect"
        err // asset id incorrect

    swap_switch_case_next@5:
        // amm/contract.py:354
        // in_total = SCALE * (in_supply - in_amount) + (in_amount * FACTOR)
        v-load in_supply#0                                                                        in_supply#0
        v-load in_amount#0                                                                        in_supply#0,in_amount#0
        l-store-copy in_amount#0 1                                                                in_amount#0,in_supply#0,in_amount#0 (copy)
        -                                                                                         in_amount#0,tmp%0#0
        int 1000                                                                                  in_amount#0,tmp%0#0,1000
        l-load tmp%0#0 1                                                                          in_amount#0,1000,tmp%0#0
        *                                                                                         in_amount#0,tmp%1#0
        l-load in_amount#0 1                                                                      tmp%1#0,in_amount#0
        int 995                                                                                   tmp%1#0,in_amount#0,995
        *                                                                                         tmp%1#0,tmp%2#2
        l-load tmp%1#0 1                                                                          tmp%2#2,tmp%1#0
        l-load-copy tmp%2#2 1                                                                     tmp%2#2,tmp%1#0,tmp%2#2 (copy)
        +                                                                                         tmp%2#2,in_total#0
        // amm/contract.py:355
        // out_total = in_amount * FACTOR * out_supply
        l-load tmp%2#2 1                                                                          in_total#0,tmp%2#2
        v-load out_supply#0                                                                       in_total#0,tmp%2#2,out_supply#0
        *                                                                                         in_total#0,out_total#0
        // amm/contract.py:356
        // return out_total // in_total
        l-load out_total#0 0                                                                      in_total#0,out_total#0
        l-load in_total#0 1                                                                       out_total#0,in_total#0
        /                                                                                         to_swap#0
        // amm/contract.py:249
        // assert to_swap > 0, "send amount too low"
        l-load-copy to_swap#0 0                                                                   to_swap#0,to_swap#0 (copy)
        assert // send amount too low                                                             to_swap#0
        // amm/contract.py:251
        // do_asset_transfer(receiver=Txn.sender, asset=out_asset, amount=to_swap)
        txn Sender                                                                                to_swap#0,tmp%15#0
        l-load tmp%15#0 0                                                                         to_swap#0,tmp%15#0
        v-load out_asset#0                                                                        to_swap#0,tmp%15#0,out_asset#0
        l-load to_swap#0 2                                                                        tmp%15#0,out_asset#0,to_swap#0
        callsub do_asset_transfer
        // amm/contract.py:252
        // self._update_ratio()
        callsub _update_ratio
        // amm/contract.py:206-212
        // @arc4.abimethod(
        //     default_args={
        //         "a_asset": "asset_a",
        //         "b_asset": "asset_b",
        //     },
        //     resource_encoding="index",
        // )
        int 1                                                                                     1
        return


// examples.amm.contract.ConstantProductAMM._update_ratio() -> void:
subroutine _update_ratio:
    _update_ratio_block@0:
        // amm/contract.py:260
        // a_balance = self._current_a_balance()
        callsub _current_a_balance                                                                a_balance#0
        // amm/contract.py:261
        // b_balance = self._current_b_balance()
        callsub _current_b_balance                                                                a_balance#0,b_balance#0
        // amm/contract.py:263
        // self.ratio = a_balance * SCALE // b_balance
        l-load a_balance#0 1                                                                      b_balance#0,a_balance#0
        int 1000                                                                                  b_balance#0,a_balance#0,1000
        *                                                                                         b_balance#0,tmp%2#0
        l-load tmp%2#0 0                                                                          b_balance#0,tmp%2#0
        l-load b_balance#0 1                                                                      tmp%2#0,b_balance#0
        /                                                                                         tmp%3#0
        byte "ratio"                                                                              tmp%3#0,"ratio"
        l-load tmp%3#0 1                                                                          "ratio",tmp%3#0
        app_global_put
        retsub


// examples.amm.contract.ConstantProductAMM._check_is_governor() -> void:
subroutine _check_is_governor:
    _check_is_governor_block@0:
        // amm/contract.py:268
        // Txn.sender == self.governor
        txn Sender                                                                                tmp%0#0
        int 0                                                                                     tmp%0#0,0
        byte "governor"                                                                           tmp%0#0,0,"governor"
        app_global_get_ex                                                                         tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.governor exists                                                      tmp%0#0,maybe_value%0#0
        l-load tmp%0#0 1                                                                          maybe_value%0#0,tmp%0#0
        l-load maybe_value%0#0 1                                                                  tmp%0#0,maybe_value%0#0
        ==                                                                                        tmp%1#0
        // amm/contract.py:267-269
        // assert (
        //     Txn.sender == self.governor
        // ), "Only the account set in global_state.governor may call this method"
        l-load tmp%1#0 0                                                                          tmp%1#0
        assert // Only the account set in global_state.governor may call this method
        retsub


// examples.amm.contract.ConstantProductAMM._current_pool_balance() -> uint64:
subroutine _current_pool_balance:
    _current_pool_balance_block@0:
        // amm/contract.py:296
        // return self.pool_token.balance(Global.current_application_address)
        global CurrentApplicationAddress                                                          tmp%0#0
        int 0                                                                                     tmp%0#0,0
        byte "pool_token"                                                                         tmp%0#0,0,"pool_token"
        app_global_get_ex                                                                         tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.pool_token exists                                                    tmp%0#0,maybe_value%0#0
        l-load tmp%0#0 1                                                                          maybe_value%0#0,tmp%0#0
        l-load maybe_value%0#0 1                                                                  tmp%0#0,maybe_value%0#0
        asset_holding_get AssetBalance                                                            value%0#0,check%0#0
        l-load check%0#0 0                                                                        value%0#0,check%0#0
        assert // account opted into asset                                                        value%0#0
        l-load value%0#0 0                                                                        value%0#0
        retsub                                                                                    value%0#0


// examples.amm.contract.ConstantProductAMM._current_a_balance() -> uint64:
subroutine _current_a_balance:
    _current_a_balance_block@0:
        // amm/contract.py:300
        // return self.asset_a.balance(Global.current_application_address)
        global CurrentApplicationAddress                                                          tmp%0#0
        int 0                                                                                     tmp%0#0,0
        byte "asset_a"                                                                            tmp%0#0,0,"asset_a"
        app_global_get_ex                                                                         tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.asset_a exists                                                       tmp%0#0,maybe_value%0#0
        l-load tmp%0#0 1                                                                          maybe_value%0#0,tmp%0#0
        l-load maybe_value%0#0 1                                                                  tmp%0#0,maybe_value%0#0
        asset_holding_get AssetBalance                                                            value%0#0,check%0#0
        l-load check%0#0 0                                                                        value%0#0,check%0#0
        assert // account opted into asset                                                        value%0#0
        l-load value%0#0 0                                                                        value%0#0
        retsub                                                                                    value%0#0


// examples.amm.contract.ConstantProductAMM._current_b_balance() -> uint64:
subroutine _current_b_balance:
    _current_b_balance_block@0:
        // amm/contract.py:304
        // return self.asset_b.balance(Global.current_application_address)
        global CurrentApplicationAddress                                                          tmp%0#0
        int 0                                                                                     tmp%0#0,0
        byte "asset_b"                                                                            tmp%0#0,0,"asset_b"
        app_global_get_ex                                                                         tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        l-load maybe_exists%0#0 0                                                                 tmp%0#0,maybe_value%0#0,maybe_exists%0#0
        assert // check self.asset_b exists                                                       tmp%0#0,maybe_value%0#0
        l-load tmp%0#0 1                                                                          maybe_value%0#0,tmp%0#0
        l-load maybe_value%0#0 1                                                                  tmp%0#0,maybe_value%0#0
        asset_holding_get AssetBalance                                                            value%0#0,check%0#0
        l-load check%0#0 0                                                                        value%0#0,check%0#0
        assert // account opted into asset                                                        value%0#0
        l-load value%0#0 0                                                                        value%0#0
        retsub                                                                                    value%0#0


